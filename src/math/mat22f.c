// ======================================================================================
// File         : mat22f.c
// Author       : Wu Jie 
// Last Change  : 11/11/2010 | 14:23:21 PM | Thursday,November
// Description  : 
// ======================================================================================

///////////////////////////////////////////////////////////////////////////////
// includes
///////////////////////////////////////////////////////////////////////////////

#include "exsdk.h"
#include "mathop.h"
#include "vec2f.h"
#include "mat22f.h"

///////////////////////////////////////////////////////////////////////////////
// defines
///////////////////////////////////////////////////////////////////////////////

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

bool mat22f_inverse ( mat22f_t* _m ) {
    float det, inv;
    float m00, m01, m10, m11;
    
    det = _m->m00 * _m->m11 - _m->m10 * _m->m01;
    if ( is_zero_float( det, EX_FLOAT_EPS ) )
        return false;

    inv = 1.0f / det;
    m00 = _m->m11 * inv;
    m01 = _m->m01 * inv;
    m10 = _m->m10 * inv;
    m11 = _m->m00 * inv;

    _m->m00 = m00;
    _m->m01 = m01;
    _m->m10 = m10;
    _m->m11 = m11;

    return true;
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

bool mat22f_get_inverse ( mat22f_t* _r, mat22f_t* _m ) {
    float det, inv;

    ex_assert ( _r != _m, "can't use self as return value." );
    
    det = _m->m00 * _m->m11 - _m->m10 * _m->m01;
    if ( is_zero_float( det, EX_FLOAT_EPS ) )
        return false;

    inv = 1.0f / det;
    _r->m00 = _m->m11 * inv;
    _r->m01 = _m->m01 * inv;
    _r->m10 = _m->m10 * inv;
    _r->m11 = _m->m00 * inv;

    return true;
}
