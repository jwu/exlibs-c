// ======================================================================================
// File         : test_thread.c
// Author       : Wu Jie 
// Last Change  : 12/28/2010 | 17:53:59 PM | Tuesday,December
// Description  : 
// ======================================================================================

///////////////////////////////////////////////////////////////////////////////
// include
///////////////////////////////////////////////////////////////////////////////

#include "../../core/core_inc.h"

///////////////////////////////////////////////////////////////////////////////
// defines
///////////////////////////////////////////////////////////////////////////////

static int thread_func1 ( void* _data ) {
    int counter = 20;
    ex_log ("this is thread1");
    while ( counter > 0 ) {
        ex_log ("thread1 tick");
        ex_sleep(1000);
        --counter;
    }
    ex_log ("thread1 ended");
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

static void normal () {
    int counter = 5;
    ex_thread_t* thread1 = ex_create_thread ( thread_func1, NULL );
    while ( counter > 0 ) {
        ex_log ("main tick");
        ex_sleep(1000);
        --counter;
    }
    ex_log ("main waiting thread1");
    ex_wait_thread ( thread1, NULL );
    ex_log ("main thread ended");
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

static void invalid() {
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void test_thread () {
    normal();
    invalid();
}
