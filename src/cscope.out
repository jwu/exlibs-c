cscope 15 E:\project\dev\exsdk\src"               0000227894
	@algo\CRC.c

12 
	~"exsdk.h
"

13 
	~"b™.h
"

26 
	#EX_USE_CRC_TABLE
 0

	)

27 
	#EX_USE_CRC_TABLE_FAST
 0

	)

33 #ià
EX_USE_CRC_TABLE


44 cÚ¡ 
ušt32
 
	gCRC_TabË0
[256] =

100 #ià
EX_USE_CRC_TABLE_FAST


106 cÚ¡ 
ušt32
 
	gCRC_TabË1
[256] =

166 cÚ¡ 
ušt32
 
	gCRC_TabË2
[256] =

226 cÚ¡ 
ušt32
 
	gCRC_TabË3
[256] =

290 
ušt32
 
	$ÿlcCRC
 ( 
_ücSize
, cÚ¡ 
ušt8
* 
_d©a
, 
ušt
 
_Ën
 )

292 
ušt32
 
»suÉ
 = ~0UL;

293 #ià
EX_USE_CRC_TABLE


294 
ušt32
 
i
;

295 #ià!
EX_USE_CRC_TABLE_FAST


296 
ušt32
 
couÁ
;

300 cÚ¡ 
ušt32
 *
buf_¬¿y
 = (cÚ¡ ušt32*)
_d©a
;

302 
	`ex_as£¹
Ğ
_d©a
, "invalid _data value" );

303 
	`ex_as£¹
Ğ
	`is_pow_of_2
(
_ücSize
), "_crcSize should be…ower of 2" );

305 #ià
EX_USE_CRC_TABLE


308 #ià
EX_USE_CRC_TABLE_FAST


311 ià(
_Ën
 && ((
size_t
)
_d©a
 & 2))

313 
»suÉ
 = 
CRC_TabË0
[ÔesuÉ ^ *
_d©a
++) & 0xff] ^ (result >> 8);

314 
»suÉ
 = 
CRC_TabË0
[ÔesuÉ ^ *
_d©a
++) & 0xff] ^ (result >> 8);

315 
_Ën
 -= 2;

318 ià(
_Ën
 && ((
size_t
)
_d©a
 & 1))

320 
»suÉ
 = 
CRC_TabË0
[ÔesuÉ ^ *
_d©a
++) & 0xff] ^ (result >> 8);

321 
_Ën
--;

324 
i
 = 0; i < (
_Ën
 >> 2); ++i)

326 
ušt32
 
v®
 = 
buf_¬¿y
[
i
];

328 #ià(
EX_ENDIAN
 =ğ
EX_BIG_ENDIAN
)

329 
	`Sw­By‹
(
v®
);

332 
»suÉ
 ^ğ
v®
;

334 
»suÉ
 = 
CRC_TabË3
[(result) & 0xff] ^

335 
CRC_TabË2
[((
»suÉ
) >> 8) & 0xff] ^

336 
CRC_TabË1
[((
»suÉ
) >> 16) & 0xff] ^

337 
CRC_TabË0
[(
»suÉ
) >> 24];

340 
_d©a
 +ğ(
i
 << 2);

341 
_Ën
 -ğ(
i
 << 2);

343 ià(
_Ën
 & 2)

345 
»suÉ
 = 
CRC_TabË0
[ÔesuÉ ^ *
_d©a
++) & 0xff] ^ (result >> 8);

346 
»suÉ
 = 
CRC_TabË0
[ÔesuÉ ^ *
_d©a
++) & 0xff] ^ (result >> 8);

349 ià(
_Ën
 & 1)

350 
»suÉ
 = 
CRC_TabË0
[ÔesuÉ ^ *
_d©a
++) & 0xff] ^ (result >> 8);

352 
»suÉ
 ^= 0xffffffff;

353 
»suÉ
 &ğ((((
ušt32
)1 << (
_ücSize
 - 1)) - 1) << 1) | 1;

360 ; ((
ušt32
)(
size_t
)(*)
_d©a
è& ((ušt32è- 1); _d©a++, 
_Ën
--)

362 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ *
_d©a
]);

364 ià(
_Ën
 == 0)

366 
»suÉ
 ^= 0xffffffff;

367 
»suÉ
 &ğ((((
ušt32
)1 << (
_ücSize
 - 1)) - 1) << 1) | 1;

368  
»suÉ
;

372 
couÁ
 = 
_Ën
 >> 2;

375  
i
 = 0; i < 
couÁ
; ++i )

377 
ušt32
 
v®
 = *(ušt32 cÚ¡*)
_d©a
;

379 #ià(
EX_ENDIAN
 =ğ
EX_BIG_ENDIAN
)

380 
	`Sw­By‹
(
v®
);

383 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ (
v®
 & 0xff)]);

384 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ ((
v®
 & 0xff00) >> 8)]);

385 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ ((
v®
 & 0xff0000) >> 16)]);

386 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ ((
v®
 & 0xff000000) >> 24)]);

388 
_d©a
 += 4;

392 
couÁ
 = 
_Ën
 - (count << 2);

393  
i
 = 0; i < 
couÁ
; ++i )

394 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ *
_d©a
++]);

396 
»suÉ
 ^= 0xffffffff;

397 
»suÉ
 &ğ((((
ušt32
)1 << (
_ücSize
 - 1)) - 1) << 1) | 1;

404 
	`ex_w¬nšg
 ( "CRC Hash is disabled. Please Enable EX_USE_CRC_TABLE in config.h" );

407  
»suÉ
;

408 
	}
}

414 
ušt32
 
	$ÿlcCRC_¡r
 ( 
_ücSize
, cÚ¡ * 
_d©a
 )

416 
ušt32
 
»suÉ
 = ~0UL;

417 cÚ¡ * 
p
 = 
_d©a
;

418 
ušt32
 
m
 = 0x7eããff, 
n
 = ~m, 
i
 = 0;

420 
	`ex_as£¹
Ğ
_d©a
, "invalid _data value" );

421 
	`ex_as£¹
Ğ
	`is_pow_of_2
(
_ücSize
), "_crcSize should be…ower of 2" );

423 #ià
EX_USE_CRC_TABLE


426  ; ((
ušt32
)(
size_t
)(*)
p
) & ((uint32) - 1); ++p )

428 ià(!*
p
)

430 
»suÉ
 ^= 0xffffffff;

431 
»suÉ
 &ğ((((
ušt32
)1 << (
_ücSize
 - 1)) - 1) << 1) | 1;

432  
»suÉ
;

435 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ *
p
]);

441 
i
 = *(
ušt32
 cÚ¡*)
p
;

443 #ià(
EX_ENDIAN
 =ğ
EX_BIG_ENDIAN
)

444 
	`Sw­By‹
(
i
);

447 ià(!(((
i
 + 
m
è^ ~iè& 
n
))

449 
p
 +ğ(
ušt32
);

451 #ià
EX_USE_CRC_TABLE_FAST


452 
»suÉ
 ^ğ
i
;

453 
»suÉ
 = 
CRC_TabË3
[ (result) & 0xff] ^

454 
CRC_TabË2
[((
»suÉ
) >> 8) & 0xff] ^

455 
CRC_TabË1
[((
»suÉ
) >> 16) & 0xff] ^

456 
CRC_TabË0
[ (
»suÉ
) >> 24];

458 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ (
i
 & 0xff)]);

459 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ ((
i
 & 0xff00) >> 8)]);

460 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ ((
i
 & 0xff0000) >> 16)]);

461 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ ((
i
 & 0xff000000) >> 24)]);

467  
i
 = (
ušt32
); i; ++
p
, --i )

469 ià(!*
p
)

471 
»suÉ
 ^= 0xffffffff;

472 
»suÉ
 &ğ((((
ušt32
)1 << (
_ücSize
 - 1)) - 1) << 1) | 1;

473  
»suÉ
;

476 
»suÉ
 = (ÔesuÉ >> 8è^ 
CRC_TabË0
[ÔesuÉ & 0xFFULè^ *
p
]);

479 
»suÉ
 ^= 0xffffffff;

480 
»suÉ
 &ğ((((
ušt32
)1 << (
_ücSize
 - 1)) - 1) << 1) | 1;

481  
»suÉ
;

487 
	`ex_w¬nšg
 ( "CRC Hash is disabled. Please Enable EX_USE_CRC_TABLE in config.h" );

490  
»suÉ
;

491 
	}
}

	@algo\CRC.h

10 #iâdeà
CRC_H_1277698312


11 
	#CRC_H_1277698312


	)

18 
ušt32
 
ÿlcCRC
 ( 
_size
, cÚ¡ 
ušt8
* 
_d©a
, 
ušt
 
_Ën
 );

24 
ušt32
 
ÿlcCRC_¡r
 ( 
_size
, cÚ¡ * 
_d©a
 );

	@algo\algo_inc.h

9 #iâdeà
ALGO_INC_H_1277694808


10 
	#ALGO_INC_H_1277694808


	)

13 
	~"b™.h
"

14 
	~"CRC.h
"

15 
	~"hash.h
"

	@algo\bit.h

9 #iâdeà
BIT_H_1277693605


10 
	#BIT_H_1277693605


	)

17 
šlše
 
ušt32
 
	$pow2
 ( 
ušt32
 
_couÁ
 ) {  ((ušt32)1<<_couÁ); 
	}
}

24 
šlše
 
boŞ
 
	$is_pow_of_2
 ( 
ušt
 
_v®ue
 ) {

25  !((
_v®ue
-1) & _value);

26 
	}
}

33 
šlše
 
boŞ
 
	$is_®igÃd
 ( 
ušt
 
_v®ue
, ušˆ
_®ign
 ) {

34 
	`ex_as£¹
Ğ
	`is_pow_of_2
(
_®ign
), "_align must be…ow of 2" );

35  ( (
_v®ue
 & (
_®ign
-1)) == 0 );

36 
	}
}

42 
šlše
 
ušt32
 
	$b™mask
Ğ
ušt32
 
_couÁ
 ) {

43  
	`pow2
(
_couÁ
)-1;

44 
	}
}

50 
šlše
 
ušt32
 
	$u£b™s
 ( 
ušt32
 
_v®ue
, ušt32 
_couÁ
 )

52  (
_v®ue
 & 
	`b™mask
(
_couÁ
));

53 
	}
}

59 
šlše
 
ušt32
 
	$g‘b™
 ( 
ušt32
 
_v®ue
, ušt32 
_b™_pos
 )

61  (
_v®ue
 & 
	`pow2
(
_b™_pos
));

62 
	}
}

72 
šlše
 
ušt32
 
	$b™_rÙl
 ( 
ušt32
 
_v®ue
, ušt32 
_rÙ_couÁ
 ) {

73 cÚ¡ 
ušt
 
size
 = (
ušt32
) * 4;

74 
_rÙ_couÁ
 %ğ
size
;

75  (
_v®ue
 << 
_rÙ_couÁ
è| (_v®u>> (
size
 - _rot_count));

76 
	}
}

82 
šlše
 
ušt32
 
	$b™_rÙr
 ( 
ušt32
 
_v®ue
, ušt32 
_rÙ_couÁ
 ) {

83 cÚ¡ 
ušt
 
size
 = (
ušt32
) * 4;

84 
_rÙ_couÁ
 %ğ
size
;

85  (
_v®ue
 >> 
_rÙ_couÁ
è| (_v®u<< (
size
 - _rot_count));

86 
	}
}

96 
šlše
 
ušt64
 
	$g’_ušt64
 ( 
ušt32
 
_highV®
, ušt32 
_lowV®
 ) {

97  (((
ušt64
)
_highV®
)<<32uÎè+ (ušt64)
_lowV®
;

98 
	}
}

104 
šlše
 
št64
 
	$g’_št64
 ( 
št32
 
_highV®
, iÁ32 
_lowV®
 ) {

105  (((
št64
)
_highV®
)<<32Îè+ (št64)
_lowV®
;

106 
	}
}

112 
šlše
 
	$¥l™_ušt64
 ( 
ušt64
 
_v®ue
, 
ušt32
* 
_pHighV®
, ušt32* 
_pLowV®
 ) {

113 iàĞ
_pLowV®
 )

115 (*
_pLowV®
èğ(
ušt32
)(
_v®ue
 & 0xffffffffull);

118 iàĞ
_pHighV®
 )

120 (*
_pHighV®
èğ(
ušt32
)(
_v®ue
>>32ull);

122 
	}
}

128 
šlše
 
	$¥l™_št64
 ( 
št64
 
_v®ue
, 
št32
* 
_pHighV®
, iÁ32* 
_pLowV®
 ) {

129 iàĞ
_pLowV®
 )

131 (*
_pLowV®
èğ(
št32
)(
_v®ue
 & 0xffffffffull);

134 iàĞ
_pHighV®
 )

136 (*
_pHighV®
èğ(
št32
)(
_v®ue
>>32ull);

138 
	}
}

148 
šlše
 
	$sw­_n_by‹s
 ( 
_n
, * 
_v®ue
 ) {

149 
ušt8
* 
p
 = (ušt8*)
_v®ue
;

150 
ušt32
 
i
 = 0;

151 
ušt32
 
j
 = 
_n
 - 1;

152 
ušt8
 
t
;

154 
i
 < 
j
)

156 
t
 = 
p
[
i
];

158 
p
[
i
] =…[
j
];

159 
p
[
j
] = 
t
;

161 
i
++;

162 
j
--;

164 
	}
}

170 
šlše
 
	$sw­_1_by‹s
 ( * 
_v®ue
 ) {

171 
	`EX_UNUSED
(
_v®ue
);

172 
	}
}

178 
šlše
 
	$sw­_2_by‹s
 ( * 
_v®ue
 ) {

179 
ušt16
* 
pV®
 = (ušt16*)
_v®ue
;

180 *
pV®
 = (((*pVal) >> 8) & 0xff) | (((*pVal) & 0xff) << 8);

181 
	}
}

187 
šlše
 
	$sw­_4_by‹s
 ( * 
_v®ue
 ) {

188 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 ) && ( 
EX_COMPILER
 =ğ
EX_MSVC
 )

189 
__asm


191 
mov
 
esi
, 
_v®ue


192 
mov
 
—x
, [
esi
]

193 
bsw­
 
—x


194 
mov
 [
esi
], 
—x


199 
	}
}

205 
šlše
 
	$sw­_8_by‹s
 ( * 
_v®ue
 ) {

206 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 ) && ( 
EX_COMPILER
 =ğ
EX_MSVC
 )

207 
__asm


209 
mov
 
esi
, 
_v®ue


210 
mov
 
—x
, [
esi
]

211 
mov
 
ebx
, [
esi
+4]

212 
bsw­
 
—x


213 
bsw­
 
ebx


214 
mov
 [
esi
], 
ebx


215 
mov
 [
esi
+4], 
—x


220 
	}
}

	@algo\hash.c

12 
	~"exsdk.h
"

56 #ifdeà
__mix


57 #undeà
__mix


60 
	#__mix
(
a
,
b
,
c
) \

62 
a
 -ğ
b
;‡ -ğ
c
;‡ ^= (c>>13); \

63 
b
 -ğ
c
; b -ğ
a
; b ^= (a<<8); \

64 
c
 -ğ
a
; c -ğ
b
; c ^= (b>>13); \

65 
a
 -ğ
b
;‡ -ğ
c
;‡ ^= (c>>12); \

66 
b
 -ğ
c
; b -ğ
a
; b ^= (a<<16); \

67 
c
 -ğ
a
; c -ğ
b
; c ^= (b>>5); \

68 
a
 -ğ
b
;‡ -ğ
c
;‡ ^= (c>>3); \

69 
b
 -ğ
c
; b -ğ
a
; b ^= (a<<10); \

70 
c
 -ğ
a
; c -ğ
b
; c ^= (b>>15); \

71 }

	)

100 
ušt32
 
	$hashbob2
ĞcÚ¡ 
ušt8
* 
_d©a
, 
ušt32
 
_Ën
, ušt32 
_£ed
 )

102 
ušt32
 
a
,
b
,
c
,
Ën
;

105 
Ën
 = 
_Ën
;

106 
a
 = 
b
 = 0x9e3779b9;

107 
c
 = 
_£ed
;

110 
Ën
 >= 12)

112 
a
 +ğ(
_d©a
[0] +((
ušt32
)_data[1] << 8) +((uint32)_data[2] << 16) +((uint32)_data[3] << 24));

113 
b
 +ğ(
_d©a
[4] +((
ušt32
)_data[5] << 8) +((uint32)_data[6] << 16) +((uint32)_data[7] << 24));

114 
c
 +ğ(
_d©a
[8] +((
ušt32
)_data[9] << 8) +((uint32)_data[10] << 16)+((uint32)_data[11] << 24));

115 
	`__mix
(
a
,
b
,
c
);

116 
_d©a
 +ğ12; 
Ën
 -= 12;

120 
c
 +ğ
_Ën
;

121 
Ën
)

123 11: 
c
+=((
ušt32
)
_d©a
[10]<<24);

124 10: 
c
+=((
ušt32
)
_d©a
[9]<<16);

125 9 : 
c
+=((
ušt32
)
_d©a
[8]<<8);

127 8 : 
b
+=((
ušt32
)
_d©a
[7]<<24);

128 7 : 
b
+=((
ušt32
)
_d©a
[6]<<16);

129 6 : 
b
+=((
ušt32
)
_d©a
[5]<<8);

130 5 : 
b
+=
_d©a
[4];

131 4 : 
a
+=((
ušt32
)
_d©a
[3]<<24);

132 3 : 
a
+=((
ušt32
)
_d©a
[2]<<16);

133 2 : 
a
+=((
ušt32
)
_d©a
[1]<<8);

134 1 : 
a
+=
_d©a
[0];

137 
	`__mix
(
a
,
b
,
c
);

139  
c
;

140 
	}
}

181 #ià(
EX_ENDIAN
 =ğ
EX_LITTLE_ENDIAN
)

182 
	#__HASH_LITTLE_ENDIAN
 1

	)

183 
	#__HASH_BIG_ENDIAN
 0

	)

184 #–ià(
EX_ENDIAN
 =ğ
EX_BIG_ENDIAN
)

185 
	#__HASH_LITTLE_ENDIAN
 0

	)

186 
	#__HASH_BIG_ENDIAN
 1

	)

192 #ifdeà
__rÙ


193 #undeà
__rÙ


196 
	#__rÙ
(
x
,
k
è(((x)<<(k)è| ((x)>>(32-(k))))

	)

241 #ifdeà
__mix


242 #undeà
__mix


245 
	#__mix
(
a
,
b
,
c
) \

247 
a
 -ğ
c
;‡ ^ğ
	`__rÙ
(c, 4); c +ğ
b
; \

248 
b
 -ğ
a
; b ^ğ
	`__rÙ
×, 6);‡ +ğ
c
; \

249 
c
 -ğ
b
; c ^ğ
	`__rÙ
(b, 8); b +ğ
a
; \

250 
a
 -ğ
c
;‡ ^ğ
	`__rÙ
(c,16); c +ğ
b
; \

251 
b
 -ğ
a
; b ^ğ
	`__rÙ
×,19);‡ +ğ
c
; \

252 
c
 -ğ
b
; c ^ğ
	`__rÙ
(b, 4); b +ğ
a
; \

253 }

	)

280 #ifdeà
__fš®


281 #undeà
__fš®


284 
	#__fš®
(
a
,
b
,
c
) \

286 
c
 ^ğ
b
; c -ğ
	`__rÙ
(b,14); \

287 
a
 ^ğ
c
;‡ -ğ
	`__rÙ
(c,11); \

288 
b
 ^ğ
a
; b -ğ
	`__rÙ
(a,25); \

289 
c
 ^ğ
b
; c -ğ
	`__rÙ
(b,16); \

290 
a
 ^ğ
c
;‡ -ğ
	`__rÙ
(c,4); \

291 
b
 ^ğ
a
; b -ğ
	`__rÙ
(a,14); \

292 
c
 ^ğ
b
; c -ğ
	`__rÙ
(b,24); \

293 }

	)

314 
ušt32
 
	$hashwÜd
ĞcÚ¡ 
ušt32
* 
_d©a
, ušt32 
_Ën
, ušt32 
_£ed
 )

316 
ušt32
 
a
,
b
,
c
;

319 
a
 = 
b
 = 
c
 = 0xd—db“à+ (((
ušt32
)
_Ën
)<<2è+ 
_£ed
;

322 
_Ën
 > 3)

324 
a
 +ğ
_d©a
[0];

325 
b
 +ğ
_d©a
[1];

326 
c
 +ğ
_d©a
[2];

327 
	`__mix
(
a
,
b
,
c
);

328 
_Ën
 -= 3;

329 
_d©a
 += 3;

333 
_Ën
)

335 3 : 
c
+=
_d©a
[2];

336 2 : 
b
+=
_d©a
[1];

337 1 : 
a
+=
_d©a
[0];

338 
	`__fš®
(
a
,
b
,
c
);

343  
c
;

344 
	}
}

361 
	$hashwÜd2
 ( cÚ¡ 
ušt32
* 
_d©a
, ušt32 
_Ën
, ušt32* 
_£ed1
, ušt32* 
_£ed2
 )

363 
ušt32
 
a
,
b
,
c
;

366 
a
 = 
b
 = 
c
 = 0xd—db“à+ ((
ušt32
)(
_Ën
<<2)è+ *
_£ed1
;

367 
c
 +ğ*
_£ed2
;

370 
_Ën
 > 3)

372 
a
 +ğ
_d©a
[0];

373 
b
 +ğ
_d©a
[1];

374 
c
 +ğ
_d©a
[2];

375 
	`__mix
(
a
,
b
,
c
);

376 
_Ën
 -= 3;

377 
_d©a
 += 3;

381 
_Ën
)

383 3 : 
c
+=
_d©a
[2];

384 2 : 
b
+=
_d©a
[1];

385 1 : 
a
+=
_d©a
[0];

386 
	`__fš®
(
a
,
b
,
c
);

391 *
_£ed1
=
c
; *
_£ed2
=
b
;

392 
	}
}

422 
ušt32
 
	$hashl™e
 ( cÚ¡ * 
_d©a
, 
ušt32
 
_Ën
, ušt32 
_£ed
 )

424 
ušt32
 
a
,
b
,
c
;

425 uniÚ { cÚ¡ * 
±r
; 
size_t
 
i
; } 
u
;

428 
a
 = 
b
 = 
c
 = 0xd—db“à+ ((
ušt32
)
_Ën
è+ 
_£ed
;

430 
u
.
±r
 = 
_d©a
;

431 ià(
__HASH_LITTLE_ENDIAN
 && ((
u
.
i
 & 0x3) == 0))

433 cÚ¡ 
ušt32
* 
pD©a32
 = (cÚ¡ ušt32 *)
_d©a
;

436 
_Ën
 > 12)

438 
a
 +ğ
pD©a32
[0];

439 
b
 +ğ
pD©a32
[1];

440 
c
 +ğ
pD©a32
[2];

441 
	`__mix
(
a
,
b
,
c
);

442 
_Ën
 -= 12;

443 
pD©a32
 += 3;

456 #iâdeà
VALGRIND


458 
_Ën
)

460 12: 
c
+=
pD©a32
[2]; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

461 11: 
c
+=
pD©a32
[2]&0xffffff; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

462 10: 
c
+=
pD©a32
[2]&0xffff; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

463 9 : 
c
+=
pD©a32
[2]&0xff; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

464 8 : 
b
+=
pD©a32
[1]; 
a
+=pData32[0]; ;

465 7 : 
b
+=
pD©a32
[1]&0xffffff; 
a
+=pData32[0]; ;

466 6 : 
b
+=
pD©a32
[1]&0xffff; 
a
+=pData32[0]; ;

467 5 : 
b
+=
pD©a32
[1]&0xff; 
a
+=pData32[0]; ;

468 4 : 
a
+=
pD©a32
[0]; ;

469 3 : 
a
+=
pD©a32
[0]&0xffffff; ;

470 2 : 
a
+=
pD©a32
[0]&0xffff; ;

471 1 : 
a
+=
pD©a32
[0]&0xff; ;

472 0 :  
c
;

477 cÚ¡ 
ušt8
* 
pD©a8
 = (cÚ¡ ušt8 *)
pD©a32
;

478 
_Ën
)

480 12: 
c
+=
pD©a32
[2]; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

481 11: 
c
+=((
ušt32
)
pD©a8
[10])<<16;

482 10: 
c
+=((
ušt32
)
pD©a8
[9])<<8;

483 9 : 
c
+=
pD©a8
[8];

484 8 : 
b
+=
pD©a32
[1]; 
a
+=pData32[0]; ;

485 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<16;

486 6 : 
b
+=((
ušt32
)
pD©a8
[5])<<8;

487 5 : 
b
+=
pD©a8
[4];

488 4 : 
a
+=
pD©a32
[0]; ;

489 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<16;

490 2 : 
a
+=((
ušt32
)
pD©a8
[1])<<8;

491 1 : 
a
+=
pD©a8
[0]; ;

492 0 :  
c
;

498 ià(
__HASH_LITTLE_ENDIAN
 && ((
u
.
i
 & 0x1) == 0))

500 cÚ¡ 
ušt16
* 
pD©a16
 = (cÚ¡ ušt16 *)
_d©a
;

501 cÚ¡ 
ušt8
* 
pD©a8
;

504 
_Ën
 > 12)

506 
a
 +ğ
pD©a16
[0] + (((
ušt32
)pData16[1])<<16);

507 
b
 +ğ
pD©a16
[2] + (((
ušt32
)pData16[3])<<16);

508 
c
 +ğ
pD©a16
[4] + (((
ušt32
)pData16[5])<<16);

509 
	`__mix
(
a
,
b
,
c
);

510 
_Ën
 -= 12;

511 
pD©a16
 += 6;

515 
pD©a8
 = (cÚ¡ 
ušt8
 *)
pD©a16
;

516 
_Ën
)

518 12: 
c
+=
pD©a16
[4]+(((
ušt32
)pData16[5])<<16);

519 
b
+=
pD©a16
[2]+(((
ušt32
)pData16[3])<<16);

520 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

522 11: 
c
+=((
ušt32
)
pD©a8
[10])<<16;

523 10: 
c
+=
pD©a16
[4];

524 
b
+=
pD©a16
[2]+(((
ušt32
)pData16[3])<<16);

525 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

527 9 : 
c
+=
pD©a8
[8];

528 8 : 
b
+=
pD©a16
[2]+(((
ušt32
)pData16[3])<<16);

529 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

531 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<16;

532 6 : 
b
+=
pD©a16
[2];

533 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

535 5 : 
b
+=
pD©a8
[4];

536 4 : 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

538 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<16;

539 2 : 
a
+=
pD©a16
[0];

541 1 : 
a
+=
pD©a8
[0];

543 0 :  
c
;

548 cÚ¡ 
ušt8
 *
pD©a8
 = (cÚ¡ ušt8 *)
_d©a
;

551 
_Ën
 > 12)

553 
a
 +ğ
pD©a8
[0];

554 
a
 +ğ((
ušt32
)
pD©a8
[1])<<8;

555 
a
 +ğ((
ušt32
)
pD©a8
[2])<<16;

556 
a
 +ğ((
ušt32
)
pD©a8
[3])<<24;

557 
b
 +ğ
pD©a8
[4];

558 
b
 +ğ((
ušt32
)
pD©a8
[5])<<8;

559 
b
 +ğ((
ušt32
)
pD©a8
[6])<<16;

560 
b
 +ğ((
ušt32
)
pD©a8
[7])<<24;

561 
c
 +ğ
pD©a8
[8];

562 
c
 +ğ((
ušt32
)
pD©a8
[9])<<8;

563 
c
 +ğ((
ušt32
)
pD©a8
[10])<<16;

564 
c
 +ğ((
ušt32
)
pD©a8
[11])<<24;

565 
	`__mix
(
a
,
b
,
c
);

566 
_Ën
 -= 12;

567 
pD©a8
 += 12;

571 
_Ën
)

573 12: 
c
+=((
ušt32
)
pD©a8
[11])<<24;

574 11: 
c
+=((
ušt32
)
pD©a8
[10])<<16;

575 10: 
c
+=((
ušt32
)
pD©a8
[9])<<8;

576 9 : 
c
+=
pD©a8
[8];

577 8 : 
b
+=((
ušt32
)
pD©a8
[7])<<24;

578 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<16;

579 6 : 
b
+=((
ušt32
)
pD©a8
[5])<<8;

580 5 : 
b
+=
pD©a8
[4];

581 4 : 
a
+=((
ušt32
)
pD©a8
[3])<<24;

582 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<16;

583 2 : 
a
+=((
ušt32
)
pD©a8
[1])<<8;

584 1 : 
a
+=
pD©a8
[0];

586 0 :  
c
;

590 
	`__fš®
(
a
,
b
,
c
);

591  
c
;

592 
	}
}

613 
	$hashl™e2
 ( cÚ¡ * 
_d©a
, 
ušt32
 
_Ën
, ušt32* 
_£ed1
, ušt32* 
_£ed2
 )

615 
ušt32
 
a
,
b
,
c
;

616 uniÚ { cÚ¡ *
±r
; 
size_t
 
i
; } 
u
;

619 
a
 = 
b
 = 
c
 = 0xd—db“à+ ((
ušt32
)
_Ën
è+ *
_£ed1
;

620 
c
 +ğ*
_£ed2
;

622 
u
.
±r
 = 
_d©a
;

623 ià(
__HASH_LITTLE_ENDIAN
 && ((
u
.
i
 & 0x3) == 0))

625 cÚ¡ 
ušt32
* 
pD©a32
 = (cÚ¡ ušt32 *)
_d©a
;

628 
_Ën
 > 12)

630 
a
 +ğ
pD©a32
[0];

631 
b
 +ğ
pD©a32
[1];

632 
c
 +ğ
pD©a32
[2];

633 
	`__mix
(
a
,
b
,
c
);

634 
_Ën
 -= 12;

635 
pD©a32
 += 3;

648 #iâdeà
VALGRIND


650 
_Ën
)

652 12: 
c
+=
pD©a32
[2]; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

653 11: 
c
+=
pD©a32
[2]&0xffffff; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

654 10: 
c
+=
pD©a32
[2]&0xffff; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

655 9 : 
c
+=
pD©a32
[2]&0xff; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

656 8 : 
b
+=
pD©a32
[1]; 
a
+=pData32[0]; ;

657 7 : 
b
+=
pD©a32
[1]&0xffffff; 
a
+=pData32[0]; ;

658 6 : 
b
+=
pD©a32
[1]&0xffff; 
a
+=pData32[0]; ;

659 5 : 
b
+=
pD©a32
[1]&0xff; 
a
+=pData32[0]; ;

660 4 : 
a
+=
pD©a32
[0]; ;

661 3 : 
a
+=
pD©a32
[0]&0xffffff; ;

662 2 : 
a
+=
pD©a32
[0]&0xffff; ;

663 1 : 
a
+=
pD©a32
[0]&0xff; ;

664 0 : *
_£ed1
=
c
; *
_£ed2
=
b
; ;

669 cÚ¡ 
ušt8
* 
pD©a8
 = (cÚ¡ ušt8 *)
pD©a32
;

670 
_Ën
)

672 12: 
c
+=
pD©a32
[2]; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

673 11: 
c
+=((
ušt32
)
pD©a8
[10])<<16;

674 10: 
c
+=((
ušt32
)
pD©a8
[9])<<8;

675 9 : 
c
+=
pD©a8
[8];

676 8 : 
b
+=
pD©a32
[1]; 
a
+=pData32[0]; ;

677 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<16;

678 6 : 
b
+=((
ušt32
)
pD©a8
[5])<<8;

679 5 : 
b
+=
pD©a8
[4];

680 4 : 
a
+=
pD©a32
[0]; ;

681 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<16;

682 2 : 
a
+=((
ušt32
)
pD©a8
[1])<<8;

683 1 : 
a
+=
pD©a8
[0]; ;

684 0 : *
_£ed1
=
c
; *
_£ed2
=
b
; ;

690 ià(
__HASH_LITTLE_ENDIAN
 && ((
u
.
i
 & 0x1) == 0))

692 cÚ¡ 
ušt16
 *
pD©a16
 = (cÚ¡ ušt16 *)
_d©a
;

693 cÚ¡ 
ušt8
 *
pD©a8
;

696 
_Ën
 > 12)

698 
a
 +ğ
pD©a16
[0] + (((
ušt32
)pData16[1])<<16);

699 
b
 +ğ
pD©a16
[2] + (((
ušt32
)pData16[3])<<16);

700 
c
 +ğ
pD©a16
[4] + (((
ušt32
)pData16[5])<<16);

701 
	`__mix
(
a
,
b
,
c
);

702 
_Ën
 -= 12;

703 
pD©a16
 += 6;

707 
pD©a8
 = (cÚ¡ 
ušt8
 *)
pD©a16
;

708 
_Ën
)

710 12: 
c
+=
pD©a16
[4]+(((
ušt32
)pData16[5])<<16);

711 
b
+=
pD©a16
[2]+(((
ušt32
)pData16[3])<<16);

712 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

714 11: 
c
+=((
ušt32
)
pD©a8
[10])<<16;

715 10: 
c
+=
pD©a16
[4];

716 
b
+=
pD©a16
[2]+(((
ušt32
)pData16[3])<<16);

717 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

719 9 : 
c
+=
pD©a8
[8];

720 8 : 
b
+=
pD©a16
[2]+(((
ušt32
)pData16[3])<<16);

721 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

723 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<16;

724 6 : 
b
+=
pD©a16
[2];

725 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

727 5 : 
b
+=
pD©a8
[4];

728 4 : 
a
+=
pD©a16
[0]+(((
ušt32
)pData16[1])<<16);

730 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<16;

731 2 : 
a
+=
pD©a16
[0];

733 1 : 
a
+=
pD©a8
[0];

735 0 : *
_£ed1
=
c
; *
_£ed2
=
b
; ;

741 cÚ¡ 
ušt8
 *
pD©a8
 = (cÚ¡ ušt8 *)
_d©a
;

744 
_Ën
 > 12)

746 
a
 +ğ
pD©a8
[0];

747 
a
 +ğ((
ušt32
)
pD©a8
[1])<<8;

748 
a
 +ğ((
ušt32
)
pD©a8
[2])<<16;

749 
a
 +ğ((
ušt32
)
pD©a8
[3])<<24;

750 
b
 +ğ
pD©a8
[4];

751 
b
 +ğ((
ušt32
)
pD©a8
[5])<<8;

752 
b
 +ğ((
ušt32
)
pD©a8
[6])<<16;

753 
b
 +ğ((
ušt32
)
pD©a8
[7])<<24;

754 
c
 +ğ
pD©a8
[8];

755 
c
 +ğ((
ušt32
)
pD©a8
[9])<<8;

756 
c
 +ğ((
ušt32
)
pD©a8
[10])<<16;

757 
c
 +ğ((
ušt32
)
pD©a8
[11])<<24;

758 
	`__mix
(
a
,
b
,
c
);

759 
_Ën
 -= 12;

760 
pD©a8
 += 12;

764 
_Ën
)

766 12: 
c
+=((
ušt32
)
pD©a8
[11])<<24;

767 11: 
c
+=((
ušt32
)
pD©a8
[10])<<16;

768 10: 
c
+=((
ušt32
)
pD©a8
[9])<<8;

769 9 : 
c
+=
pD©a8
[8];

770 8 : 
b
+=((
ušt32
)
pD©a8
[7])<<24;

771 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<16;

772 6 : 
b
+=((
ušt32
)
pD©a8
[5])<<8;

773 5 : 
b
+=
pD©a8
[4];

774 4 : 
a
+=((
ušt32
)
pD©a8
[3])<<24;

775 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<16;

776 2 : 
a
+=((
ušt32
)
pD©a8
[1])<<8;

777 1 : 
a
+=
pD©a8
[0];

779 0 : *
_£ed1
=
c
; *
_£ed2
=
b
; ;

783 
	`__fš®
(
a
,
b
,
c
);

784 *
_£ed1
=
c
; *
_£ed2
=
b
;

785 
	}
}

795 
ušt32
 
	$hashbig
ĞcÚ¡ * 
_d©a
, 
ušt32
 
_Ën
, ušt32 
_£ed
 )

797 
ušt32
 
a
,
b
,
c
;

798 uniÚ { cÚ¡ *
±r
; 
size_t
 
i
; } 
u
;

801 
a
 = 
b
 = 
c
 = 0xd—db“à+ ((
ušt32
)
_Ën
è+ 
_£ed
;

803 
u
.
±r
 = 
_d©a
;

804 ià(
__HASH_BIG_ENDIAN
 && ((
u
.
i
 & 0x3) == 0))

806 cÚ¡ 
ušt32
* 
pD©a32
 = (cÚ¡ ušt32 *)
_d©a
;

809 
_Ën
 > 12)

811 
a
 +ğ
pD©a32
[0];

812 
b
 +ğ
pD©a32
[1];

813 
c
 +ğ
pD©a32
[2];

814 
	`__mix
(
a
,
b
,
c
);

815 
_Ën
 -= 12;

816 
pD©a32
 += 3;

829 #iâdeà
VALGRIND


831 
_Ën
)

833 12: 
c
+=
pD©a32
[2]; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

834 11: 
c
+=
pD©a32
[2]&0xffffff00; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

835 10: 
c
+=
pD©a32
[2]&0xffff0000; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

836 9 : 
c
+=
pD©a32
[2]&0xff000000; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

837 8 : 
b
+=
pD©a32
[1]; 
a
+=pData32[0]; ;

838 7 : 
b
+=
pD©a32
[1]&0xffffff00; 
a
+=pData32[0]; ;

839 6 : 
b
+=
pD©a32
[1]&0xffff0000; 
a
+=pData32[0]; ;

840 5 : 
b
+=
pD©a32
[1]&0xff000000; 
a
+=pData32[0]; ;

841 4 : 
a
+=
pD©a32
[0]; ;

842 3 : 
a
+=
pD©a32
[0]&0xffffff00; ;

843 2 : 
a
+=
pD©a32
[0]&0xffff0000; ;

844 1 : 
a
+=
pD©a32
[0]&0xff000000; ;

845 0 :  
c
;

850 cÚ¡ 
ušt8
* 
pD©a8
 = (cÚ¡ ušt8 *)
pD©a32
;

851 
_Ën
)

853 12: 
c
+=
pD©a32
[2]; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

854 11: 
c
+=((
ušt32
)
pD©a8
[10])<<8;

855 10: 
c
+=((
ušt32
)
pD©a8
[9])<<16;

856 9 : 
c
+=((
ušt32
)
pD©a8
[8])<<24;

857 8 : 
b
+=
pD©a32
[1]; 
a
+=pData32[0]; ;

858 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<8;

859 6 : 
b
+=((
ušt32
)
pD©a8
[5])<<16;

860 5 : 
b
+=((
ušt32
)
pD©a8
[4])<<24;

861 4 : 
a
+=
pD©a32
[0]; ;

862 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<8;

863 2 : 
a
+=((
ušt32
)
pD©a8
[1])<<16;

864 1 : 
a
+=((
ušt32
)
pD©a8
[0])<<24; ;

865 0 :  
c
;

873 cÚ¡ 
ušt8
 *
pD©a8
 = (cÚ¡ ušt8 *)
_d©a
;

876 
_Ën
 > 12)

878 
a
 +ğ((
ušt32
)
pD©a8
[0])<<24;

879 
a
 +ğ((
ušt32
)
pD©a8
[1])<<16;

880 
a
 +ğ((
ušt32
)
pD©a8
[2])<<8;

881 
a
 +ğ((
ušt32
)
pD©a8
[3]);

882 
b
 +ğ((
ušt32
)
pD©a8
[4])<<24;

883 
b
 +ğ((
ušt32
)
pD©a8
[5])<<16;

884 
b
 +ğ((
ušt32
)
pD©a8
[6])<<8;

885 
b
 +ğ((
ušt32
)
pD©a8
[7]);

886 
c
 +ğ((
ušt32
)
pD©a8
[8])<<24;

887 
c
 +ğ((
ušt32
)
pD©a8
[9])<<16;

888 
c
 +ğ((
ušt32
)
pD©a8
[10])<<8;

889 
c
 +ğ((
ušt32
)
pD©a8
[11]);

890 
	`__mix
(
a
,
b
,
c
);

891 
_Ën
 -= 12;

892 
pD©a8
 += 12;

896 
_Ën
)

898 12: 
c
+=
pD©a8
[11];

899 11: 
c
+=((
ušt32
)
pD©a8
[10])<<8;

900 10: 
c
+=((
ušt32
)
pD©a8
[9])<<16;

901 9 : 
c
+=((
ušt32
)
pD©a8
[8])<<24;

902 8 : 
b
+=
pD©a8
[7];

903 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<8;

904 6 : 
b
+=((
ušt32
)
pD©a8
[5])<<16;

905 5 : 
b
+=((
ušt32
)
pD©a8
[4])<<24;

906 4 : 
a
+=
pD©a8
[3];

907 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<8;

908 2 : 
a
+=((
ušt32
)
pD©a8
[1])<<16;

909 1 : 
a
+=((
ušt32
)
pD©a8
[0])<<24;

911 0 :  
c
;

915 
	`__fš®
(
a
,
b
,
c
);

916  
c
;

917 
	}
}

936 
	$hashbig2
ĞcÚ¡ * 
_d©a
, 
ušt32
 
_Ën
, ušt32* 
_£ed1
, ušt32* 
_£ed2
 )

938 
ušt32
 
a
,
b
,
c
;

939 uniÚ { cÚ¡ *
±r
; 
size_t
 
i
; } 
u
;

942 
a
 = 
b
 = 
c
 = 0xd—db“à+ ((
ušt32
)
_Ën
è+ *
_£ed1
;

943 
c
 +ğ*
_£ed2
;

945 
u
.
±r
 = 
_d©a
;

946 ià(
__HASH_BIG_ENDIAN
 && ((
u
.
i
 & 0x3) == 0))

948 cÚ¡ 
ušt32
* 
pD©a32
 = (cÚ¡ ušt32 *)
_d©a
;

951 
_Ën
 > 12)

953 
a
 +ğ
pD©a32
[0];

954 
b
 +ğ
pD©a32
[1];

955 
c
 +ğ
pD©a32
[2];

956 
	`__mix
(
a
,
b
,
c
);

957 
_Ën
 -= 12;

958 
pD©a32
 += 3;

971 #iâdeà
VALGRIND


973 
_Ën
)

975 12: 
c
+=
pD©a32
[2]; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

976 11: 
c
+=
pD©a32
[2]&0xffffff00; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

977 10: 
c
+=
pD©a32
[2]&0xffff0000; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

978 9 : 
c
+=
pD©a32
[2]&0xff000000; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

979 8 : 
b
+=
pD©a32
[1]; 
a
+=pData32[0]; ;

980 7 : 
b
+=
pD©a32
[1]&0xffffff00; 
a
+=pData32[0]; ;

981 6 : 
b
+=
pD©a32
[1]&0xffff0000; 
a
+=pData32[0]; ;

982 5 : 
b
+=
pD©a32
[1]&0xff000000; 
a
+=pData32[0]; ;

983 4 : 
a
+=
pD©a32
[0]; ;

984 3 : 
a
+=
pD©a32
[0]&0xffffff00; ;

985 2 : 
a
+=
pD©a32
[0]&0xffff0000; ;

986 1 : 
a
+=
pD©a32
[0]&0xff000000; ;

987 0 : *
_£ed1
=
c
; *
_£ed2
=
b
; ;

992 cÚ¡ 
ušt8
* 
pD©a8
 = (cÚ¡ ušt8 *)
pD©a32
;

993 
_Ën
)

995 12: 
c
+=
pD©a32
[2]; 
b
+õD©a32[1]; 
a
+=pData32[0]; ;

996 11: 
c
+=((
ušt32
)
pD©a8
[10])<<8;

997 10: 
c
+=((
ušt32
)
pD©a8
[9])<<16;

998 9 : 
c
+=((
ušt32
)
pD©a8
[8])<<24;

999 8 : 
b
+=
pD©a32
[1]; 
a
+=pData32[0]; ;

1000 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<8;

1001 6 : 
b
+=((
ušt32
)
pD©a8
[5])<<16;

1002 5 : 
b
+=((
ušt32
)
pD©a8
[4])<<24;

1003 4 : 
a
+=
pD©a32
[0]; ;

1004 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<8;

1005 2 : 
a
+=((
ušt32
)
pD©a8
[1])<<16;

1006 1 : 
a
+=((
ušt32
)
pD©a8
[0])<<24; ;

1007 0 : *
_£ed1
=
c
; *
_£ed2
=
b
; ;

1015 cÚ¡ 
ušt8
 *
pD©a8
 = (cÚ¡ ušt8 *)
_d©a
;

1018 
_Ën
 > 12)

1020 
a
 +ğ((
ušt32
)
pD©a8
[0])<<24;

1021 
a
 +ğ((
ušt32
)
pD©a8
[1])<<16;

1022 
a
 +ğ((
ušt32
)
pD©a8
[2])<<8;

1023 
a
 +ğ((
ušt32
)
pD©a8
[3]);

1024 
b
 +ğ((
ušt32
)
pD©a8
[4])<<24;

1025 
b
 +ğ((
ušt32
)
pD©a8
[5])<<16;

1026 
b
 +ğ((
ušt32
)
pD©a8
[6])<<8;

1027 
b
 +ğ((
ušt32
)
pD©a8
[7]);

1028 
c
 +ğ((
ušt32
)
pD©a8
[8])<<24;

1029 
c
 +ğ((
ušt32
)
pD©a8
[9])<<16;

1030 
c
 +ğ((
ušt32
)
pD©a8
[10])<<8;

1031 
c
 +ğ((
ušt32
)
pD©a8
[11]);

1032 
	`__mix
(
a
,
b
,
c
);

1033 
_Ën
 -= 12;

1034 
pD©a8
 += 12;

1038 
_Ën
)

1040 12: 
c
+=
pD©a8
[11];

1041 11: 
c
+=((
ušt32
)
pD©a8
[10])<<8;

1042 10: 
c
+=((
ušt32
)
pD©a8
[9])<<16;

1043 9 : 
c
+=((
ušt32
)
pD©a8
[8])<<24;

1044 8 : 
b
+=
pD©a8
[7];

1045 7 : 
b
+=((
ušt32
)
pD©a8
[6])<<8;

1046 6 : 
b
+=((
ušt32
)
pD©a8
[5])<<16;

1047 5 : 
b
+=((
ušt32
)
pD©a8
[4])<<24;

1048 4 : 
a
+=
pD©a8
[3];

1049 3 : 
a
+=((
ušt32
)
pD©a8
[2])<<8;

1050 2 : 
a
+=((
ušt32
)
pD©a8
[1])<<16;

1051 1 : 
a
+=((
ušt32
)
pD©a8
[0])<<24;

1053 0 : *
_£ed1
=
c
; *
_£ed2
=
b
; ;

1057 
	`__fš®
(
a
,
b
,
c
);

1058 *
_£ed1
=
c
; *
_£ed2
=
b
;

1059 
	}
}

1066 #ifdeà
__g‘_ušt16


1067 #undeà
__g‘_ušt16


1070 
	#__g‘_ušt16
(
d
è(*((cÚ¡ 
ušt16
 *è(d)))

	)

1075 
ušt32
 
	$hash·ul
ĞcÚ¡ 
ušt8
* 
_d©a
, 
ušt32
 
_Ën
 )

1077 
ušt32
 
hash
 = 
_Ën
, 
tmp
;

1078 
št32
 
»m
;

1080 ià(
_Ën
 <ğ0 || 
_d©a
 =ğ
NULL
)  0;

1082 
»m
 = 
_Ën
 & 3;

1083 
_Ën
 >>= 2;

1086  ; 
_Ën
 > 0; --_len )

1088 
hash
 +ğ
	`__g‘_ušt16
(
_d©a
);

1089 
tmp
 = (
	`__g‘_ušt16
(
_d©a
+2è<< 11è^ 
hash
;

1090 
hash
 = (hash << 16è^ 
tmp
;

1091 
_d©a
 +ğ2*(
ušt16
);

1092 
hash
 += hash >> 11;

1096 
»m
)

1098 3: 
hash
 +ğ
	`__g‘_ušt16
(
_d©a
);

1099 
hash
 ^= hash << 16;

1100 
hash
 ^ğ
_d©a
[(
ušt16
)] << 18;

1101 
hash
 += hash >> 11;

1103 2: 
hash
 +ğ
	`__g‘_ušt16
(
_d©a
);

1104 
hash
 ^= hash << 11;

1105 
hash
 += hash >> 17;

1107 1: 
hash
 +ğ*
_d©a
;

1108 
hash
 ^= hash << 10;

1109 
hash
 += hash >> 1;

1113 
hash
 ^= hash << 3;

1114 
hash
 += hash >> 5;

1115 
hash
 ^= hash << 4;

1116 
hash
 += hash >> 17;

1117 
hash
 ^= hash << 25;

1118 
hash
 += hash >> 6;

1120  
hash
;

1121 
	}
}

1129 #undeà
__mix


1130 #undeà
__rÙ


1131 #undeà
__fš®


1132 #undeà
__g‘_ušt16


	@algo\hash.h

9 #iâdeà
HASH_H_1277694838


10 
	#HASH_H_1277694838


	)

17 
	~"CRC.h
"

23 
	#EX_HASH_PAUL
 0x01

	)

24 
	#EX_HASH_BOB2
 0x02

	)

25 
	#EX_HASH_BOB3
 0x03

	)

26 
	#EX_HASH_CRC
 0x04

	)

29 
	#EX_HASH_METHOD
 
EX_HASH_BOB3


	)

30 
	#EX_HASH_SEED
 0xFF

	)

65 
ušt32
 
hashbob2
ĞcÚ¡ 
ušt8
* 
_d©a
, ušt32 
_Ën
, ušt32 
_£ed
 );

75 
ušt32
 
hashwÜd
 ( cÚ¡ ušt32* 
_d©a
, ušt32 
_Ën
, ušt32 
_£ed
 );

76 
hashwÜd2
 ( cÚ¡ 
ušt32
* 
_d©a
, ušt32 
_Ën
, ušt32* 
_£ed1
, ušt32* 
_£ed2
 );

82 
ušt32
 
hashl™e
 ( cÚ¡ * 
_d©a
, ušt32 
_Ën
, ušt32 
_£ed
 );

83 
hashl™e2
 ( cÚ¡ * 
_d©a
, 
ušt32
 
_Ën
, ušt32* 
_£ed1
, ušt32* 
_£ed2
 );

89 
ušt32
 
hashbig
 ( cÚ¡ * 
_d©a
, ušt32 
_Ën
, ušt32 
_£ed
 );

90 
hashbig2
 ( cÚ¡ * 
_d©a
, 
ušt32
 
_Ën
, ušt32* 
_£ed1
, ušt32* 
_£ed2
 );

97 
šlše
 
ušt32
 
	$hashbob3
ĞcÚ¡ 
ušt32
* 
_d©a
, ušt32 
_Ën
, ušt32 
_£ed
 ) {  
	`hashwÜd
Ğ_d©a, _Ën, _£ed ); 
	}
}

100 
šlše
 
ušt32
 
	$hashbob3_±r
ĞcÚ¡ * 
_d©a
, 
ušt32
 
_Ën
, ušt32 
_£ed
 )

102 #ià(
EX_ENDIAN
 =ğ
EX_LITTLE_ENDIAN
)

103  
	`hashl™e
Ğ
_d©a
, 
_Ën
, 
_£ed
 );

105  
	`hashbig
Ğ
_d©a
, 
_Ën
, 
_£ed
 );

107 
	}
}

114 
šlše
 
	$hashbob3_2
ĞcÚ¡ 
ušt32
* 
_d©a
, ušt32 
_Ën
, ušt32* 
_£ed1
, ušt32* 
_£ed2
 ) { 
	`hashwÜd2
Ğ_d©a, _Ën, _£ed1, _£ed2 ); 
	}
}

117 
šlše
 
	$hashbob3_±r2
 ( cÚ¡ 
ušt32
* 
_d©a
, ušt32 
_Ën
, ušt32* 
_£ed1
, ušt32* 
_£ed2
 )

119 #ià(
EX_ENDIAN
 =ğ
EX_LITTLE_ENDIAN
)

120 
	`hashl™e2
Ğ
_d©a
, 
_Ën
, 
_£ed1
, 
_£ed2
 );

122 
	`hashbig2
Ğ
_d©a
, 
_Ën
, 
_£ed1
, 
_£ed2
 );

124 
	}
}

134 
ušt32
 
hash·ul
 ( cÚ¡ 
ušt8
* 
_d©a
, ušt32 
_Ën
 );

141 
šlše
 
ušt32
 
	$hashüc
 ( 
_ücSize
, cÚ¡ 
ušt8
* 
_d©a
, 
ušt32
 
_Ën
 )

143  
	`ÿlcCRC
 ( 
_ücSize
, 
_d©a
, 
_Ën
 );

144 
	}
}

147 
šlše
 
ušt32
 
	$hashüc_¡r
 ( 
_ücSize
, cÚ¡ * 
_¡r
 )

149  
	`ÿlcCRC_¡r
 ( 
_ücSize
, 
_¡r
 );

150 
	}
}

160 
	#EX_HASH_METHOD
 
EX_HASH_BOB3


	)

167 
šlše
 
ušt32
 
	$_hash¡r
 ( cÚ¡ * 
_¡r
, 
ušt32
 
_by‹s
 )

169 #ià(
EX_HASH_METHOD
 =ğ
EX_HASH_PAUL
)

170  
	`hash·ul
Ğ(
ušt8
*)
_¡r
, 
_by‹s
 );

171 #–ià(
EX_HASH_METHOD
 =ğ
EX_HASH_BOB2
)

172  
	`hashbob2
Ğ(
ušt8
*)
_¡r
, 
_by‹s
, 
EX_HASH_SEED
 );

173 #–ià(
EX_HASH_METHOD
 =ğ
EX_HASH_BOB3
)

174  
	`hashbob3
Ğ(*)
_¡r
, 
_by‹s
, 
EX_HASH_SEED
 );

175 #–ià(
EX_HASH_METHOD
 =ğ
EX_HASH_CRC
)

176  
	`hashüc_¡r
Ğ32, 
_¡r
 );

178 
	}
}

185 
šlše
 
ušt32
 
	$hash¡r
ĞcÚ¡ * 
_¡r
 ) {  
	`_hash¡r
 ( _¡r, 
	`¡¾’
(_¡rè); 
	}
}

188 
šlše
 
ušt32
 
	$hash¡r_w
ĞcÚ¡ 
wch¬_t
* 
_¡r
 ) {  
	`_hash¡r
Ğ_¡r, 
	`wc¦’
(_¡rè* 2 ); 
	}
}

194 
šlše
 
ušt32
 
	$_hashu£
Ğ
_m‘hod
, cÚ¡ * 
_¡r
, 
ušt32
 
_by‹s
 ) {

195  
_m‘hod
 ) {

196 
EX_HASH_PAUL
:

197  
	`hash·ul
Ğ(
ušt8
*)
_¡r
, 
_by‹s
 );

199 
EX_HASH_BOB2
:

200  
	`hashbob2
Ğ(
ušt8
*)
_¡r
, 
_by‹s
, 
EX_HASH_SEED
 );

202 
EX_HASH_BOB3
:

203  
	`hashbob3
Ğ(*)
_¡r
, 
_by‹s
, 
EX_HASH_SEED
 );

205 
EX_HASH_CRC
:

206  
	`hashüc
 ( 32, (
ušt8
*)
_¡r
, 
_by‹s
 );

209 
	`ex_as£¹
Ğ
çl£
, "hash method‚ot found!" );

212 
	}
}

219 
šlše
 
ušt32
 
	$hashu£
Ğ
_m‘hod
, cÚ¡ * 
_¡r
 )

221  
	`_hashu£
Ğ
_m‘hod
, 
_¡r
, 
	`¡¾’
(_str) );

222 
	}
}

225 
šlše
 
ušt32
 
	$hashu£_w
Ğ
_m‘hod
, cÚ¡ 
wch¬_t
* 
_¡r
 )

227  
	`_hashu£
Ğ
_m‘hod
, 
_¡r
, 
	`wc¦’
(_str) * 2 );

228 
	}
}

	@container\array.c

12 
	~"exsdk.h
"

13 
	~"¬¿y.h
"

24 
¬¿y_t
* 
	$¬¿y_®loc
 ( 
size_t
 
_–em’t_by‹s
, size_ˆ
_couÁ
 )

26 
size_t
 
by‹s
 = 
_–em’t_by‹s
 * 
_couÁ
;

28 
¬¿y_t
* 
¬¿y
 = 
	`ex_m®loc
 ( (array_t) );

31 
¬¿y
->
_–em’t_by‹s
 = _element_bytes;

32 
¬¿y
->
_Ëngth
 = 0;

33 
¬¿y
->
_ÿ·c™y
 = 
_couÁ
;

36 
¬¿y
->
_d©a
 = 
	`ex_m®loc
Ğ
by‹s
 );

37 
	`memz”o
 ( 
¬¿y
->
_d©a
, 
by‹s
 );

40  
¬¿y
;

41 
	}
}

44 
¬¿y_t
* 
	$¬¿y_®loc_nomng
 ( 
size_t
 
_–em’t_by‹s
, size_ˆ
_couÁ
 )

46 
size_t
 
by‹s
 = 
_–em’t_by‹s
 * 
_couÁ
;

48 
¬¿y_t
* 
¬¿y
 = 
	`ex_m®loc_nomng
 ( (array_t) );

51 
¬¿y
->
_–em’t_by‹s
 = _element_bytes;

52 
¬¿y
->
_Ëngth
 = 0;

53 
¬¿y
->
_ÿ·c™y
 = 
_couÁ
;

56 
¬¿y
->
_d©a
 = 
	`ex_m®loc_nomng
Ğ
by‹s
 );

57 
	`memz”o
 ( 
¬¿y
->
_d©a
, 
by‹s
 );

60  
¬¿y
;

61 
	}
}

68 
	$¬¿y_ä“
 ( 
¬¿y_t
* 
_¬¿y
 )

70 
	`ex_ä“
(
_¬¿y
->
_d©a
);

71 
	`ex_ä“
(
_¬¿y
);

72 
	}
}

75 
	$¬¿y_ä“_nomng
 ( 
¬¿y_t
* 
_¬¿y
 )

77 
	`ex_ä“_nomng
(
_¬¿y
->
_d©a
);

78 
	`ex_ä“_nomng
(
_¬¿y
);

79 
	}
}

85 * 
	$¬¿y_g‘
 ( 
¬¿y_t
* 
_¬¿y
, 
size_t
 
_idx
 )

87 
	`ex_as£¹_»tuº
Ğ
_idx
 >ğ0 && _idx < ()
_¬¿y
->
_Ëngth
, 
NULL
, "error: _idx out of„ange" );

88  (*)(
_¬¿y
->
_d©a
è+ 
_idx
 * _¬¿y->
_–em’t_by‹s
;

89 
	}
}

96 * 
	$¬¿y_push_back
 ( 
¬¿y_t
* 
_¬¿y
, * 
_v®ue
 )

98 * 
v®_addr
;

100 iàĞ
_¬¿y
->
_Ëngth
 >ğ_¬¿y->
_ÿ·c™y
 ) {

101 
_¬¿y
->
_ÿ·c™y
 *= 2;

102 
_¬¿y
->
_d©a
 = 
	`ex_»®loc
 ( _¬¿y->_d©a, _¬¿y->
_ÿ·c™y
 * _¬¿y->
_–em’t_by‹s
 );

106 
v®_addr
 = (*)(
_¬¿y
->
_d©a
è+ _¬¿y->
_Ëngth
 * _¬¿y->
_–em’t_by‹s
;

109 iàĞ
_v®ue
 )

110 
	`memıy
 ( 
v®_addr
, 
_v®ue
, 
_¬¿y
->
_–em’t_by‹s
 );

112 ++
_¬¿y
->
_Ëngth
;

113  
v®_addr
;

114 
	}
}

117 * 
	$¬¿y_push_back_nomng
 ( 
¬¿y_t
* 
_¬¿y
, * 
_v®ue
 )

119 * 
v®_addr
;

121 iàĞ
_¬¿y
->
_Ëngth
 >ğ_¬¿y->
_ÿ·c™y
 ) {

122 
_¬¿y
->
_ÿ·c™y
 *= 2;

123 
_¬¿y
->
_d©a
 = 
	`ex_»®loc_nomng
 ( _¬¿y->_d©a, _¬¿y->
_ÿ·c™y
 * _¬¿y->
_–em’t_by‹s
 );

127 
v®_addr
 = (*)(
_¬¿y
->
_d©a
è+ _¬¿y->
_Ëngth
 * _¬¿y->
_–em’t_by‹s
;

130 iàĞ
_v®ue
 )

131 
	`memıy
 ( 
v®_addr
, 
_v®ue
, 
_¬¿y
->
_–em’t_by‹s
 );

133 ++
_¬¿y
->
_Ëngth
;

134  
v®_addr
;

135 
	}
}

	@container\array.h

9 #iâdeà
ARRAY_H_1278479457


10 
	#ARRAY_H_1278479457


	)

21 
	s¬¿y_t
 {

22 * 
	m_d©a
;

23 
size_t
 
	m_–em’t_by‹s
;

24 
size_t
 
	m_Ëngth
;

25 
size_t
 
	m_ÿ·c™y
;

26 } 
	t¬¿y_t
;

32 
¬¿y_t
* 
¬¿y_®loc
 ( 
size_t
 
_–em’t_by‹s
, size_ˆ
_couÁ
 );

33 
¬¿y_t
* 
¬¿y_®loc_nomng
 ( 
size_t
 
_–em’t_by‹s
, size_ˆ
_couÁ
 );

39 
¬¿y_ä“
 ( 
¬¿y_t
* 
_¬¿y
 );

40 
¬¿y_ä“_nomng
 ( 
¬¿y_t
* 
_¬¿y
 );

46 * 
¬¿y_g‘
 ( 
¬¿y_t
* 
_¬¿y
, 
size_t
 
_idx
 );

52 * 
¬¿y_push_back
 ( 
¬¿y_t
* 
_¬¿y
, * 
_v®ue
 );

53 * 
¬¿y_push_back_nomng
 ( 
¬¿y_t
* 
_¬¿y
, * 
_v®ue
 );

55 
šlše
 * 
	$¬¿y_push_back_št8
 ( 
¬¿y_t
* 
_¬¿y
, 
št8
 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

56 
šlše
 * 
	$¬¿y_push_back_št16
 ( 
¬¿y_t
* 
_¬¿y
, 
št16
 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

57 
šlše
 * 
	$¬¿y_push_back_št32
 ( 
¬¿y_t
* 
_¬¿y
, 
št32
 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

58 
šlše
 * 
	$¬¿y_push_back_št64
 ( 
¬¿y_t
* 
_¬¿y
, 
št64
 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

60 
šlše
 * 
	$¬¿y_push_back_ušt8
 ( 
¬¿y_t
* 
_¬¿y
, 
ušt8
 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

61 
šlše
 * 
	$¬¿y_push_back_ušt16
 ( 
¬¿y_t
* 
_¬¿y
, 
ušt16
 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

62 
šlše
 * 
	$¬¿y_push_back_ušt32
 ( 
¬¿y_t
* 
_¬¿y
, 
ušt32
 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

63 
šlše
 * 
	$¬¿y_push_back_ušt64
 ( 
¬¿y_t
* 
_¬¿y
, 
ušt64
 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

65 
šlše
 * 
	$¬¿y_push_back_æßt
 ( 
¬¿y_t
* 
_¬¿y
, 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

66 
šlše
 * 
	$¬¿y_push_back_doubË
 ( 
¬¿y_t
* 
_¬¿y
, 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

68 
šlše
 * 
	$¬¿y_push_back_¡ršg
 ( 
¬¿y_t
* 
_¬¿y
, * 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

69 
šlše
 * 
	$¬¿y_push_back_w¡ršg
 ( 
¬¿y_t
* 
_¬¿y
, 
wch¬_t
* 
_v®ue
 ) {  
	`¬¿y_push_back
 ( _¬¿y, &_v®u); 
	}
}

75 
šlše
 
size_t
 
	$¬¿y_Ën
 ( 
¬¿y_t
* 
_¬¿y
 ) {  _¬¿y->
_Ëngth
; 
	}
}

	@container\bitarray.c

12 
	~"exsdk.h
"

13 
	~"b™¬¿y.h
"

24 
b™¬¿y_t
* 
	$b™¬¿y_®loc
 ( 
size_t
 
_b™couÁ
 )

26 
b™¬¿y_t
* 
b™A¼ay
 = 
	`ex_m®loc
 ( (bitarray_t) );

27 
size_t
 
by‹s
 = (
_b™couÁ
 + 7)/8;

29 
b™A¼ay
->
_d©a
 = 
	`ex_m®loc
(
by‹s
);

30 
	`memz”o
 ( 
b™A¼ay
->
_d©a
, 
by‹s
 );

32 
b™A¼ay
->
_Ëngth
 = 
_b™couÁ
;

34  
b™A¼ay
;

35 
	}
}

38 
b™¬¿y_t
* 
	$b™¬¿y_®loc_nomng
 ( 
size_t
 
_b™couÁ
 )

40 
b™¬¿y_t
* 
b™A¼ay
 = 
	`ex_m®loc_nomng
 ( (bitarray_t) );

41 
size_t
 
by‹s
 = (
_b™couÁ
 + 7)/8;

43 
b™A¼ay
->
_d©a
 = 
	`ex_m®loc_nomng
(
by‹s
);

44 
b™A¼ay
->
_Ëngth
 = 
_b™couÁ
;

45 
	`memz”o
 ( 
b™A¼ay
->
_d©a
, 
by‹s
 );

47  
b™A¼ay
;

48 
	}
}

55 
	$b™¬¿y_ä“
 ( 
b™¬¿y_t
* 
_b™¬¿y
 )

57 
	`ex_ä“
(
_b™¬¿y
->
_d©a
);

59 
_b™¬¿y
->
_Ëngth
 = 0;

60 
	`ex_ä“
(
_b™¬¿y
);

61 
	}
}

64 
	$b™¬¿y_ä“_nomng
 ( 
b™¬¿y_t
* 
_b™¬¿y
 )

66 
	`ex_ä“_nomng
(
_b™¬¿y
->
_d©a
);

68 
_b™¬¿y
->
_Ëngth
 = 0;

69 
	`ex_ä“_nomng
(
_b™¬¿y
);

70 
	}
}

76 
	$b™¬¿y_g‘
 ( 
b™¬¿y_t
* 
_b™¬¿y
, 
size_t
 
_idx
 )

78 * 
±r
;

80 
	`ex_as£¹_»tuº
 ( 
_idx
 >ğ0 && _idx < 
_b™¬¿y
->
_Ëngth
, -1, "_idx is out of„ange" );

81 
±r
 = 
_b™¬¿y
->
_d©a
 + 
_idx
 / 8;

82  ( *
±r
 & (1 << (
_idx
 % 8) ) ) != 0;

83 
	}
}

89 
	$b™¬¿y_£t
 ( 
b™¬¿y_t
* 
_b™¬¿y
, 
size_t
 
_idx
, 
_v®ue
 )

91 * 
±r
;

93 
	`ex_as£¹_»tuº
 ( 
_idx
 >ğ0 && _idx < 
_b™¬¿y
->
_Ëngth
, , "_idx is out of„ange." );

94 
	`ex_as£¹_»tuº
 ( 
_v®ue
 == 0 || _value == 1, , "invalid input value, should be 0 or 1." );

96 
±r
 = 
_b™¬¿y
->
_d©a
 + 
_idx
 / 8;

97 iàĞ
_v®ue
 )

98 *
±r
 |ğ1 << ( 
_idx
 % 8 );

100 *
±r
 &ğ~(1 << (
_idx
 % 8));

101 
	}
}

108 
	$b™¬¿y_»size
 ( 
b™¬¿y_t
* 
_b™¬¿y
, 
size_t
 
_b™couÁ
 )

110 
size_t
 
Şd_by‹s
, 
Ãw_by‹s
;

112 iàĞ
_b™¬¿y
->
_Ëngth
 =ğ
_b™couÁ
 )

115 
Şd_by‹s
 = (
_b™¬¿y
->
_Ëngth
 + 7)/8;

116 
Ãw_by‹s
 = (
_b™couÁ
 + 7)/8;

118 
_b™¬¿y
->
_d©a
 = 
	`ex_»®loc
(_b™¬¿y->_d©a, 
Ãw_by‹s
);

120 iàĞ
Ãw_by‹s
 > 
Şd_by‹s
 )

121 
	`memz”o
 ( 
_b™¬¿y
->
_d©a
 + 
Şd_by‹s
, 
Ãw_by‹s
 - old_bytes );

122 
_b™¬¿y
->
_Ëngth
 = 
_b™couÁ
;

123 
	}
}

126 
	$b™¬¿y_»size_nomng
 ( 
b™¬¿y_t
* 
_b™¬¿y
, 
size_t
 
_b™couÁ
 )

128 
size_t
 
Şd_by‹s
, 
Ãw_by‹s
;

130 iàĞ
_b™¬¿y
->
_Ëngth
 =ğ
_b™couÁ
 )

133 
Şd_by‹s
 = (
_b™¬¿y
->
_Ëngth
 + 7)/8;

134 
Ãw_by‹s
 = (
_b™couÁ
 + 7)/8;

136 
_b™¬¿y
->
_d©a
 = 
	`ex_»®loc_nomng
(_b™¬¿y->_d©a, 
Ãw_by‹s
);

138 iàĞ
Ãw_by‹s
 > 
Şd_by‹s
 )

139 
	`memz”o
 ( 
_b™¬¿y
->
_d©a
 + 
Şd_by‹s
, 
Ãw_by‹s
 - old_bytes );

140 
_b™¬¿y
->
_Ëngth
 = 
_b™couÁ
;

141 
	}
}

	@container\bitarray.h

9 #iâdeà
BITARRAY_H_1277534167


10 
	#BITARRAY_H_1277534167


	)

24 
	sb™¬¿y_t
 {

26 
size_t
 
	m_Ëngth
;

27 * 
	m_d©a
;

28 } 
	tb™¬¿y_t
;

34 
b™¬¿y_t
* 
b™¬¿y_®loc
 ( 
size_t
 
_b™couÁ
 );

35 
b™¬¿y_t
* 
b™¬¿y_®loc_nomng
 ( 
size_t
 
_b™couÁ
 );

41 
b™¬¿y_ä“
 ( 
b™¬¿y_t
* 
_b™¬¿y
 );

42 
b™¬¿y_ä“_nomng
 ( 
b™¬¿y_t
* 
_b™¬¿y
 );

48 
b™¬¿y_g‘
 ( 
b™¬¿y_t
* 
_b™¬¿y
, 
size_t
 
_idx
 );

54 
b™¬¿y_£t
 ( 
b™¬¿y_t
* 
_b™¬¿y
, 
size_t
 
_idx
, 
_v®ue
 );

60 
b™¬¿y_»size
 ( 
b™¬¿y_t
* 
_b™¬¿y
, 
size_t
 
_b™couÁ
 );

61 
b™¬¿y_»size_nomng
 ( 
b™¬¿y_t
* 
_b™¬¿y
, 
size_t
 
_b™couÁ
 );

67 
šlše
 
size_t
 
	$b™¬¿y_Ën
 ( 
b™¬¿y_t
* 
_b™¬¿y
 ) {  _b™¬¿y->
_Ëngth
; 
	}
}

	@container\hashmap.c

12 
	~"exsdk.h
"

13 
	~"hashm­.h
"

14 
	~"../®go/b™.h
"

15 
	~"../m©h/m©hİ.h
"

21 
šlše
 
ušt32
 
	$_hash_šdex
 ( 
hashm­_t
* 
_hashm­
, * 
_key
 ) {

22  
_hashm­
->
	`_hashkey
(
_key
è& ( _hashm­->
_hashsize
 - 1 );

23 
	}
}

25 
šlše
 
hashm­_node_t
* 
	$_g‘node
 ( 
hashm­_t
* 
_hashm­
, 
size_t
 
_idx
 ) {

26  (
hashm­_node_t
*)
	`poŞ_g‘
(
_hashm­
->
_nodes
,
_idx
);

27 
	}
}

29 
šlše
 * 
	$_g‘key
 ( 
hashm­_t
* 
_hashm­
, 
size_t
 
_idx
 ) {

30  (*)
_hashm­
->
_keys
 + 
_idx
 * _hashm­->
_key_by‹s
;

31 
	}
}

33 
šlše
 * 
	$_g‘v®ue
 ( 
hashm­_t
* 
_hashm­
, 
size_t
 
_idx
 ) {

34  (*)
_hashm­
->
_v®ues
 + 
_idx
 * _hashm­->
_v®ue_by‹s
;

35 
	}
}

46 
hashm­_t
* 
	$hashm­_®loc
 ( 
size_t
 
_key_by‹s
,

47 
size_t
 
_v®ue_by‹s
,

48 
size_t
 
_couÁ
,

49 
hashkey_t
 
_hashkey
,

50 
keycmp_t
 
_keycmp
 )

52 
hashm­_t
* 
hashm­
 = 
	`ex_m®loc
( (hashmap_t) );

53 
size_t
 
i
 = 0;

56 
	`ex_as£¹_exec
Ğ
	`is_pow_of_2
(
_couÁ
),

57 
_couÁ
 = 
	`ûpow2u
(_count),

61 
hashm­
->
_ÿ·c™y
 = 
_couÁ
;

62 
hashm­
->
_hashsize
 = 
_couÁ
;

63 
hashm­
->
_key_by‹s
 = _key_bytes;

64 
hashm­
->
_v®ue_by‹s
 = _value_bytes;

65 
hashm­
->
_hashkey
 = _hashkey;

66 
hashm­
->
_keycmp
 = _keycmp;

69 
hashm­
->
_v®ues
 = 
	`ex_m®loc
 ( 
_couÁ
 * 
_v®ue_by‹s
 );

70 
	`memz”o
 ( 
hashm­
->
_v®ues
, 
_couÁ
 * 
_v®ue_by‹s
 );

73 
hashm­
->
_keys
 = 
	`ex_m®loc
 ( 
_couÁ
 * 
_key_by‹s
 );

74 
	`memz”o
 ( 
hashm­
->
_keys
, 
_couÁ
 * 
_key_by‹s
 );

77 
hashm­
->
_šdiûs
 = 
	`ex_m®loc
 ( 
_couÁ
 * (
size_t
) );

78 
	`mem£t
 ( 
hashm­
->
_šdiûs
, -1, 
_couÁ
 * (
size_t
) );

81 
hashm­
->
_nodes
 = 
	`poŞ_®loc
 ( (
hashm­_node_t
), 
_couÁ
 );

84  
hashm­
;

85 
	}
}

88 
hashm­_t
* 
	$hashm­_®loc_nomng
 ( 
size_t
 
_key_by‹s
, size_ˆ
_v®ue_by‹s
, size_ˆ
_couÁ
, 
hashkey_t
 
_hashkey
, 
keycmp_t
 
_keycmp
 )

90 
hashm­_t
* 
hashm­
 = 
	`ex_m®loc_nomng
( (hashmap_t) );

91 
size_t
 
i
 = 0;

94 
	`ex_as£¹_exec
Ğ
	`is_pow_of_2
(
_couÁ
),

95 
_couÁ
 = 
	`ûpow2u
(_count),

99 
hashm­
->
_ÿ·c™y
 = 
_couÁ
;

100 
hashm­
->
_hashsize
 = 
_couÁ
;

101 
hashm­
->
_key_by‹s
 = _key_bytes;

102 
hashm­
->
_v®ue_by‹s
 = _value_bytes;

103 
hashm­
->
_hashkey
 = _hashkey;

104 
hashm­
->
_keycmp
 = _keycmp;

107 
hashm­
->
_v®ues
 = 
	`ex_m®loc_nomng
 ( 
_couÁ
 * 
_v®ue_by‹s
 );

108 
	`memz”o
 ( 
hashm­
->
_v®ues
, 
_couÁ
 * 
_v®ue_by‹s
 );

111 
hashm­
->
_keys
 = 
	`ex_m®loc_nomng
 ( 
_couÁ
 * 
_key_by‹s
 );

112 
	`memz”o
 ( 
hashm­
->
_keys
, 
_couÁ
 * 
_key_by‹s
 );

115 
hashm­
->
_šdiûs
 = 
	`ex_m®loc_nomng
 ( 
_couÁ
 * (
size_t
) );

116 
	`mem£t
 ( 
hashm­
->
_šdiûs
, -1, 
_couÁ
 * (
size_t
) );

119 
hashm­
->
_nodes
 = 
	`poŞ_®loc_nomng
 ( (
hashm­_node_t
), 
_couÁ
 );

122  
hashm­
;

123 
	}
}

130 
	$hashm­_ä“
 ( 
hashm­_t
* 
_hashm­
 )

132 
	`ex_ä“
 (
_hashm­
->
_v®ues
);

133 
	`ex_ä“
 (
_hashm­
->
_keys
);

134 
	`ex_ä“
 (
_hashm­
->
_šdiûs
);

135 
	`poŞ_ä“
(
_hashm­
->
_nodes
);

137 
_hashm­
->
_ÿ·c™y
 = 0;

138 
_hashm­
->
_hashsize
 = 0;

139 
_hashm­
->
_v®ue_by‹s
 = 0;

140 
_hashm­
->
_hashkey
 = 
NULL
;

141 
_hashm­
->
_keycmp
 = 
NULL
;

142 
	`ex_ä“
(
_hashm­
);

143 
	}
}

146 
	$hashm­_ä“_nomng
 ( 
hashm­_t
* 
_hashm­
 )

148 
	`ex_ä“_nomng
 (
_hashm­
->
_v®ues
);

149 
	`ex_ä“_nomng
 (
_hashm­
->
_keys
);

150 
	`ex_ä“_nomng
 (
_hashm­
->
_šdiûs
);

151 
	`poŞ_ä“_nomng
(
_hashm­
->
_nodes
);

153 
_hashm­
->
_ÿ·c™y
 = 0;

154 
_hashm­
->
_hashsize
 = 0;

155 
_hashm­
->
_v®ue_by‹s
 = 0;

156 
_hashm­
->
_hashkey
 = 
NULL
;

157 
_hashm­
->
_keycmp
 = 
NULL
;

158 
	`ex_ä“_nomng
(
_hashm­
);

159 
	}
}

166 
boŞ
 
	$hashm­_š£¹
 ( 
hashm­_t
* 
_hashm­
, * 
_key
, * 
_v®
, 
size_t
* 
_šdex
 )

168 
size_t
 
hash_Ãxt
;

169 
ušt32
 
hash_idx
 = 
	`_hash_šdex
 ( 
_hashm­
, 
_key
 );

172  
hash_Ãxt
 = 
_hashm­
->
_šdiûs
[
hash_idx
]; hash_Ãxˆ!ğ-1; hash_Ãxˆğ
	`_g‘node
(_hashm­,hash_Ãxt)->
Ãxt
 )

175 iàĞ
_hashm­
->
	`_keycmp
(
_key
, 
	`_g‘key
Ğ_hashm­, 
hash_Ãxt
 ) ) == 0 ) {

176 iàĞ
_šdex
 ) *_šdex = 
hash_Ãxt
;

177  
çl£
;

183 
size_t
 
cur_idx
, 
Ãxt_idx
;

184 
hashm­_node_t
* 
node
;

186 
cur_idx
 = 
	`poŞ_š£¹
 ( 
_hashm­
->
_nodes
, 
NULL
 );

187 iàĞ
cur_idx
 > 
_hashm­
->
_ÿ·c™y
-1 ) {

188 
_hashm­
->
_ÿ·c™y
 *= 2;

189 
_hashm­
->
_v®ues
 = 
	`ex_»®loc
 ( _hashm­->_v®ues, _hashm­->
_ÿ·c™y
 * _hashm­->
_v®ue_by‹s
 );

190 
_hashm­
->
_keys
 = 
	`ex_»®loc
 ( _hashm­->_keys, _hashm­->
_ÿ·c™y
 * _hashm­->
_key_by‹s
 );

193 
Ãxt_idx
 = 
_hashm­
->
_šdiûs
[
hash_idx
];

195 
node
 = (
hashm­_node_t
*)
	`poŞ_g‘
Ğ
_hashm­
->
_nodes
, 
cur_idx
 );

196 
node
->
Ãxt
 = 
Ãxt_idx
;

197 
node
->
´ev
 = -1;

198 
_hashm­
->
_šdiûs
[
hash_idx
] = 
cur_idx
;

201 iàĞ
Ãxt_idx
 != -1 )

202 
	`_g‘node
(
_hashm­
,
Ãxt_idx
)->
´ev
 = 
cur_idx
;

205 
	`memıy
 ( (*)
_hashm­
->
_keys
 + 
cur_idx
 * _hashm­->
_key_by‹s
, 
_key
, _hashmap->_key_bytes );

206 
	`memıy
 ( (*)
_hashm­
->
_v®ues
 + 
cur_idx
 * _hashm­->
_v®ue_by‹s
, 
_v®
, _hashmap->_value_bytes );

208 iàĞ
_šdex
 ) *_šdex = 
cur_idx
;

209  
Œue
;

211 
	}
}

214 
boŞ
 
	$hashm­_š£¹_nomng
 ( 
hashm­_t
* 
_hashm­
, * 
_key
, * 
_v®
, 
size_t
* 
_šdex
 )

216 
size_t
 
hash_Ãxt
;

217 
ušt32
 
hash_idx
 = 
	`_hash_šdex
 ( 
_hashm­
, 
_key
 );

220  
hash_Ãxt
 = 
_hashm­
->
_šdiûs
[
hash_idx
]; hash_Ãxˆ!ğ-1; hash_Ãxˆğ
	`_g‘node
(_hashm­,hash_Ãxt)->
Ãxt
 )

223 iàĞ
_hashm­
->
	`_keycmp
(
_key
, 
	`_g‘key
Ğ_hashm­, 
hash_Ãxt
 ) ) == 0 ) {

224 iàĞ
_šdex
 ) *_šdex = 
hash_Ãxt
;

225  
çl£
;

231 
size_t
 
cur_idx
, 
Ãxt_idx
;

232 
hashm­_node_t
* 
node
;

234 
cur_idx
 = 
	`poŞ_š£¹_nomng
 ( 
_hashm­
->
_nodes
, 
NULL
 );

235 iàĞ
cur_idx
 > 
_hashm­
->
_ÿ·c™y
-1 ) {

236 
_hashm­
->
_ÿ·c™y
 *= 2;

237 
_hashm­
->
_v®ues
 = 
	`ex_»®loc_nomng
 ( _hashm­->_v®ues, _hashm­->
_ÿ·c™y
 * _hashm­->
_v®ue_by‹s
 );

238 
_hashm­
->
_keys
 = 
	`ex_»®loc_nomng
 ( _hashm­->_keys, _hashm­->
_ÿ·c™y
 * _hashm­->
_key_by‹s
 );

241 
Ãxt_idx
 = 
_hashm­
->
_šdiûs
[
hash_idx
];

243 
node
 = (
hashm­_node_t
*)
	`poŞ_g‘
Ğ
_hashm­
->
_nodes
, 
cur_idx
 );

244 
node
->
Ãxt
 = 
Ãxt_idx
;

245 
node
->
´ev
 = -1;

246 
_hashm­
->
_šdiûs
[
hash_idx
] = 
cur_idx
;

249 iàĞ
Ãxt_idx
 != -1 )

250 
	`_g‘node
(
_hashm­
,
Ãxt_idx
)->
´ev
 = 
cur_idx
;

253 
	`memıy
 ( (*)
_hashm­
->
_keys
 + 
cur_idx
 * _hashm­->
_key_by‹s
, 
_key
, _hashmap->_key_bytes );

254 
	`memıy
 ( (*)
_hashm­
->
_v®ues
 + 
cur_idx
 * _hashm­->
_v®ue_by‹s
, 
_v®
, _hashmap->_value_bytes );

256 iàĞ
_šdex
 ) *_šdex = 
cur_idx
;

257  
Œue
;

259 
	}
}

265 * 
	$hashm­_g‘
 ( 
hashm­_t
* 
_hashm­
, * 
_key
 )

267 
size_t
 
hash_Ãxt
;

268 
ušt32
 
hash_idx
 = 
	`_hash_šdex
 ( 
_hashm­
, 
_key
 );

271  
hash_Ãxt
 = 
_hashm­
->
_šdiûs
[
hash_idx
]; hash_Ãxˆ!ğ-1; hash_Ãxˆğ
	`_g‘node
(_hashm­,hash_Ãxt)->
Ãxt
 )

274 iàĞ
_hashm­
->
	`_keycmp
(
_key
, 
	`_g‘key
Ğ_hashm­, 
hash_Ãxt
 ) ) == 0 ) {

275  
	`_g‘v®ue
(
_hashm­
, 
hash_Ãxt
);

279  
NULL
;

280 
	}
}

286 * 
	$hashm­_”a£
 ( 
hashm­_t
* 
_hashm­
, * 
_key
 )

288 
size_t
 
hash_Ãxt
;

289 
ušt32
 
hash_idx
 = 
	`_hash_šdex
 ( 
_hashm­
, 
_key
 );

290 
size_t
 
´ev_idx
, 
Ãxt_idx
;

291 
hashm­_node_t
* 
node
;

294  
hash_Ãxt
 = 
_hashm­
->
_šdiûs
[
hash_idx
]; hash_Ãxˆ!ğ-1; hash_Ãxˆğ
	`_g‘node
(_hashm­,hash_Ãxt)->
Ãxt
 )

297 iàĞ
_hashm­
->
	`_keycmp
(
_key
, 
	`_g‘key
Ğ_hashm­, 
hash_Ãxt
 ) ) == 0 ) {

302 iàĞ
hash_Ãxt
 == -1 ) {

303 
	`ex_w¬nšg
 ( "the key is‚ot found!" );

304 
NULL
;

308 
´ev_idx
 = 
	`_g‘node
(
_hashm­
,
hash_Ãxt
)->
´ev
;

309 
Ãxt_idx
 = 
	`_g‘node
(
_hashm­
,
hash_Ãxt
)->
Ãxt
;

312 iàĞ
Ãxt_idx
 != -1 ) {

313 
	`_g‘node
 (
_hashm­
,
Ãxt_idx
)->
´ev
 = 
´ev_idx
;

317 iàĞ
´ev_idx
 == -1 )

318 
_hashm­
->
_šdiûs
[
hash_idx
] = 
Ãxt_idx
;

321 
	`_g‘node
(
_hashm­
,
´ev_idx
)->
Ãxt
 = 
Ãxt_idx
;

324 
node
 = 
	`poŞ_”a£
 ( 
_hashm­
->
_nodes
, 
hash_Ãxt
 );

325 
node
->
Ãxt
 = -1;

326 
node
->
´ev
 = -1;

327  
	`_g‘v®ue
 ( 
_hashm­
, 
hash_Ãxt
 );

328 
	}
}

	@container\hashmap.h

9 #iâdeà
HASHMAP_H_1277683404


10 
	#HASHMAP_H_1277683404


	)

17 
	~"poŞ.h
"

18 
	~"../®go/hash.h
"

32 
	#hashm­_—ch
Ğ
_ty³
, 
_–
, 
_hashm­
 ) \

34 
poŞ_node_t
* 
node
 = (
_hashm­
)->
_nodes
->
_u£d_nodes_begš
; \

35 
poŞ_node_t
* 
node_begš
 = (
_hashm­
)->
_nodes
->_nodes; \

36 
_ty³
 
_–
; \

37  
node
 ) { \

38 
_–
 = *Ğ(
_ty³
*èĞ(*)(
_hashm­
)->
_v®ues
 + (
node
 - 
node_begš
è* (_hashm­)->
_v®ue_by‹s
 ) );

	)

40 
	#hashm­_—ch_’d
 \

41 
node
 =‚ode->
Ãxt
; \

43 }

	)

56 
	$ušt32
 (*
	thashkey_t
) (*);

57 (*
	tkeycmp_t
) (*,*);

60 
	shashm­_node_t
 {

61 
size_t
 
´ev
;

62 
size_t
 
Ãxt
;

63 } 
	thashm­_node_t
;

66 
	shashm­_t
 {

68 
size_t
 
_ÿ·c™y
;

71 
size_t
 
_hashsize
;

72 * 
_v®ues
;

73 
size_t
 
_v®ue_by‹s
;

74 * 
_keys
;

75 
size_t
 
_key_by‹s
;

76 
size_t
* 
_šdiûs
;

77 
poŞ_t
* 
_nodes
;

78 
hashkey_t
 
_hashkey
;

79 
keycmp_t
 
_keycmp
;

80 } 
	thashm­_t
;

86 
hashm­_t
* 
	`hashm­_®loc
 ( 
size_t
 
_key_by‹s
, size_ˆ
_v®ue_by‹s
, size_ˆ
_couÁ
, 
hashkey_t
 
_hashkey
, 
keycmp_t
 
_keycmp
 );

87 
hashm­_t
* 
	`hashm­_®loc_nomng
 ( 
size_t
 
_key_by‹s
, size_ˆ
_v®ue_by‹s
, size_ˆ
_couÁ
, 
hashkey_t
 
_hashkey
, 
keycmp_t
 
_keycmp
 );

93 
	`hashm­_ä“
 ( 
hashm­_t
* 
_hashm­
 );

94 
	`hashm­_ä“_nomng
 ( 
hashm­_t
* 
_hashm­
 );

101 
boŞ
 
	`hashm­_š£¹
 ( 
hashm­_t
* 
_hashm­
, * 
_key
, * 
_v®
, 
size_t
* 
_šdex
 );

102 
boŞ
 
	`hashm­_š£¹_nomng
 ( 
hashm­_t
* 
_hashm­
, * 
_key
, * 
_v®
, 
size_t
* 
_šdex
 );

110 * 
	`hashm­_g‘
 ( 
hashm­_t
* 
_hashm­
, * 
_key
 );

116 * 
	`hashm­_”a£
 ( 
hashm­_t
* 
_hashm­
, * 
_key
 );

122 
šlše
 
size_t
 
	$hashm­_Ën
 ( 
hashm­_t
* 
_hashm­
 ) {  
	`poŞ_Ën
(_hashm­->
_nodes
); 
	}
}

123 
šlše
 
size_t
 
	$hashm­_ÿ·c™y
 ( 
hashm­_t
* 
_hashm­
 ) {  _hashm­->
_ÿ·c™y
; 
	}
}

133 
šlše
 
ušt32
 
	$hashkey_¡ršg
 ( * 
_v®
 ) {  
	`hash¡r
Ğ*((**)_v®è); 
	}
}

134 
šlše
 
ušt32
 
	$hashkey_w¡ršg
 ( * 
_v®
 ) {  
	`hash¡r_w
Ğ*((
wch¬_t
**)_v®è); 
	}
}

135 
šlše
 
ušt32
 
	$hashkey_ušt32
 ( * 
_v®
 ) {  *((
ušt32
*)_v®); 
	}
}

136 
šlše
 
ušt32
 
	$hashkey_±r
 ( * 
_v®
 ) {  (
ušt32
)((
size_t
)(*(**)_v®è>> 4); 
	}
}

142 
šlše
 
	$keycmp_¡ršg
 ( * 
_lhs
, * 
_rhs
 ) {  
	`¡rcmp
 ( *((**)_lhs), *((**)_rhsè); 
	}
}

143 
šlše
 
	$keycmp_w¡ršg
 ( * 
_lhs
, * 
_rhs
 ) {  
	`wcscmp
 ( *((
wch¬_t
**)_lhs), *((wch¬_t**)_rhsè); 
	}
}

144 
šlše
 
	$keycmp_ušt32
 ( * 
_lhs
, * 
_rhs
 ) {  *((
ušt32
*)_lhsè- *((ušt32*)_rhs); 
	}
}

145 
šlše
 
	$keycmp_±r
 ( * 
_lhs
, * 
_rhs
 ) {  (
size_t
)*((**)_lhsè- (size_t)*((**)_rhs); 
	}
}

	@container\list.c

12 
	~"exsdk.h
"

13 
	~"li¡.h
"

20 
šlše
 
li¡_node_t
* 
	$_®loc_node
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 ) {

23 
li¡_node_t
* 
node
 = (li¡_node_t*)
	`ex_m®loc
 ( 
_li¡
->
_–em’t_by‹s
 + (list_node_t) );

24 
node
->
v®ue
 = (*êod+ (
li¡_node_t
);

25 
	`memıy
 ( 
node
->
v®ue
, 
_v®ue
, 
_li¡
->
_–em’t_by‹s
 );

26 
node
->
Ãxt
 = 
NULL
;

27 
node
->
´ev
 = 
NULL
;

28  
node
;

29 
	}
}

32 
šlše
 
li¡_node_t
* 
	$_®loc_node_nomng
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 ) {

35 
li¡_node_t
* 
node
 = (li¡_node_t*)
	`ex_m®loc_nomng
 ( 
_li¡
->
_–em’t_by‹s
 + (list_node_t) );

36 
node
->
v®ue
 = (*êod+ (
li¡_node_t
);

37 
	`memıy
 ( 
node
->
v®ue
, 
_v®ue
, 
_li¡
->
_–em’t_by‹s
 );

38 
node
->
Ãxt
 = 
NULL
;

39 
node
->
´ev
 = 
NULL
;

40  
node
;

41 
	}
}

52 
li¡_t
* 
	$li¡_®loc
 ( 
size_t
 
_–em’t_by‹s
 )

54 
li¡_t
* 
li¡
 = 
	`ex_m®loc
( (list_t) );

57 
li¡
->
_Ëngth
 = 0;

58 
li¡
->
_–em’t_by‹s
 = _element_bytes;

59 
li¡
->
_h—d
 = 
NULL
;

60 
li¡
->
_
 = 
NULL
;

62  
li¡
;

63 
	}
}

66 
li¡_t
* 
	$li¡_®loc_nomng
 ( 
size_t
 
_–em’t_by‹s
 )

68 
li¡_t
* 
li¡
 = 
	`ex_m®loc_nomng
( (list_t) );

71 
li¡
->
_Ëngth
 = 0;

72 
li¡
->
_–em’t_by‹s
 = _element_bytes;

73 
li¡
->
_h—d
 = 
NULL
;

74 
li¡
->
_
 = 
NULL
;

76  
li¡
;

77 
	}
}

84 
	$li¡_ä“
 ( 
li¡_t
* 
_li¡
 )

86 
li¡_node_t
* 
node
 = 
_li¡
->
_h—d
;

88  
node
 !ğ
NULL
 ) {

89 
	`ex_ä“
 ( 
node
 );

90 
node
 =‚ode->
Ãxt
;

93 
_li¡
->
_Ëngth
 = 0;

94 
_li¡
->
_–em’t_by‹s
 = 0;

95 
_li¡
->
_h—d
 = 
NULL
;

96 
_li¡
->
_
 = 
NULL
;

97 
	`ex_ä“
(
_li¡
);

98 
	}
}

101 
	$li¡_ä“_nomng
 ( 
li¡_t
* 
_li¡
 )

103 
li¡_node_t
* 
node
 = 
_li¡
->
_h—d
;

105  
node
 !ğ
NULL
 ) {

106 
	`ex_ä“_nomng
 ( 
node
 );

107 
node
 =‚ode->
Ãxt
;

110 
_li¡
->
_Ëngth
 = 0;

111 
_li¡
->
_–em’t_by‹s
 = 0;

112 
_li¡
->
_h—d
 = 
NULL
;

113 
_li¡
->
_
 = 
NULL
;

114 
	`ex_ä“_nomng
(
_li¡
);

115 
	}
}

122 
	$li¡_push_back
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 )

124 
li¡_node_t
* 
node
 = 
NULL
;

127 
node
 = 
	`_®loc_node
 ( 
_li¡
, 
_v®ue
 );

130 iàĞ
_li¡
->
_h—d
 =ğ
NULL
 ) {

131 
_li¡
->
_h—d
 = 
node
;

132 
_li¡
->
_
 = 
node
;

135 
_li¡
->
_
->
Ãxt
 = 
node
;

136 
node
->
´ev
 = 
_li¡
->
_
;

137 
_li¡
->
_
 = 
node
;

141 ++
_li¡
->
_Ëngth
;

142 
	}
}

145 
	$li¡_push_back_nomng
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 )

147 
li¡_node_t
* 
node
 = 
NULL
;

150 
node
 = 
	`_®loc_node_nomng
 ( 
_li¡
, 
_v®ue
 );

153 iàĞ
_li¡
->
_h—d
 =ğ
NULL
 ) {

154 
_li¡
->
_h—d
 = 
node
;

155 
_li¡
->
_
 = 
node
;

158 
_li¡
->
_
->
Ãxt
 = 
node
;

159 
node
->
´ev
 = 
_li¡
->
_
;

160 
_li¡
->
_
 = 
node
;

164 ++
_li¡
->
_Ëngth
;

165 
	}
}

172 
	$li¡_push_äÚt
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 )

174 
li¡_node_t
* 
node
 = 
NULL
;

177 
node
 = 
	`_®loc_node
 ( 
_li¡
, 
_v®ue
 );

180 iàĞ
_li¡
->
_h—d
 =ğ
NULL
 ) {

181 
_li¡
->
_h—d
 = 
node
;

182 
_li¡
->
_
 = 
node
;

185 
_li¡
->
_h—d
->
´ev
 = 
node
;

186 
node
->
Ãxt
 = 
_li¡
->
_h—d
;

187 
_li¡
->
_h—d
 = 
node
;

191 ++
_li¡
->
_Ëngth
;

192 
	}
}

195 
	$li¡_push_äÚt_nomng
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 )

197 
li¡_node_t
* 
node
 = 
NULL
;

200 
node
 = 
	`_®loc_node_nomng
 ( 
_li¡
, 
_v®ue
 );

203 iàĞ
_li¡
->
_h—d
 =ğ
NULL
 ) {

204 
_li¡
->
_h—d
 = 
node
;

205 
_li¡
->
_
 = 
node
;

208 
_li¡
->
_h—d
->
´ev
 = 
node
;

209 
node
->
Ãxt
 = 
_li¡
->
_h—d
;

210 
_li¡
->
_h—d
 = 
node
;

214 ++
_li¡
->
_Ëngth
;

215 
	}
}

222 
	$li¡_š£¹_back
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
, * 
_v®ue
 )

224 
li¡_node_t
* 
node
 = 
NULL
;

226 
	`ex_as£¹_»tuº
 ( 
_©
 !ğ
NULL
, , "the insert…osition can't be NULL!" );

228 
	`ex_as£¹_»tuº
 ( 
_©
 >ğ
_li¡
->
_h—d
 && _© <ğ_li¡->
_
, , "the insert…osition is out of„ange!" );

232 
node
 = 
	`_®loc_node
 ( 
_li¡
, 
_v®ue
 );

235 
node
->
Ãxt
 = 
_©
->next;

236 
node
->
´ev
 = 
_©
;

240 iàĞ
_©
 =ğ
_li¡
->
_
 )

241 
_li¡
->
_
 = 
node
;

243 
_©
->
Ãxt
->
´ev
 = 
node
;

245 ++
_li¡
->
_Ëngth
;

246 
	}
}

249 
	$li¡_š£¹_back_nomng
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
, * 
_v®ue
 )

251 
li¡_node_t
* 
node
 = 
NULL
;

253 
	`ex_as£¹_»tuº
 ( 
_©
 !ğ
NULL
, , "the insert…osition can't be NULL!" );

255 
	`ex_as£¹_»tuº
 ( 
_©
 >ğ
_li¡
->
_h—d
 && _© <ğ_li¡->
_
, , "the insert…osition is out of„ange!" );

259 
node
 = 
	`_®loc_node_nomng
 ( 
_li¡
, 
_v®ue
 );

262 
node
->
Ãxt
 = 
_©
->next;

263 
node
->
´ev
 = 
_©
;

267 iàĞ
_©
 =ğ
_li¡
->
_
 )

268 
_li¡
->
_
 = 
node
;

270 
_©
->
Ãxt
->
´ev
 = 
node
;

272 ++
_li¡
->
_Ëngth
;

273 
	}
}

280 
	$li¡_š£¹_äÚt
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
, * 
_v®ue
 )

282 
li¡_node_t
* 
node
 = 
NULL
;

284 
	`ex_as£¹_»tuº
 ( 
_©
 !ğ
NULL
, , "the insert…osition can't be NULL!" );

286 
	`ex_as£¹_»tuº
 ( 
_©
 >ğ
_li¡
->
_h—d
 && _© <ğ_li¡->
_
, , "the insert…osition is out of„ange!" );

290 
node
 = 
	`_®loc_node
 ( 
_li¡
, 
_v®ue
 );

293 
node
->
Ãxt
 = 
_©
;

294 
node
->
´ev
 = 
_©
->prev;

298 iàĞ
_©
 =ğ
_li¡
->
_h—d
 )

299 
_li¡
->
_h—d
 = 
node
;

301 
_©
->
´ev
->
Ãxt
 = 
node
;

303 ++
_li¡
->
_Ëngth
;

304 
	}
}

307 
	$li¡_š£¹_äÚt_nomng
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
, * 
_v®ue
 )

309 
li¡_node_t
* 
node
 = 
NULL
;

311 
	`ex_as£¹_»tuº
 ( 
_©
 !ğ
NULL
, , "the insert…osition can't be NULL!" );

313 
	`ex_as£¹_»tuº
 ( 
_©
 >ğ
_li¡
->
_h—d
 && _© <ğ_li¡->
_
, , "the insert…osition is out of„ange!" );

317 
node
 = 
	`_®loc_node_nomng
 ( 
_li¡
, 
_v®ue
 );

320 
node
->
Ãxt
 = 
_©
;

321 
node
->
´ev
 = 
_©
->prev;

325 iàĞ
_©
 =ğ
_li¡
->
_h—d
 )

326 
_li¡
->
_h—d
 = 
node
;

328 
_©
->
´ev
->
Ãxt
 = 
node
;

330 ++
_li¡
->
_Ëngth
;

331 
	}
}

338 
li¡_node_t
* 
	$li¡_”a£
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
 )

340 
li¡_node_t
* 
Ãxt_node
;

342 
	`ex_as£¹_»tuº
 ( 
_©
 !ğ
NULL
, NULL, "the insert…osition can't be NULL!" );

344 
	`ex_as£¹_»tuº
 ( 
_©
 >ğ
_li¡
->
_h—d
 && _© <ğ_li¡->
_
, 
NULL
, "the insert…osition is out of„ange!" );

347 
Ãxt_node
 = 
_©
->
Ãxt
;

350 iàĞ
_li¡
->
_h—d
 =ğ_li¡->
_
 ) {

351 
	`ex_as£¹_»tuº
 ( 
_©
 =ğ
_li¡
->
_h—d
, 
NULL
, "invalid input‚ode." );

352 
_li¡
->
_h—d
 = _li¡->
_
 = 
NULL
;

354 iàĞ
_©
 =ğ
_li¡
->
_h—d
 ) {

355 
_li¡
->
_h—d
 = _li¡->_h—d->
Ãxt
;

356 
_li¡
->
_h—d
->
´ev
 = 
NULL
;

358 iàĞ
_©
 =ğ
_li¡
->
_
 ) {

359 
_li¡
->
_
 = _li¡->_->
´ev
;

360 
_li¡
->
_
->
Ãxt
 = 
NULL
;

363 
_©
->
´ev
->
Ãxt
 = _at->next;

364 
_©
->
Ãxt
->
´ev
 = _at->prev;

367 
	`ex_ä“
 (
_©
);

368 --
_li¡
->
_Ëngth
;

370  
Ãxt_node
;

371 
	}
}

374 
li¡_node_t
* 
	$li¡_”a£_nomng
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
 )

376 
li¡_node_t
* 
Ãxt_node
;

378 
	`ex_as£¹_»tuº
 ( 
_©
 !ğ
NULL
, NULL, "the insert…osition can't be NULL!" );

380 
	`ex_as£¹_»tuº
 ( 
_©
 >ğ
_li¡
->
_h—d
 && _© <ğ_li¡->
_
, 
NULL
, "the insert…osition is out of„ange!" );

383 
Ãxt_node
 = 
_©
->
Ãxt
;

386 iàĞ
_li¡
->
_h—d
 =ğ_li¡->
_
 ) {

387 
	`ex_as£¹_»tuº
 ( 
_©
 =ğ
_li¡
->
_h—d
, 
NULL
, "invalid input‚ode." );

388 
_li¡
->
_h—d
 = _li¡->
_
 = 
NULL
;

390 iàĞ
_©
 =ğ
_li¡
->
_h—d
 ) {

391 
_li¡
->
_h—d
 = _li¡->_h—d->
Ãxt
;

392 
_li¡
->
_h—d
->
´ev
 = 
NULL
;

394 iàĞ
_©
 =ğ
_li¡
->
_
 ) {

395 
_li¡
->
_
 = _li¡->_->
´ev
;

396 
_li¡
->
_
->
Ãxt
 = 
NULL
;

399 
_©
->
´ev
->
Ãxt
 = _at->next;

400 
_©
->
Ãxt
->
´ev
 = _at->prev;

403 
	`ex_ä“_nomng
 (
_©
);

404 --
_li¡
->
_Ëngth
;

406  
Ãxt_node
;

407 
	}
}

	@container\list.h

9 #iâdeà
LIST_H_1277805267


10 
	#LIST_H_1277805267


	)

20 
	sli¡_node_t
 {

21 * 
	mv®ue
;

22 
li¡_node_t
* 
	m´ev
;

23 
li¡_node_t
* 
	mÃxt
;

24 } 
	tli¡_node_t
;

27 
	sli¡_t
 {

29 
size_t
 
	m_Ëngth
;

30 
size_t
 
	m_–em’t_by‹s
;

31 
li¡_node_t
* 
	m_h—d
;

32 
li¡_node_t
* 
	m_
;

33 } 
	tli¡_t
;

39 
li¡_t
* 
li¡_®loc
 ( 
size_t
 
_–em’t_by‹s
 );

40 
li¡_t
* 
li¡_®loc_nomng
 ( 
size_t
 
_–em’t_by‹s
 );

46 
li¡_ä“
 ( 
li¡_t
* 
_li¡
 );

47 
li¡_ä“_nomng
 ( 
li¡_t
* 
_li¡
 );

53 
li¡_push_back
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 );

54 
li¡_push_back_nomng
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 );

56 
li¡_push_äÚt
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 );

57 
li¡_push_äÚt_nomng
 ( 
li¡_t
* 
_li¡
, * 
_v®ue
 );

63 
li¡_š£¹_back
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
, * 
_v®ue
 );

64 
li¡_š£¹_back_nomng
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
, * 
_v®ue
 );

66 
li¡_š£¹_äÚt
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
, * 
_v®ue
 );

67 
li¡_š£¹_äÚt_nomng
 ( 
li¡_t
* 
_li¡
, 
li¡_node_t
* 
_©
, * 
_v®ue
 );

73 
li¡_node_t
* 
li¡_”a£
 ( 
li¡_t
* 
_li¡
,†i¡_node_t* 
_©
 );

74 
li¡_node_t
* 
li¡_”a£_nomng
 ( 
li¡_t
* 
_li¡
,†i¡_node_t* 
_©
 );

80 
šlše
 
size_t
 
	$li¡_Ën
 ( 
li¡_t
* 
_li¡
 ) {  _li¡->
_Ëngth
; 
	}
}

81 
šlše
 
li¡_node_t
* 
	$li¡_h—d
 ( 
li¡_t
* 
_li¡
 ) {  _li¡->
_h—d
; 
	}
}

82 
šlše
 
li¡_node_t
* 
	$li¡_
 ( 
li¡_t
* 
_li¡
 ) {  _li¡->
_
; 
	}
}

	@container\pool.c

12 
	~"exsdk.h
"

13 
	~"poŞ.h
"

19 
poŞ_node_t
* 
_»que¡_ä“_node
Ğ
poŞ_t
* );

20 
poŞ_node_t
* 
_»que¡_ä“_node_nomng
Ğ
poŞ_t
* );

21 
_push_to_u£d
 ( 
poŞ_t
*, 
poŞ_node_t
* );

22 
_push_to_u£d_»v”£
 ( 
poŞ_t
*, 
poŞ_node_t
* );

23 
_push_to_ä“
 ( 
poŞ_t
*, 
poŞ_node_t
* );

34 
poŞ_t
* 
	$poŞ_®loc
 ( 
size_t
 
_–em’t_by‹s
, size_ˆ
_couÁ
 )

36 
poŞ_t
* 
poŞ
 = 
	`ex_m®loc
 ( (pool_t) );

37 
size
 = 
_–em’t_by‹s
 * 
_couÁ
;

38 
size_t
 
i
 = 1;

41 
poŞ
->
_Ëngth
 = 0;

42 
poŞ
->
_ÿ·c™y
 = 
_couÁ
;

43 
poŞ
->
_–em’t_by‹s
 = _element_bytes;

46 
poŞ
->
_d©a
 = 
	`ex_m®loc
Ğ
size
 );

47 
	`memz”o
 ( 
poŞ
->
_d©a
, 
size
 );

50 
poŞ
->
_nodes
 = 
	`ex_m®loc
Ğ(
poŞ_node_t
è* 
_couÁ
 );

51 
poŞ
->
_u£d_nodes_begš
 = 
NULL
;

52 
poŞ
->
_u£d_nodes_’d
 = 
NULL
;

53 
poŞ
->
_ä“_nodes
 =…oŞ->
_nodes
 + (
_couÁ
-1);

54 
poŞ
->
_u£d_b™s
 = 
	`b™¬¿y_®loc
Ğ
_couÁ
 );

57 
poŞ
->
_ä“_nodes
->
´ev
 = 
NULL
;

58 
poŞ
->
_ä“_nodes
->
Ãxt
 =…ool->_free_nodes-1;

59 --
poŞ
->
_ä“_nodes
;

62  
i
 < 
_couÁ
 ) {

63 
poŞ
->
_ä“_nodes
->
´ev
 =…ool->_free_nodes+1;

65 iàĞ
i
 =ğ
_couÁ
 - 1 ) {

66 
poŞ
->
_ä“_nodes
->
Ãxt
 = 
NULL
;

69 
poŞ
->
_ä“_nodes
->
Ãxt
 =…ool->_free_nodes-1;

70 --
poŞ
->
_ä“_nodes
;

72 ++
i
;

75  
poŞ
;

76 
	}
}

79 
poŞ_t
* 
	$poŞ_®loc_nomng
 ( 
size_t
 
_–em’t_by‹s
, size_ˆ
_couÁ
 )

81 
poŞ_t
* 
poŞ
 = 
	`ex_m®loc_nomng
 ( (pool_t) );

82 
size
 = 
_–em’t_by‹s
 * 
_couÁ
;

83 
size_t
 
i
 = 1;

86 
poŞ
->
_Ëngth
 = 0;

87 
poŞ
->
_ÿ·c™y
 = 
_couÁ
;

88 
poŞ
->
_–em’t_by‹s
 = _element_bytes;

91 
poŞ
->
_d©a
 = 
	`ex_m®loc_nomng
Ğ
size
 );

92 
	`memz”o
 ( 
poŞ
->
_d©a
, 
size
 );

95 
poŞ
->
_nodes
 = 
	`ex_m®loc_nomng
Ğ(
poŞ_node_t
è* 
_couÁ
 );

96 
poŞ
->
_u£d_nodes_begš
 = 
NULL
;

97 
poŞ
->
_u£d_nodes_’d
 = 
NULL
;

98 
poŞ
->
_ä“_nodes
 =…oŞ->
_nodes
 + (
_couÁ
-1);

99 
poŞ
->
_u£d_b™s
 = 
	`b™¬¿y_®loc_nomng
Ğ
_couÁ
 );

102 
poŞ
->
_ä“_nodes
->
´ev
 = 
NULL
;

103 
poŞ
->
_ä“_nodes
->
Ãxt
 =…ool->_free_nodes-1;

104 --
poŞ
->
_ä“_nodes
;

107  
i
 < 
_couÁ
 ) {

108 
poŞ
->
_ä“_nodes
->
´ev
 =…ool->_free_nodes+1;

110 iàĞ
i
 =ğ
_couÁ
 - 1 ) {

111 
poŞ
->
_ä“_nodes
->
Ãxt
 = 
NULL
;

114 
poŞ
->
_ä“_nodes
->
Ãxt
 =…ool->_free_nodes-1;

115 --
poŞ
->
_ä“_nodes
;

117 ++
i
;

120  
poŞ
;

121 
	}
}

128 
	$poŞ_ä“
 ( 
poŞ_t
* 
_poŞ
 )

130 
	`ex_ä“
(
_poŞ
->
_d©a
);

131 
	`ex_ä“
(
_poŞ
->
_nodes
);

132 
	`b™¬¿y_ä“
Ğ
_poŞ
->
_u£d_b™s
 );

134 
_poŞ
->
_Ëngth
 = 0;

135 
_poŞ
->
_–em’t_by‹s
 = 0;

136 
_poŞ
->
_ÿ·c™y
 = 0;

137 
	`ex_ä“
(
_poŞ
);

138 
	}
}

141 
	$poŞ_ä“_nomng
 ( 
poŞ_t
* 
_poŞ
 )

143 
	`ex_ä“_nomng
(
_poŞ
->
_d©a
);

144 
	`ex_ä“_nomng
(
_poŞ
->
_nodes
);

145 
	`b™¬¿y_ä“_nomng
Ğ
_poŞ
->
_u£d_b™s
 );

147 
_poŞ
->
_Ëngth
 = 0;

148 
_poŞ
->
_–em’t_by‹s
 = 0;

149 
_poŞ
->
_ÿ·c™y
 = 0;

150 
	`ex_ä“_nomng
(
_poŞ
);

151 
	}
}

158 
	$poŞ_»£rve
 ( 
poŞ_t
* 
_poŞ
, 
size_t
 
_couÁ
 )

160 
size_t
 
size
 = 
_couÁ
 * 
_poŞ
->
_–em’t_by‹s
;

161 
i
 = 
_couÁ
 - 1;

164 iàĞ
_couÁ
 <ğ
_poŞ
->
_ÿ·c™y
 )

168 
_poŞ
->
_d©a
 = 
	`ex_»®loc
Ğ_poŞ->_d©a, 
size
 );

169 
_poŞ
->
_nodes
 = 
	`ex_»®loc
Ğ_poŞ->_nodes, (
poŞ_node_t
è* 
_couÁ
 );

170 
	`b™¬¿y_»size
 ( 
_poŞ
->
_u£d_b™s
, 
_couÁ
 );

171 
_poŞ
->
_ÿ·c™y
 = 
_couÁ
;

173 
_poŞ
->
_u£d_nodes_begš
 = 
NULL
;

174 
_poŞ
->
_u£d_nodes_’d
 = 
NULL
;

175 
_poŞ
->
_ä“_nodes
 = 
NULL
;

177  
i
 >= 0 ) {

179 iàĞ
	`b™¬¿y_g‘
 ( 
_poŞ
->
_u£d_b™s
, 
i
 ) ) {

180 
	`_push_to_u£d_»v”£
 ( 
_poŞ
, _poŞ->
_nodes
 + 
i
 );

183 
	`_push_to_ä“
 ( 
_poŞ
, _poŞ->
_nodes
 + 
i
 );

185 --
i
;

187 
	}
}

190 
	$poŞ_»£rve_nomng
 ( 
poŞ_t
* 
_poŞ
, 
size_t
 
_couÁ
 )

192 
size_t
 
size
 = 
_couÁ
 * 
_poŞ
->
_–em’t_by‹s
;

193 
i
 = 
_couÁ
 - 1;

196 iàĞ
_couÁ
 <ğ
_poŞ
->
_ÿ·c™y
 )

200 
_poŞ
->
_d©a
 = 
	`ex_»®loc_nomng
Ğ_poŞ->_d©a, 
size
 );

201 
_poŞ
->
_nodes
 = 
	`ex_»®loc_nomng
Ğ_poŞ->_nodes, (
poŞ_node_t
è* 
_couÁ
 );

202 
	`b™¬¿y_»size_nomng
 ( 
_poŞ
->
_u£d_b™s
, 
_couÁ
 );

203 
_poŞ
->
_ÿ·c™y
 = 
_couÁ
;

205 
_poŞ
->
_u£d_nodes_begš
 = 
NULL
;

206 
_poŞ
->
_u£d_nodes_’d
 = 
NULL
;

207 
_poŞ
->
_ä“_nodes
 = 
NULL
;

209  
i
 >= 0 ) {

211 iàĞ
	`b™¬¿y_g‘
 ( 
_poŞ
->
_u£d_b™s
, 
i
 ) ) {

212 
	`_push_to_u£d_»v”£
 ( 
_poŞ
, _poŞ->
_nodes
 + 
i
 );

215 
	`_push_to_ä“
 ( 
_poŞ
, _poŞ->
_nodes
 + 
i
 );

217 --
i
;

219 
	}
}

226 
	$poŞ_š£¹
 ( 
poŞ_t
* 
_poŞ
, * 
_v®ue
 )

228 
poŞ_node_t
* 
node
 = 
NULL
;

229 * 
–em’t
 = 
NULL
;

230 
idx
 = -1;

232 
node
 = 
	`_»que¡_ä“_node
(
_poŞ
);

233 
	`ex_as£¹
 ( 
node
 !ğ
NULL
, "error: can't get freed‚odes." );

235 
	`_push_to_u£d
Ğ
_poŞ
, 
node
 );

236 
idx
 = 
node
 - 
_poŞ
->
_nodes
;

239 iàĞ
_v®ue
 )

240 
	`memıy
 ( (*)(
_poŞ
->
_d©a
è+ 
idx
 * _poŞ->
_–em’t_by‹s
, 
_v®ue
, _pool->_element_bytes );

242 ++
_poŞ
->
_Ëngth
;

244  
idx
;

245 
	}
}

248 
	$poŞ_š£¹_nomng
 ( 
poŞ_t
* 
_poŞ
, * 
_v®ue
 )

250 
poŞ_node_t
* 
node
 = 
NULL
;

251 * 
–em’t
 = 
NULL
;

252 
idx
 = -1;

254 
node
 = 
	`_»que¡_ä“_node_nomng
(
_poŞ
);

255 
	`ex_as£¹
 ( 
node
 !ğ
NULL
, "error: can't get freed‚odes." );

257 
	`_push_to_u£d
Ğ
_poŞ
, 
node
 );

258 
idx
 = 
node
 - 
_poŞ
->
_nodes
;

261 iàĞ
_v®ue
 )

262 
	`memıy
 ( (*)(
_poŞ
->
_d©a
è+ 
idx
 * _poŞ->
_–em’t_by‹s
, 
_v®ue
, _pool->_element_bytes );

264 ++
_poŞ
->
_Ëngth
;

266  
idx
;

267 
	}
}

273 * 
	$poŞ_”a£
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 )

275 
poŞ_node_t
* 
node
 = 
NULL
;

277 
	`ex_as£¹_»tuº
Ğ
_idx
 >ğ0 && _idx < ()
_poŞ
->
_ÿ·c™y
, 
NULL
, "error: _idx out of„ange" );

278 
	`ex_as£¹_»tuº
Ğ
	`b™¬¿y_g‘
(
_poŞ
->
_u£d_b™s
, 
_idx
è=ğ1, 
NULL
, "error:he‚ode is‚ot in used." );

281 
node
 = 
_poŞ
->
_nodes
 + 
_idx
;

284 iàĞ
node
 =ğ
_poŞ
->
_u£d_nodes_begš
 ) {

285 
_poŞ
->
_u£d_nodes_begš
 = 
node
->
Ãxt
;

287 iàĞ
node
 =ğ
_poŞ
->
_u£d_nodes_’d
 ) {

288 
_poŞ
->
_u£d_nodes_’d
 = 
node
->
´ev
;

292 iàĞ
node
->
´ev
 )

293 
node
->
´ev
->
Ãxt
 =‚ode->next;

294 iàĞ
node
->
Ãxt
 )

295 
node
->
Ãxt
->
´ev
 =‚ode->prev;

298 
	`_push_to_ä“
Ğ
_poŞ
, 
node
 );

299 --
_poŞ
->
_Ëngth
;

301  (*)(
_poŞ
->
_d©a
è+ 
_idx
 * _poŞ->
_–em’t_by‹s
;

302 
	}
}

308 * 
	$poŞ_g‘
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 )

310 
	`ex_as£¹_»tuº
Ğ
_idx
 >ğ0 && (
size_t
)_idx < 
_poŞ
->
_ÿ·c™y
, 
NULL
, "error: _idx out of„ange" );

311 
	`ex_as£¹_»tuº
Ğ
	`b™¬¿y_g‘
(
_poŞ
->
_u£d_b™s
, 
_idx
è=ğ1, 
NULL
, "error:he‚ode is‚ot in used." );

313  (*)(
_poŞ
->
_d©a
è+ 
_idx
 * _poŞ->
_–em’t_by‹s
;

314 
	}
}

325 
poŞ_node_t
* 
	$_»que¡_ä“_node
Ğ
poŞ_t
* 
_poŞ
 )

327 
poŞ_node_t
* 
node
 = 
NULL
;

329 iàĞ
_poŞ
->
_ä“_nodes
 =ğ
NULL
 ) {

330 
	`poŞ_»£rve
Ğ
_poŞ
, _poŞ->
_ÿ·c™y
 * 2 );

333 
node
 = 
_poŞ
->
_ä“_nodes
;

334 
_poŞ
->
_ä“_nodes
->
Ãxt
 = 
NULL
;

335 
_poŞ
->
_ä“_nodes
 = _poŞ->_ä“_nodes->
´ev
;

337  
node
;

338 
	}
}

341 
poŞ_node_t
* 
	$_»que¡_ä“_node_nomng
Ğ
poŞ_t
* 
_poŞ
 )

343 
poŞ_node_t
* 
node
 = 
NULL
;

345 iàĞ
_poŞ
->
_ä“_nodes
 =ğ
NULL
 ) {

346 
	`poŞ_»£rve_nomng
Ğ
_poŞ
, _poŞ->
_ÿ·c™y
 * 2 );

349 
node
 = 
_poŞ
->
_ä“_nodes
;

350 
_poŞ
->
_ä“_nodes
->
Ãxt
 = 
NULL
;

351 
_poŞ
->
_ä“_nodes
 = _poŞ->_ä“_nodes->
´ev
;

353  
node
;

354 
	}
}

360 
	$_push_to_u£d
 ( 
poŞ_t
* 
_poŞ
, 
poŞ_node_t
* 
_node
 )

362 iàĞ
_poŞ
->
_u£d_nodes_’d
 ) {

363 
_poŞ
->
_u£d_nodes_’d
->
Ãxt
 = 
_node
;

364 
_node
->
´ev
 = 
_poŞ
->
_u£d_nodes_’d
;

365 
_node
->
Ãxt
 = 
NULL
;

366 
_poŞ
->
_u£d_nodes_’d
 = 
_node
;

369 
_poŞ
->
_u£d_nodes_begš
 = _poŞ->
_u£d_nodes_’d
 = 
_node
;

370 
_poŞ
->
_u£d_nodes_’d
->
Ãxt
 = 
NULL
;

371 
_poŞ
->
_u£d_nodes_’d
->
´ev
 = 
NULL
;

373 
	`b™¬¿y_£t
Ğ
_poŞ
->
_u£d_b™s
, 
_node
 - _poŞ->
_nodes
, 1 );

374 
	}
}

380 
	$_push_to_u£d_»v”£
 ( 
poŞ_t
* 
_poŞ
, 
poŞ_node_t
* 
_node
 )

382 iàĞ
_poŞ
->
_u£d_nodes_begš
 ) {

383 
_poŞ
->
_u£d_nodes_begš
->
´ev
 = 
_node
;

384 
_node
->
Ãxt
 = 
_poŞ
->
_u£d_nodes_begš
;

385 
_node
->
´ev
 = 
NULL
;

386 
_poŞ
->
_u£d_nodes_begš
 = 
_node
;

389 
_poŞ
->
_u£d_nodes_begš
 = _poŞ->
_u£d_nodes_’d
 = 
_node
;

390 
_poŞ
->
_u£d_nodes_’d
->
Ãxt
 = 
NULL
;

391 
_poŞ
->
_u£d_nodes_’d
->
´ev
 = 
NULL
;

393 
	`b™¬¿y_£t
Ğ
_poŞ
->
_u£d_b™s
, 
_node
 - _poŞ->
_nodes
, 1 );

394 
	}
}

400 
	$_push_to_ä“
 ( 
poŞ_t
* 
_poŞ
, 
poŞ_node_t
* 
_node
 )

402 iàĞ
_poŞ
->
_ä“_nodes
 ) {

403 
_poŞ
->
_ä“_nodes
->
Ãxt
 = 
_node
;

404 
_node
->
´ev
 = 
_poŞ
->
_ä“_nodes
;

405 
_node
->
Ãxt
 = 
NULL
;

406 
_poŞ
->
_ä“_nodes
 = 
_node
;

409 
_poŞ
->
_ä“_nodes
 = 
_node
;

410 
_poŞ
->
_ä“_nodes
->
Ãxt
 = 
NULL
;

411 
_poŞ
->
_ä“_nodes
->
´ev
 = 
NULL
;

413 
	`b™¬¿y_£t
Ğ
_poŞ
->
_u£d_b™s
, 
_node
 - _poŞ->
_nodes
, 0 );

414 
	}
}

	@container\pool.h

9 #iâdeà
POOL_H_1277532911


10 
	#POOL_H_1277532911


	)

20 
	~"b™¬¿y.h
"

34 
	#poŞ_—ch
Ğ
_ty³
, 
_–
, 
_poŞ
 ) \

36 
poŞ_node_t
* 
node
 = (
_poŞ
)->
_u£d_nodes_begš
; \

37 
_ty³
 
_–
; \

38  
node
 ) { \

39 
_–
 = *Ğ(
_ty³
*è
	`poŞ_g‘
Ğ
_poŞ
, 
node
 - (_poŞ)->
_nodes
 ) );

	)

41 
	#poŞ_—ch_’d
 \

42 
node
 =‚ode->
Ãxt
; \

44 }

	)

51 
	spoŞ_node_t
 {

52 
poŞ_node_t
* 
	m´ev
;

53 
poŞ_node_t
* 
	mÃxt
;

54 } 
	tpoŞ_node_t
;

57 
	spoŞ_t
 {

59 
size_t
 
	m_Ëngth
;

60 
size_t
 
	m_ÿ·c™y
;

61 
size_t
 
	m_–em’t_by‹s
;

62 * 
	m_d©a
;

63 
poŞ_node_t
* 
	m_nodes
;

64 
b™¬¿y_t
* 
	m_u£d_b™s
;

66 
poŞ_node_t
* 
	m_u£d_nodes_begš
;

67 
poŞ_node_t
* 
	m_u£d_nodes_’d
;

68 
poŞ_node_t
* 
	m_ä“_nodes
;

69 } 
	tpoŞ_t
;

75 
poŞ_t
* 
poŞ_®loc
 ( 
size_t
 
_–em’t_by‹s
, size_ˆ
_couÁ
 );

76 
poŞ_t
* 
poŞ_®loc_nomng
 ( 
size_t
 
_–em’t_by‹s
, size_ˆ
_couÁ
 );

82 
poŞ_ä“
 ( 
poŞ_t
* 
_poŞ
 );

83 
poŞ_ä“_nomng
 ( 
poŞ_t
* 
_poŞ
 );

89 
poŞ_»£rve
 ( 
poŞ_t
* 
_poŞ
, 
size_t
 
_couÁ
 );

90 
poŞ_»£rve_nomng
 ( 
poŞ_t
* 
_poŞ
, 
size_t
 
_couÁ
 );

96 
šlše
 
size_t
 
	$poŞ_Ën
 ( 
poŞ_t
* 
_poŞ
 ) {  _poŞ->
_Ëngth
; 
	}
}

97 
šlše
 
size_t
 
	$poŞ_ÿ·c™y
 ( 
poŞ_t
* 
_poŞ
 ) {  _poŞ->
_ÿ·c™y
; 
	}
}

104 
poŞ_š£¹
 ( 
poŞ_t
* 
_poŞ
, * 
_v®ue
 );

105 
poŞ_š£¹_nomng
 ( 
poŞ_t
* 
_poŞ
, * 
_v®ue
 );

107 
šlše
 
	$poŞ_š£¹_št8
 ( 
poŞ_t
* 
_poŞ
, 
št8
 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

108 
šlše
 
	$poŞ_š£¹_št16
 ( 
poŞ_t
* 
_poŞ
, 
št16
 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

109 
šlše
 
	$poŞ_š£¹_št32
 ( 
poŞ_t
* 
_poŞ
, 
št32
 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

110 
šlše
 
	$poŞ_š£¹_št64
 ( 
poŞ_t
* 
_poŞ
, 
št64
 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

112 
šlše
 
	$poŞ_š£¹_ušt8
 ( 
poŞ_t
* 
_poŞ
, 
ušt8
 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

113 
šlše
 
	$poŞ_š£¹_ušt16
 ( 
poŞ_t
* 
_poŞ
, 
ušt16
 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

114 
šlše
 
	$poŞ_š£¹_ušt32
 ( 
poŞ_t
* 
_poŞ
, 
ušt32
 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

115 
šlše
 
	$poŞ_š£¹_ušt64
 ( 
poŞ_t
* 
_poŞ
, 
ušt64
 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

117 
šlše
 
	$poŞ_š£¹_æßt
 ( 
poŞ_t
* 
_poŞ
, 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

118 
šlše
 
	$poŞ_š£¹_doubË
 ( 
poŞ_t
* 
_poŞ
, 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

120 
šlše
 
	$poŞ_š£¹_¡ršg
 ( 
poŞ_t
* 
_poŞ
, * 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

121 
šlše
 
	$poŞ_š£¹_w¡ršg
 ( 
poŞ_t
* 
_poŞ
, 
wch¬_t
* 
_v®ue
 ) {  
	`poŞ_š£¹
 ( _poŞ, &_v®u); 
	}
}

127 * 
poŞ_g‘
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 );

129 
šlše
 
št8
 
	$poŞ_g‘_št8
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
št8
*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

130 
šlše
 
št16
 
	$poŞ_g‘_št16
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
št16
*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

131 
šlše
 
št32
 
	$poŞ_g‘_št32
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
št32
*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

132 
šlše
 
št64
 
	$poŞ_g‘_št64
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
št64
*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

134 
šlše
 
ušt8
 
	$poŞ_g‘_ušt8
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
ušt8
*)(
	`poŞ_g‘
 ( _poŞ, _idx ))); 
	}
}

135 
šlše
 
ušt16
 
	$poŞ_g‘_ušt16
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
ušt16
*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

136 
šlše
 
ušt32
 
	$poŞ_g‘_ušt32
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
ušt32
*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

137 
šlše
 
ušt64
 
	$poŞ_g‘_ušt64
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
ušt64
*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

139 
šlše
 
	$poŞ_g‘_æßt
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

140 
šlše
 
	$poŞ_g‘_doubË
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((*)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

142 
šlše
 * 
	$poŞ_g‘_¡ršg
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((**)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

143 
šlše
 
wch¬_t
* 
	$poŞ_g‘_w¡ršg
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 ) {  *((
wch¬_t
**)
	`poŞ_g‘
 ( _poŞ, _idx )); 
	}
}

149 * 
poŞ_”a£
 ( 
poŞ_t
* 
_poŞ
, 
_idx
 );

	@core\core_inc.h

9 #iâdeà
CORE_INC_H_1277524348


10 
	#CORE_INC_H_1277524348


	)

13 
	~"glob®/glob®_šc.h
"

14 
	~"memÜy/memÜy_šc.h
"

15 
	~"debug/debug_šc.h
"

16 
	~"th»ad/th»ad_šc.h
"

17 
	~"¡ršg/¡ršg_šc.h
"

18 
	~"misc/misc_šc.h
"

	@core\debug\debug.c

12 
	~"exsdk.h
"

14 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
)

15 
	~<wšdows.h
>

26 
	$_shÜt_funúame
 ( 
_shÜt_Çme
[], cÚ¡ * 
_funùiÚ_Çme
, 
_Ën
 )

28 
Ën
;

30 
	`memz”o
 ( 
_shÜt_Çme
, ()*
_Ën
 );

31 
Ën
 = 
	`¡¾’
(
_funùiÚ_Çme
);

32 iàĞ
Ën
 > 
_Ën
 ) {

33 
	`memıy
 ( 
_shÜt_Çme
, 
_funùiÚ_Çme
, ()*(
_Ën
-4) );

34 
_shÜt_Çme
[
_Ën
-4] = '.';

35 
_shÜt_Çme
[
_Ën
-3] = '.';

36 
_shÜt_Çme
[
_Ën
-2] = '.';

37 
_shÜt_Çme
[
_Ën
-1] = 0;

41 
	`¡ºıy
Ğ
_shÜt_Çme
, 
_funùiÚ_Çme
, 
Ën
 );

43 
	}
}

49 
boŞ
 
	$as£¹_çed
Ğ
boŞ
* 
_pDoAs£¹
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_funùiÚ_Çme
, 
size_t
 
_lše_Ä
, cÚ¡ * 
_ex´
, ... )

52 
»suÉ
 = -1;

53 
bufãr_couÁ
 = 1024;

54 * 
pBufãr
 = 
NULL
;

55 
shÜt_Çme
[64];

56 
mbResuÉ
 = -1;

59  
»suÉ
 == -1 )

61 
pBufãr
 = (*)
	`ex_»®loc_nomng
ĞpBufãr, 
bufãr_couÁ
 * () );

62 
	`EX_GET_VA_STRING_WITH_RESULT
Ğ
pBufãr
, 
bufãr_couÁ
, 
_ex´
, &
»suÉ
 );

63 
bufãr_couÁ
 *= 2;

65 
pBufãr
[
»suÉ
] = 0;

68 
	`_shÜt_funúame
Ğ
shÜt_Çme
, 
_funùiÚ_Çme
, 64 );

71 
	`ex_log
 ( "As£¹ Faed: %s(%d)::%s, %s", 
_fe_Çme
, 
_lše_Ä
, 
shÜt_Çme
, 
pBufãr
 );

72 
mbResuÉ
 = 
	`mes§ge_box
Ğ
MSG_BOX_FAILED
, "Assert Failed",

78 
_fe_Çme
, 
_lše_Ä
, 
shÜt_Çme
, 
pBufãr
 );

81 
	`ex_ä“_nomng
 ( 
pBufãr
 );

84 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
è|| (EX_PLATFORM =ğ
EX_XENON
)

85 (*
_pDoAs£¹
èğ(
mbResuÉ
 !ğ
IDIGNORE
);

86  (
mbResuÉ
 =ğ
IDRETRY
);

88  
Œue
;

90 
	}
}

96 
boŞ
 
	$”rÜ_msg
Ğ
boŞ
* 
_pDoAs£¹
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_funùiÚ_Çme
, 
size_t
 
_lše_Ä
, cÚ¡ * 
_ex´
, ... )

99 
»suÉ
 = -1;

100 
bufãr_couÁ
 = 1024;

101 * 
pBufãr
 = 
NULL
;

102 
shÜt_Çme
[64];

103 
mbResuÉ
;

106  
»suÉ
 == -1 )

108 
pBufãr
 = (*)
	`ex_»®loc_nomng
ĞpBufãr, 
bufãr_couÁ
 * () );

109 
	`EX_GET_VA_STRING_WITH_RESULT
Ğ
pBufãr
, 
bufãr_couÁ
, 
_ex´
, &
»suÉ
 );

110 
bufãr_couÁ
 *= 2;

112 
pBufãr
[
»suÉ
] = 0;

115 
	`_shÜt_funúame
Ğ
shÜt_Çme
, 
_funùiÚ_Çme
, 64 );

118 
	`ex_log
 ( "E¼Ü: %s(%d)[%s], %s", 
_fe_Çme
, 
_lše_Ä
, 
shÜt_Çme
, 
pBufãr
 );

119 
mbResuÉ
 = 
	`mes§ge_box
Ğ
MSG_BOX_ERROR
, "E¼Ü", "E¼Ü: %s(%d)[%s], %s", 
_fe_Çme
, 
_lše_Ä
, 
shÜt_Çme
, 
pBufãr
 );

122 
	`ex_ä“_nomng
 ( 
pBufãr
 );

125 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
è|| (EX_PLATFORM =ğ
EX_XENON
)

126 (*
_pDoAs£¹
èğ(
mbResuÉ
 !ğ
IDIGNORE
);

127  (
mbResuÉ
 =ğ
IDRETRY
);

129  
Œue
;

131 
	}
}

137 
boŞ
 
	$w¬nšg_msg
 ( 
boŞ
* 
_pDoAs£¹
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_funùiÚ_Çme
, 
size_t
 
_lše_Ä
, cÚ¡ * 
_ex´
, ... )

140 
»suÉ
 = -1;

141 
bufãr_couÁ
 = 1024;

142 * 
pBufãr
 = 
NULL
;

143 
shÜt_Çme
[64];

144 
mbResuÉ
;

147  
»suÉ
 == -1 )

149 
pBufãr
 = (*)
	`ex_»®loc_nomng
ĞpBufãr, 
bufãr_couÁ
 * () );

150 
	`EX_GET_VA_STRING_WITH_RESULT
Ğ
pBufãr
, 
bufãr_couÁ
, 
_ex´
, &
»suÉ
 );

151 
bufãr_couÁ
 *= 2;

153 
pBufãr
[
»suÉ
] = 0;

156 
	`_shÜt_funúame
Ğ
shÜt_Çme
, 
_funùiÚ_Çme
, 64 );

159 
	`ex_log
 ( "W¬nšg: %s(%d)[%s], %s", 
_fe_Çme
, 
_lše_Ä
, 
_funùiÚ_Çme
, 
pBufãr
 );

160 
mbResuÉ
 = 
	`mes§ge_box
Ğ
MSG_BOX_WARNING
, "W¬nšg", "W¬nšg: %s(%d)[%s], %s", 
_fe_Çme
, 
_lše_Ä
, 
_funùiÚ_Çme
, 
pBufãr
 );

163 
	`ex_ä“_nomng
 ( 
pBufãr
 );

166 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
è|| (EX_PLATFORM =ğ
EX_XENON
)

167 (*
_pDoAs£¹
èğ(
mbResuÉ
 !ğ
IDIGNORE
);

168  (
mbResuÉ
 =ğ
IDRETRY
);

170  
Œue
;

172 
	}
}

	@core\debug\debug.h

9 #iâdeà
DEBUG_H_1277524266


10 
	#DEBUG_H_1277524266


	)

24 
	#SERIOUS
 0

	)

25 
	#NORMAL
 1

	)

26 
	#DISABLE
 2

	)

28 #ifdeà
EX_DEBUG


29 
	#EX_DEBUG_LEVEL
 
SERIOUS


30 #–ià
	`defšed
 (
EX_RELEASE
)

	)

31 
	#EX_DEBUG_LEVEL
 
DISABLE


	)

42 
boŞ
 
as£¹_çed
 ( boŞ* 
_pDoAs£¹
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_funùiÚ_Çme
, 
size_t
 
_lše_Ä
, cÚ¡ * 
_ex´
, ... );

43 
boŞ
 
”rÜ_msg
 ( boŞ* 
_pDoAs£¹
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_funùiÚ_Çme
, 
size_t
 
_lše_Ä
, cÚ¡ * 
_ex´
, ... );

44 
boŞ
 
w¬nšg_msg
 ( boŞ* 
_pDoAs£¹
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_funùiÚ_Çme
, 
size_t
 
_lše_Ä
, cÚ¡ * 
_ex´
, ... );

54 #ifdeà
EX_DEBUG


55 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 )

56 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

57 
	#EX_HW_BREAK
(è{
__asm
 {3}}

	)

58 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

59 
	#EX_HW_BREAK
(è{
__asm__
 
	`__vŞ©e__
 ("št3");}

	)

61 #–iàĞ
EX_PLATFORM
 =ğ
EX_LINUX
 )

62 
	#EX_HW_BREAK
(è{
__asm__
 
	`__vŞ©e__
 ("št3");}

	)

63 #–iàĞ
EX_PLATFORM
 =ğ
EX_XENON
 )

64 
	#EX_HW_BREAK
(è{
	`__debugb»ak
();}

	)

65 #–iàĞ
EX_PLATFORM
 =ğ
EX_PS3
 )

66 
	#EX_HW_BREAK
(è
__asm__
 volatile ( "tw 31,1,1" )

69 #–£

	)

70 
	#EX_HW_BREAK
(è
EX_NOOP


	)

79 
	#EX_HW_BREAK_IF
(
ex´
è{ if(!!Óx´)è
	`EX_HW_BREAK
(); }

	)

90 
	#__EX_ERROR_BREAK
(
msg
,...) \

92 
boŞ
 
s_AskB»ak
 = 
Œue
; \

93 iàĞ
s_AskB»ak
 ) \

95 ifĞ
	`”rÜ_msg
Ğ&
s_AskB»ak
, 
__FILE__
, 
__FUNCTION__
, 
__LINE__
, 
msg
, ##
__VA_ARGS__
 ) ) \

97 
	`EX_HW_BREAK
(); \

104 }  
çl£
 )

	)

107 
	#__EX_WARNING_BREAK
(
msg
,...) \

109 
boŞ
 
s_AskB»ak
 = 
Œue
; \

110 iàĞ
s_AskB»ak
 ) \

112 ifĞ
	`w¬nšg_msg
Ğ&
s_AskB»ak
, 
__FILE__
, 
__FUNCTION__
, 
__LINE__
, 
msg
, ##
__VA_ARGS__
 ) ) \

114 
	`EX_HW_BREAK
(); \

121 }  
çl£
 )

	)

128 
	#ex_log
Ğ
msg
, ... ) 
	`´štf
Ğmsg, ##
__VA_ARGS__
 )

	)

131 #iàĞ
EX_DEBUG_LEVEL
 =ğ
SERIOUS
 )

132 
	#ex_”rÜ
(
msg
,...è
	`__EX_ERROR_BREAK
(msg, ##
__VA_ARGS__
)

	)

133 
	#ex_w¬nšg
(
msg
,...è
	`__EX_WARNING_BREAK
(msg, ##
__VA_ARGS__
)

	)

136 
	#ex_”rÜ
(
msg
,...è
	`EX_GP
(::
ex
::
CLog
)->
	`LogE¼Ü
Ğ
__FILE__
, 
__LINE__
, 
__FUNCTION__
, msg, ##
__VA_ARGS__
 )

	)

137 
	#ex_w¬nšg
(
msg
,...è
	`EX_GP
(::
ex
::
CLog
)->
	`LogW¬nšg
Ğ
__FILE__
, 
__LINE__
, 
__FUNCTION__
, msg, ##
__VA_ARGS__
 )

	)

145 #iàĞ
EX_DEBUG_LEVEL
 =ğ
SERIOUS
 )

146 
	#ex_log_func
(è
	`ex_log
 ("%s", 
EX_FUNC_INFO
);

	)

148 
	#ex_log_func
()

	)

160 
	#__EX_ASSERT_BREAK
(
ex´
,
msg
,...) \

162 
boŞ
 
s_DoAs£¹
 = 
Œue
; \

163 
boŞ
 
ev®
 = !(
ex´
); \

164 iàĞ
s_DoAs£¹
 ) \

166 ifĞ
ev®
 && 
	`as£¹_çed
Ğ&
s_DoAs£¹
, 
__FILE__
, 
__FUNCTION__
, 
__LINE__
, #ex´" : "
msg
, ##
__VA_ARGS__
 ) ) \

168 
	`EX_HW_BREAK
(); \

171 }  
çl£
 )

	)

174 
	#__EX_ASSERT_RETURN_BREAK
(
ex´
,
»t
,
msg
,...) \

176 
boŞ
 
s_DoAs£¹
 = 
Œue
; \

177 
boŞ
 
ev®
 = !(
ex´
); \

178 iàĞ
s_DoAs£¹
 ) \

180 ifĞ
ev®
 && 
	`as£¹_çed
Ğ&
s_DoAs£¹
, 
__FILE__
, 
__FUNCTION__
, 
__LINE__
, #ex´" : "
msg
, ##
__VA_ARGS__
 ) ) \

182 
	`EX_HW_BREAK
(); \

185 iàĞ
ev®
 ) \

186  
»t
; \

187 }  
çl£
 )

	)

190 
	#__EX_ASSERT_EXEC_BREAK
(
ex´
,
func
,
msg
,...) \

192 
boŞ
 
s_DoAs£¹
 = 
Œue
; \

193 
boŞ
 
ev®
 = !(
ex´
); \

194 iàĞ
ev®
 ) \

195 
func
; \

196 iàĞ
s_DoAs£¹
 ) \

198 ifĞ
ev®
 && 
	`as£¹_çed
Ğ&
s_DoAs£¹
, 
__FILE__
, 
__FUNCTION__
, 
__LINE__
, #ex´" : "
msg
, ##
__VA_ARGS__
 ) ) \

200 
	`EX_HW_BREAK
(); \

203 }  
çl£
 )

	)

217 #iàĞ
EX_DEBUG_LEVEL
 =ğ
SERIOUS
 )

218 
	#ex_as£¹
(
ex´
,
msg
,...è
	`__EX_ASSERT_BREAK
Óx´, msg, ##
__VA_ARGS__
)

	)

219 
	#ex_as£¹_¦ow
(
ex´
,
msg
,...è
	`__EX_ASSERT_BREAK
Óx´, msg, ##
__VA_ARGS__
)

	)

220 
	#ex_as£¹_»tuº
(
ex´
,
»t
,
msg
,...è
	`__EX_ASSERT_RETURN_BREAK
Óx´,„‘, msg, ##
__VA_ARGS__
)

	)

221 
	#ex_as£¹_exec
(
ex´
,
func
,
msg
,...è
	`__EX_ASSERT_EXEC_BREAK
Óx´, func, msg, ##
__VA_ARGS__
)

	)

222 #–iàĞ
EX_DEBUG_LEVEL
 =ğ
NORMAL
 )

223 
	#ex_as£¹
(
ex´
,
msg
,...è
	`__EX_ASSERT_BREAK
Óx´, msg, ##
__VA_ARGS__
)

	)

224 
	#ex_as£¹_¦ow
(
ex´
,
msg
,...è
EX_NOOP


	)

225 
	#ex_as£¹_»tuº
(
ex´
,
»t
,
msg
,...è
	`__EX_ASSERT_RETURN_BREAK
Óx´,„‘, msg, ##
__VA_ARGS__
)

	)

226 
	#ex_as£¹_exec
(
ex´
,
func
,
msg
,...è
	`__EX_ASSERT_EXEC_BREAK
Óx´, func, msg, ##
__VA_ARGS__
)

	)

227 #–iàĞ
EX_DEBUG_LEVEL
 =ğ
DISABLE
 )

228 
	#ex_as£¹
(
ex´
,
msg
,...è
EX_NOOP


	)

229 
	#ex_as£¹_¦ow
(
ex´
,
msg
,...è
EX_NOOP


	)

230 
	#ex_as£¹_»tuº
(
ex´
,
»t
,
msg
,...è{ if(!Óx´)è{ „‘; } }

	)

231 
	#ex_as£¹_exec
(
ex´
,
func
,
msg
,...è
EX_NOOP


	)

238 
	#ex_check
Ğ
ex´
 ) 
	`__EX_ASSERT_BREAK
Óx´,"check faed!")

	)

	@core\debug\debug_inc.h

9 #iâdeà
DEBUG_INC_H_1277601384


10 
	#DEBUG_INC_H_1277601384


	)

13 
	~"msgbox.h
"

14 
	~"debug.h
"

	@core\debug\msgbox.c

12 
	~"exsdk.h
"

14 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
)

15 
	~<wšdows.h
>

26 
	$mes§ge_box
 ( 
_msgTy³
, cÚ¡ * 
_ÿ±iÚ
, cÚ¡ * 
_ex´
, ... )

29 
»suÉ
 = -1;

30 
bufãr_couÁ
 = 1024;

31 * 
pBufãr
 = 
NULL
;

33 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
è|| (EX_PLATFORM =ğ
EX_XENON
)

34 
ušt
 
ty³
 = 
MB_OK
;

35 
»t
;

39  
»suÉ
 == -1 )

41 
pBufãr
 = (*)
	`ex_»®loc_nomng
ĞpBufãr, 
bufãr_couÁ
 * () );

42 
	`EX_GET_VA_STRING_WITH_RESULT
Ğ
pBufãr
, 
bufãr_couÁ
, 
_ex´
, &
»suÉ
 );

43 
bufãr_couÁ
 *= 2;

45 
pBufãr
[
»suÉ
] = 0;

47 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
è|| (EX_PLATFORM =ğ
EX_XENON
)

48 iàĞ
_msgTy³
 =ğ
MSG_BOX_FAILED
 )

49 
ty³
 = 
MB_ABORTRETRYIGNORE
|
MB_ICONWARNING
;

50 iàĞ
_msgTy³
 =ğ
MSG_BOX_ERROR
 )

51 
ty³
 = 
MB_ICONERROR
;

52 iàĞ
_msgTy³
 =ğ
MSG_BOX_WARNING
 )

53 
ty³
 = 
MB_ICONWARNING
;

55 
»t
 = 
	`Mes§geBox
Ğ
NULL
, 
pBufãr
, 
_ÿ±iÚ
, 
ty³
 );

59 
	`ex_ä“_nomng
 ( 
pBufãr
 );

62  
»t
;

63 
	}
}

	@core\debug\msgbox.h

9 #iâdeà
MSGBOX_H_1277609778


10 
	#MSGBOX_H_1277609778


	)

17 
	#MSG_BOX_NONE
 00

	)

18 
	#MSG_BOX_FAILED
 01

	)

19 
	#MSG_BOX_ERROR
 02

	)

20 
	#MSG_BOX_WARNING
 03

	)

26 
mes§ge_box
 ( 
_msgTy³
, cÚ¡ * 
_ÿ±iÚ
, cÚ¡ * 
_ex´
, ... );

	@core\global\compiler.h

9 #iâdeà
COMPILER_H_1277511938


10 
	#COMPILER_H_1277511938


	)

19 
	#EX_MSVC
 0x01

	)

20 
	#EX_GCC
 0x02

	)

26 #ià
defšed
 ( 
_MSC_VER
 )

27 
	#EX_COMPILER
 
EX_MSVC


	)

28 
	#EX_COMPILER_VER
 
_MSC_VER


	)

29 #–ià
defšed
 ( 
__GNUC__
 )

30 
	#EX_COMPILER
 
EX_GCC


	)

31 
	#EX_COMPILER_VER
 (((
__GNUC__
)*100)+
__GNUC_MINOR__
)

	)

33 
	#EX_COMPILER
 
EX_UNKNOWN


	)

34 
	#EX_COMPILER_VER
 
EX_UNKNOWN


	)

41 #iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

42 #ià
defšed
 
__ılu¥lus


43 
	#EX_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

45 
	#EX_VOID_CAST
 ()

	)

48 
	#EX_VOID_CAST
 ()

	)

55 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

56 
	#EX_NOOP
 
	`EX_VOID_CAST
(0)

	)

57 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

58 
	#EX_NOOP
 
	`EX_VOID_CAST
(0)

	)

65 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

66 
	#EX_FORCE_INLINE
 
__fÜûšlše


67 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

	)

68 
	#EX_FORCE_INLINE
 
šlše
 
	`__©Œibu‹__
 ((
®ways_šlše__
))

70 

	)

75 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

76 
	#EX_ALIGN
(
n
è
	`__deş¥ec
(
	`®ign
Ò))

	)

77 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

78 
	#EX_ALIGN
(
n
è
	`__©Œibu‹__
((
	`®igÃd
Ò)))

	)

85 #iàĞ(
EX_COMPILER
 !ğ
EX_GCC
è&& (EX_COMPILER !ğ
EX_MSVC
) )

86 #iâdeà
__FUNCTION__


87 
	#__FUNCTION__
 "???"

	)

96 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

97 
	#EX_GCH_PCH
Ğ
gch
, 
pch
 ) 
	`EX_STRING
Õch)

	)

98 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

99 
	#EX_GCH_PCH
Ğ
gch
, 
pch
 ) 
	`EX_STRING
(gch)

	)

108 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

109 
	#EX_DEPRECATED
(
desc
è
	`__deş¥ec
(
	`d•»ÿ‹d
(desc))

	)

110 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

111 #ià(
__GNUC__
 > 3 || (__GNUC__ =ğ3 && 
__GNUC_MINOR__
 >= 1))

112 
	#EX_DEPRECATED
(
desc
è
	`__©Œibu‹__
((
__d•»ÿ‹d__
))

	)

114 
	#EX_DEPRECATED
(
desc
)

	)

122 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

123 
	#EX_FUNC_INFO
 
__FUNCSIG__


	)

124 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

125 
	#EX_FUNC_INFO
 
	`__FILE__
(
__LINE__
): 
__FUNCTION__


	)

136 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

137 #ifdeà
EX_NOINLINE


138 #undeà
EX_NOINLINE


140 
	#EX_NOINLINE
 
	`__deş¥ec
(
nošlše
)

	)

141 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

142 #ifdeà
NOINLINE


143 #undeà
NOINLINE


145 
	#NOINLINE


	)

152 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

153 #ifdeà
STDCALL


154 #undeà
STDCALL


156 
	#STDCALL
 
¡dÿÎ


	)

157 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

158 #ifdeà
STDCALL


159 #undeà
STDCALL


161 
	#STDCALL
 
	`__©Œibu‹__
 ((
¡dÿÎ
))

	)

168 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

169 #ifdeà
EX_CDECL


170 #undeà
EX_CDECL


172 
	#EX_CDECL
 
cdeş


	)

173 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

174 #ifdeà
EX_CDECL


175 #undeà
EX_CDECL


177 
	#EX_CDECL
 
	`__©Œibu‹__
 ((
cdeş
))

	)

184 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

185 #ifdeà
EX_DEPRECATED


186 #undeà
EX_DEPRECATED


188 
	#EX_DEPRECATED
 
	`__deş¥ec
(
d•»ÿ‹d
)

	)

189 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

190 #ifdeà
EX_DEPRECATED


191 #undeà
EX_DEPRECATED


193 
	#EX_DEPRECATED
 
	`__©Œibu‹__
 ((
d•»ÿ‹d
))

	)

205 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

206 #´agm¨
w¬nšg
(
di§bË
 : 4100)

207 #´agm¨
w¬nšg
(
di§bË
 : 4251)

208 #´agm¨
w¬nšg
(
di§bË
 : 4275)

209 #´agm¨
w¬nšg
(
di§bË
 : 4996)

211 #ià
defšed
 (
EX_RELEASE
)

212 #´agm¨
w¬nšg
(
di§bË
 : 4800)

221 #´agm¨
w¬nšg
(
di§bË
 : 4503)

223 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

	@core\global\config.h

9 #iâdeà
CONFIG_H_1277512370


10 
	#CONFIG_H_1277512370


	)

23 #ifdeà
EX_DEBUG


24 
	#EX_USE_FORCEINLINE
 0

	)

25 #–ià
defšed
 (
EX_RELEASE
)

26 
	#EX_USE_FORCEINLINE
 1

	)

37 
	#EX_DEFAULT_ALIGNMENT
 16

	)

46 
	#EX_USE_SYSTEM_MEMORY
 0

	)

52 
	#EX_USE_MEMORY_MANAGER
 1

	)

58 
	#EX_DBG_WITH_CRT
 0

	)

74 
	#EX_FLOAT_EPS
 1e-06f

	)

80 
	#EX_DOUBLE_EPS
 1e-08

	)

90 
	#EX_USE_QT
 0

	)

96 
	#EX_USE_SDL
 1

	)

102 #ià
EX_DBG_WITH_CRT


103 #undeà
EX_ALLOCATOR


107 #ifdeà
EX_NO_EXTERNAL


108 #undeà
EX_USE_QT


109 
	#EX_USE_QT
 0

	)

111 #undeà
EX_USE_SDL


112 
	#EX_USE_SDL
 0

	)

	@core\global\constants.h

9 #iâdeà
CONSTANTS_H_1277625965


10 
	#CONSTANTS_H_1277625965


	)

17 
	#EX_RESULT
 

	)

20 
	#EX_RESULT_UNKNOWN
 1000

	)

21 
	#EX_RESULT_OK
 1001

	)

22 
	#EX_RESULT_FAILED
 1002

	)

23 
	#EX_RESULT_INVALID_INPUT
 1003

	)

24 
	#EX_RESULT_INVALID_OUTPUT
 1004

	)

27 
	#EX_RESULT_NOT_FOUND
 1005

	)

28 
	#EX_RESULT_ALREADY_EXISTED
 1006

	)

29 
	#EX_RESULT_ALREADY_FREED
 1007

	)

30 
	#EX_RESULT_OUT_OF_RANGE
 1008

	)

33 
	#EX_RESULT_INFINITY
 1009

	)

34 
	#EX_RESULT_NAN
 1010

	)

37 
	#EX_RESULT_END_OF_FILE
 1011

	)

38 
	#EX_RESULT_READ_FAILED
 1012

	)

39 
	#EX_RESULT_WRITE_FAILED
 1013

	)

40 
	#EX_RESULT_SERIALIZE_FAILED
 1014

	)

41 
	#EX_RESULT_PARSE_FAILED
 1015

	)

42 
	#EX_RESULT_NOT_EXISTS
 1016

	)

45 
	#EX_RESULT_CREATE_FAILED
 1017

	)

46 
	#EX_RESULT_INIT_FAILED
 1018

	)

47 
	#EX_RESULT_DESTROY_FAILED
 1019

	)

48 
	#EX_RESULT_VERIFY_FAILED
 1020

	)

49 
	#EX_RESULT_NO_CHANGE
 1021

	)

52 
	#EX_RESULT_LOCK_FAILED
 1022

	)

55 
	#EX_RESULT_RENDER_PAUSED
 1023

	)

56 
	#EX_RESULT_DEVICE_LOST
 1024

	)

57 
	#EX_RESULT_DEVICE_RESET_FAILED
 1025

	)

62 
	#EX_RESULT_COMPILE_FAILED
 1026

	)

	@core\global\external.h

9 #iâdeà
EXTERNAL_H_1277550673


10 
	#EXTERNAL_H_1277550673


	)

17 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
)

20 #iàĞ
EX_USE_SYSTEM_MEMORY
 || (
EX_USE_MEMORY_MANAGER
 && 
EX_DBG_WITH_CRT
èè&& 
defšed
 (
EX_DEBUG
)

21 
	#_CRTDBG_MAP_ALLOC


	)

24 
	~<ütdbg.h
>

27 
	~<wšdows.h
>

38 #–ià(
EX_PLATFORM
 =ğ
EX_LINUX
)

40 
	~<m®loc.h
>

41 
	~<io.h
>

42 
	~<’dŸn.h
>

45 
	~<xmmšŒš.h
>

48 
	~<·œ
>

49 
	~<muÉi£t
>

50 
	~<muÉim­
>

58 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

61 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

63 #iâdeà
CHAR_BIT


64 
	#CHAR_BIT
 
__CHAR_BIT__


	)

73 
	~<¡ršg.h
>

74 
	~<¡d¬g.h
>

75 
	~<¡dlib.h
>

76 
	~<¡dio.h
>

77 
	~<wch¬.h
>

78 
	~<m©h.h
>

84 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
)

85 
	#¢´štf
 
_¢´štf


	)

	@core\global\global_inc.h

9 #iâdeà
GLOBAL_INC_H_1277512309


10 
	#GLOBAL_INC_H_1277512309


	)

13 
	~"cÚfig.h
"

14 
	~"comp”.h
"

15 
	~"¶©fÜm.h
"

16 
	~"ty³s.h
"

17 
	~"maüo.h
"

19 
	~"ex‹º®.h
"

	@core\global\macro.h

9 #iâdeà
MACRO_H_1277560964


10 
	#MACRO_H_1277560964


	)

19 
	#EX_MACRO_EXPAND
Ğ
maüo_Çme
, ... ) 
	`maüo_Çme
Ğ
__VA_ARGS__
 )

	)

20 
	#EX_MACRO_EXPAND_SIMPLE
Ğ
maüo_Çme
 ) 
	)
macro_name

26 
	#EX_STRING
(
¡r
è#¡r

	)

27 
	#EX_STRING_EXPAND
(
¡r
è
	`EX_STRING
(¡r)

	)

33 
	#EX_UNUSED
(
_·¿m
è()
	)
_param

39 
	#EX_BIT_COUNT
Ğ
_v®ue
 ) (_v®ue)*8

	)

45 
	#EX_BIT_ROT
Ğ
_v®
, 
_pos
 ) (((_v®)<<(_pos)è| ((_v®)>>(32-(_pos))))

	)

51 
	#EX_GET_VA_STRING
Ğ
_bufãr
, 
_couÁ
, 
_fmt
 ) \

53 
va_li¡
 
¬gs
; \

54 
	`va_¡¬t
Ğ
¬gs
, 
_fmt
 ); \

55 
	`v¢´štf
 ( 
_bufãr
, 
_couÁ
, 
_fmt
, 
¬gs
 ); \

56 
	`va_’d
(
¬gs
); \

57 
	`ex_as£¹_¦ow
Ğ
	`¡¾’
(
_bufãr
è<ğ
_couÁ
, "extended string have over flowhe buffer" ); \

58 }

	)

64 
	#EX_GET_VA_STRING_WITH_RESULT
Ğ
_bufãr
, 
_couÁ
, 
_fmt
, 
»suÉ
 ) \

66 
va_li¡
 
¬gs
; \

67 
	`va_¡¬t
Ğ
¬gs
, 
_fmt
 ); \

68 *
»suÉ
 = 
	`v¢´štf
Ğ
_bufãr
, 
_couÁ
, 
_fmt
, 
¬gs
 ); \

69 
	`va_’d
(
¬gs
); \

70 }

	)

77 
	#EX_ALIGN_FLOOR
(
v®
, 
®ign
è((v®è& ~×lign-1))

	)

84 
	#EX_ALIGN_ROUND
(
v®
, 
®ign
è(((v®è+ (®ign-1)è& ~×lign-1))

	)

92 
	#EX_ARRAY_COUNT
(
¬r
è(×¼)/×¼[0]))

	)

98 
	#EX_KB
(
nb
) (()(nb)*1024)

99 
	#EX_MB
(
nb
è
	`EX_KB
((nb)*1024)

100 
	#EX_GB
(
nb
è
	`EX_MB
((nb)*1024)

101 

	)

	@core\global\platform.h

9 #iâdeà
PLATFORM_H_1277512693


10 
	#PLATFORM_H_1277512693


	)

22 
	#EX_UNKNOWN
 0x00

	)

29 
	#EX_WIN32
 0x01

	)

30 
	#EX_LINUX
 0x02

	)

31 
	#EX_XENON
 0x03

	)

32 
	#EX_PS3
 0x04

	)

38 #ià
defšed
 ( 
__EX_WIN32__
 ) || defšed ( 
WIN32
 ) || defšed ( 
_WIN32
 )

39 
	#EX_PLATFORM
 
EX_WIN32


	)

40 #–ià
defšed
 ( 
__EX_LINUX__
 )

41 
	#EX_PLATFORM
 
EX_LINUX


	)

42 #–ià
defšed
 ( 
__EX_XENON__
 )

43 
	#EX_PLATFORM
 
EX_XENON


	)

44 #–ià
defšed
 ( 
__EX_PS3__
 )

45 
	#EX_PLATFORM
 
EX_PS3


	)

47 
	#EX_PLATFORM
 
EX_UNKNOWN


	)

56 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 )

57 
	#EX_PLATFORM_NAME
 
exWš32


	)

58 #–iàĞ
EX_PLATFORM
 =ğ
EX_LINUX
 )

59 
	#EX_PLATFORM_NAME
 
exLšux


	)

60 #–iàĞ
EX_PLATFORM
 =ğ
EX_XENON
 )

61 
	#EX_PLATFORM_NAME
 
exX’Ú


	)

62 #–iàĞ
EX_PLATFORM
 =ğ
EX_PS3
 )

63 
	#EX_PLATFORM_NAME
 
exPS3


	)

65 
	#EX_PLATFORM_NAME
 
exUnknown


	)

72 #ià
defšed
 ( 
DEBUG
 ) || defšed ( 
_DEBUG
 ) || defšed ( 
__EX_DEBUG__
 )

73 
	#EX_DEBUG


	)

74 #–ià
defšed
 ( 
RELEASE
 ) || defšed ( 
_RELEASE
 ) || defšed ( 
__EX_RELEASE__
 )

75 
	#EX_RELEASE


	)

82 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 )

83 
	#EX_UNICODE_PLATFORM
 1

	)

84 #–iàĞ
EX_PLATFORM
 =ğ
EX_LINUX
 )

85 
	#EX_UNICODE_PLATFORM
 1

	)

86 #–iàĞ
EX_PLATFORM
 =ğ
EX_XENON
 )

87 
	#EX_UNICODE_PLATFORM
 0

	)

88 #–iàĞ
EX_PLATFORM
 =ğ
EX_PS3
 )

89 
	#EX_UNICODE_PLATFORM
 0

	)

96 #ià
defšed
 ( 
UNICODE
 ) || defšed ( 
_UNICODE
 )

97 
	#EX_USE_UNICODE
 1

	)

99 
	#EX_USE_UNICODE
 0

	)

108 
	#EX_LITTLE_ENDIAN
 0

	)

109 
	#EX_BIG_ENDIAN
 1

	)

111 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 )

112 
	#EX_ENDIAN
 
EX_LITTLE_ENDIAN


	)

113 #–iàĞ
EX_PLATFORM
 =ğ
EX_LINUX
 )

114 
	#EX_ENDIAN
 
EX_LITTLE_ENDIAN


	)

115 #–iàĞ
EX_PLATFORM
 =ğ
EX_XENON
 )

116 
	#EX_ENDIAN
 
EX_BIG_ENDIAN


	)

117 #–iàĞ
EX_PLATFORM
 =ğ
EX_PS3
 )

118 
	#EX_ENDIAN
 
EX_BIG_ENDIAN


	)

125 #ià
defšed
(
__EX_DLL__
è|| defšed (
_WINDLL
)

126 
	#EX_USE_DLL
 1

	)

133 #ià(
EX_USE_DLL
)

134 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 )

135 
	#EX_DLL_EXPORT
 
	`__deş¥ec
(
dÎexpÜt
)

	)

136 
	#EX_DLL_IMPORT
 
	`__deş¥ec
(
dÎimpÜt
)

	)

138 
	#EX_DLL_EXPORT


	)

139 
	#EX_DLL_IMPORT


	)

142 
	#EX_DLL_EXPORT


	)

143 
	#EX_DLL_IMPORT


	)

153 #iàĞ
defšed
(
__BYTE_ORDER
è&& defšed(
__LITTLE_ENDIAN
) && __BYTE_ORDER == __LITTLE_ENDIAN ) || \

154 Ğ
defšed
(
i386
è|| defšed(
__i386__
è|| defšed(
__i486__
è|| defšed(
__i586__
è|| defšed(
__i686__
è|| defšed(
vax
è|| 
	$defšed
(
MIPSEL
) )

156 #ifdeà
EX_ENDIAN


157 #undeà
EX_ENDIAN


159 
	#EX_ENDIAN
 
EX_LITTLE_ENDIAN


	)

160 #–iàĞ
	`defšed
(
__BYTE_ORDER
è&& defšed(
__BIG_ENDIAN
) && __BYTE_ORDER == __BIG_ENDIAN ) || \

161 Ğ
	`defšed
(
¥¬c
è|| defšed(
POWERPC
è|| defšed(
mc68000
è|| 
	$defšed
(
£l
) )

163 #ifdeà
EX_ENDIAN


164 #undeà
EX_ENDIAN


166 
	#EX_ENDIAN
 
EX_BIG_ENDIAN


	)

	@core\global\types.h

9 #iâdeà
TYPES_H_1277512829


10 
	#TYPES_H_1277512829


	)

17 #iâdeà
__ılu¥lus


19 
	#boŞ
 

	)

20 
	#Œue
 1

	)

21 
	#çl£
 0

	)

24 
	#šlše
 
__šlše


	)

31 #iàĞ
EX_COMPILER
 =ğ
EX_MSVC
 )

38 sigÃd 
	tšt8
;

39 sigÃd 
	tšt16
;

40 sigÃd 
	tšt32
;

41 sigÃd 
	t__št64
 
	tšt64
;

47 
	tušt
;

48 
	tušt8
;

49 
	tušt16
;

50 
	tušt32
;

51 
	t__št64
 
	tušt64
;

57 #ifdeà
NULL


58 #undeà
NULL


60 
	#NULL
 0

	)

66 #´agm¨
w¬nšg
Ğ
push
 )

67 #´agm¨
w¬nšg
Ğ
di§bË
 : 4309 )

69 
	#EX_INT8_MIN
 = 0x80;

70 
	#EX_INT8_MAX
 = 0x7F;

	)

71 
	#EX_UINT8_MIN
 = 0x00;

	)

72 
	#EX_UINT8_MAX
 = 0xFF;

	)

73 
	#EX_INT16_MIN
 = 0x8000;

74 
	#EX_INT16_MAX
 = 0x7FFF;

	)

75 
	#EX_UINT16_MIN
 = 0x0000;

	)

76 
	#EX_UINT16_MAX
 = 0xFFFF;

	)

77 
	#EX_INT32_MIN
 = 0x80000000;

	)

78 
	#EX_INT32_MAX
 = 0x7FFFFFFF;

	)

79 
	#EX_UINT32_MIN
 = 0x00000000;

	)

80 
	#EX_UINT32_MAX
 = 0xFFFFFFFF;

	)

81 
	#EX_INT64_MIN
 = 0x8000000000000000;

	)

82 
	#EX_INT64_MAX
 = 0x7FFFFFFFFFFFFFFF;

	)

83 
	#EX_UINT64_MIN
 = 0x0000000000000000;

	)

84 
	#EX_UINT64_MAX
 = 0xFFFFFFFFFFFFFFFF;

	)

85 
	#EX_FLOAT_MIN
 = 1.175494351E-38F;

	)

86 
	#EX_FLOAT_MAX
 = 3.402823466E+38F;

	)

87 
	#EX_DOUBLE_MIN
 = 2.2250738585072014E-308;

	)

88 
	#EX_DOUBLE_MAX
 = 1.7976931348623158E+308;

	)

90 #´agm¨
w¬nšg
Ğ
pİ
 )

92 #–iàĞ
EX_COMPILER
 =ğ
EX_GCC
 )

103 sigÃd 
	tšt8
;

104 sigÃd 
	tšt16
;

105 sigÃd 
	tšt32
;

106 sigÃd 
	tšt64
;

112 
	tušt
;

113 
	tušt8
;

114 
	tušt16
;

115 
	tušt32
;

116 
	tušt64
;

122 #ifdeà
NULL


123 #undeà
NULL


125 
	#NULL
 0

	)

132 #undeà
__INT64_C


133 #undeà
__UINT64_C


136 #undeà
INT8_MIN


137 #undeà
INT16_MIN


138 #undeà
INT32_MIN


139 #undeà
INT64_MIN


140 #undeà
INT8_MAX


141 #undeà
INT16_MAX


142 #undeà
INT32_MAX


143 #undeà
INT64_MAX


144 #undeà
UINT8_MAX


145 #undeà
UINT16_MAX


146 #undeà
UINT32_MAX


147 #undeà
UINT64_MAX


149 #ià
__WORDSIZE
 == 64

150 
	#__INT64_C
(
c
èø## 
L


	)

151 
	#__UINT64_C
(
c
èø## 
UL


	)

153 
	#__INT64_C
(
c
èø## 
LL


	)

154 
	#__UINT64_C
(
c
èø## 
ULL


	)

160 
	#INT8_MIN
 (-128)

	)

161 
	#INT16_MIN
 (-32767-1)

	)

162 
	#INT32_MIN
 (-2147483647-1)

	)

163 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

165 
	#INT8_MAX
 (127)

	)

166 
	#INT16_MAX
 (32767)

	)

167 
	#INT32_MAX
 (2147483647)

	)

168 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

171 
	#UINT8_MAX
 (255)

	)

172 
	#UINT16_MAX
 (65535)

	)

173 
	#UINT32_MAX
 (4294967295U)

	)

174 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

177 
	#EX_INT8_MIN
 = 
INT8_MIN
;

	)

178 
	#EX_INT8_MAX
 = 
INT8_MAX
;

	)

179 
	#EX_UINT8_MIN
 = 0x00;

	)

180 
	#EX_UINT8_MAX
 = 
UINT8_MAX
;

	)

181 
	#EX_INT16_MIN
 = 
INT16_MIN
;

	)

182 
	#EX_INT16_MAX
 = 
INT16_MAX
;

	)

183 
	#EX_UINT16_MIN
 = 0x0000;

	)

184 
	#EX_UINT16_MAX
 = 
UINT16_MAX
;

	)

185 
	#EX_INT32_MIN
 = 
INT32_MIN
;

	)

186 
	#EX_INT32_MAX
 = 
INT32_MAX
;

	)

187 
	#EX_UINT32_MIN
 = 0x00000000;

	)

188 
	#EX_UINT32_MAX
 = 
UINT32_MAX
;

	)

189 
	#EX_INT64_MIN
 = 
INT64_MIN
;

	)

190 
	#EX_INT64_MAX
 = 
INT64_MAX
;

	)

191 
	#EX_UINT64_MIN
 = 0x0000000000000000;

	)

192 
	#EX_UINT64_MAX
 = 
UINT64_MAX
;

	)

193 
	#EX_FLOAT_MIN
 = 1.175494351E-38F;

	)

194 
	#EX_FLOAT_MAX
 = 3.402823466E+38F;

	)

195 
	#EX_DOUBLE_MIN
 = 2.2250738585072014E-308;

	)

196 
	#EX_DOUBLE_MAX
 = 1.7976931348623158E+308;

	)

	@core\memory\dlmalloc-2.8.4.c

484 
	#USE_DL_PREFIX


	)

488 #iâdeà
DLMALLOC_VERSION


489 
	#DLMALLOC_VERSION
 20804

	)

492 #iâdeà
WIN32


493 #ifdeà
_WIN32


494 
	#WIN32
 1

	)

496 #ifdeà
_WIN32_WCE


497 
	#LACKS_FCNTL_H


	)

498 
	#WIN32
 1

	)

501 #ifdeà
WIN32


502 
	#WIN32_LEAN_AND_MEAN


	)

503 
	~<wšdows.h
>

504 
	#HAVE_MMAP
 1

	)

505 
	#HAVE_MORECORE
 0

	)

506 
	#LACKS_UNISTD_H


	)

507 
	#LACKS_SYS_PARAM_H


	)

508 
	#LACKS_SYS_MMAN_H


	)

509 
	#LACKS_STRING_H


	)

510 
	#LACKS_STRINGS_H


	)

511 
	#LACKS_SYS_TYPES_H


	)

512 
	#LACKS_ERRNO_H


	)

513 #iâdeà
MALLOC_FAILURE_ACTION


514 
	#MALLOC_FAILURE_ACTION


	)

516 #ifdeà
_WIN32_WCE


517 
	#MMAP_CLEARS
 0

	)

519 
	#MMAP_CLEARS
 1

	)

523 #ià
defšed
(
DARWIN
è|| defšed(
_DARWIN
)

525 #iâdeà
HAVE_MORECORE


526 
	#HAVE_MORECORE
 0

	)

527 
	#HAVE_MMAP
 1

	)

529 #iâdeà
MALLOC_ALIGNMENT


530 
	#MALLOC_ALIGNMENT
 ((
size_t
)16U)

	)

535 #iâdeà
LACKS_SYS_TYPES_H


536 
	~<sys/ty³s.h
>

539 #ià(
defšed
(
__GNUC__
è&& ((defšed(
__i386__
è|| defšed(
__x86_64__
)))è|| (defšed(
_MSC_VER
) && _MSC_VER>=1310)

540 
	#SPIN_LOCKS_AVAILABLE
 1

	)

542 
	#SPIN_LOCKS_AVAILABLE
 0

	)

546 
	#MAX_SIZE_T
 (~(
size_t
)0)

	)

548 #iâdeà
ONLY_MSPACES


549 
	#ONLY_MSPACES
 0

	)

551 
	#ONLY_MSPACES
 1

	)

553 #iâdeà
MSPACES


554 #ià
ONLY_MSPACES


555 
	#MSPACES
 1

	)

557 
	#MSPACES
 0

	)

560 #iâdeà
MALLOC_ALIGNMENT


561 
	#MALLOC_ALIGNMENT
 ((
size_t
)8U)

	)

563 #iâdeà
FOOTERS


564 
	#FOOTERS
 0

	)

566 #iâdeà
ABORT


567 
	#ABORT
 
	`abÜt
()

	)

569 #iâdeà
ABORT_ON_ASSERT_FAILURE


570 
	#ABORT_ON_ASSERT_FAILURE
 1

	)

572 #iâdeà
PROCEED_ON_ERROR


573 
	#PROCEED_ON_ERROR
 0

	)

575 #iâdeà
USE_LOCKS


576 
	#USE_LOCKS
 0

	)

578 #iâdeà
USE_SPIN_LOCKS


579 #ià
USE_LOCKS
 && 
SPIN_LOCKS_AVAILABLE


580 
	#USE_SPIN_LOCKS
 1

	)

582 
	#USE_SPIN_LOCKS
 0

	)

585 #iâdeà
INSECURE


586 
	#INSECURE
 0

	)

588 #iâdeà
HAVE_MMAP


589 
	#HAVE_MMAP
 1

	)

591 #iâdeà
MMAP_CLEARS


592 
	#MMAP_CLEARS
 1

	)

594 #iâdeà
HAVE_MREMAP


595 #ifdeà
lšux


596 
	#HAVE_MREMAP
 1

	)

598 
	#HAVE_MREMAP
 0

	)

601 #iâdeà
MALLOC_FAILURE_ACTION


602 
	#MALLOC_FAILURE_ACTION
 
”ºo
 = 
ENOMEM
;

	)

604 #iâdeà
HAVE_MORECORE


605 #ià
ONLY_MSPACES


606 
	#HAVE_MORECORE
 0

	)

608 
	#HAVE_MORECORE
 1

	)

611 #ià!
HAVE_MORECORE


612 
	#MORECORE_CONTIGUOUS
 0

	)

614 
	#MORECORE_DEFAULT
 
sbrk


	)

615 #iâdeà
MORECORE_CONTIGUOUS


616 
	#MORECORE_CONTIGUOUS
 1

	)

619 #iâdeà
DEFAULT_GRANULARITY


620 #ià(
MORECORE_CONTIGUOUS
 || 
defšed
(
WIN32
))

621 
	#DEFAULT_GRANULARITY
 (0è

	)

623 
	#DEFAULT_GRANULARITY
 ((
size_t
)64U * (size_t)1024U)

	)

626 #iâdeà
DEFAULT_TRIM_THRESHOLD


627 #iâdeà
MORECORE_CANNOT_TRIM


628 
	#DEFAULT_TRIM_THRESHOLD
 ((
size_t
)2U * (size_t)1024U * (size_t)1024U)

	)

630 
	#DEFAULT_TRIM_THRESHOLD
 
MAX_SIZE_T


	)

633 #iâdeà
DEFAULT_MMAP_THRESHOLD


634 #ià
HAVE_MMAP


635 
	#DEFAULT_MMAP_THRESHOLD
 ((
size_t
)256U * (size_t)1024U)

	)

637 
	#DEFAULT_MMAP_THRESHOLD
 
MAX_SIZE_T


	)

640 #iâdeà
MAX_RELEASE_CHECK_RATE


641 #ià
HAVE_MMAP


642 
	#MAX_RELEASE_CHECK_RATE
 4095

	)

644 
	#MAX_RELEASE_CHECK_RATE
 
MAX_SIZE_T


	)

647 #iâdeà
USE_BUILTIN_FFS


648 
	#USE_BUILTIN_FFS
 0

	)

650 #iâdeà
USE_DEV_RANDOM


651 
	#USE_DEV_RANDOM
 0

	)

653 #iâdeà
NO_MALLINFO


654 
	#NO_MALLINFO
 0

	)

656 #iâdeà
MALLINFO_FIELD_TYPE


657 
	#MALLINFO_FIELD_TYPE
 
size_t


	)

659 #iâdeà
NO_SEGMENT_TRAVERSAL


660 
	#NO_SEGMENT_TRAVERSAL
 0

	)

670 
	#M_TRIM_THRESHOLD
 (-1)

	)

671 
	#M_GRANULARITY
 (-2)

	)

672 
	#M_MMAP_THRESHOLD
 (-3)

	)

676 #ià!
NO_MALLINFO


701 #ifdeà
HAVE_USR_INCLUDE_MALLOC_H


702 
	~"/u¤/šşude/m®loc.h
"

704 #iâdeà
STRUCT_MALLINFO_DECLARED


705 
	#STRUCT_MALLINFO_DECLARED
 1

	)

706 
	sm®lšfo
 {

707 
MALLINFO_FIELD_TYPE
 
	m¬’a
;

708 
MALLINFO_FIELD_TYPE
 
	mÜdblks
;

709 
MALLINFO_FIELD_TYPE
 
	msmblks
;

710 
MALLINFO_FIELD_TYPE
 
	mhblks
;

711 
MALLINFO_FIELD_TYPE
 
	mhblkhd
;

712 
MALLINFO_FIELD_TYPE
 
	musmblks
;

713 
MALLINFO_FIELD_TYPE
 
	mfsmblks
;

714 
MALLINFO_FIELD_TYPE
 
	muÜdblks
;

715 
MALLINFO_FIELD_TYPE
 
	mfÜdblks
;

716 
MALLINFO_FIELD_TYPE
 
	mk“pco¡
;

727 #iâdeà
FORCEINLINE


728 #ià
defšed
(
__GNUC__
)

729 
	#FORCEINLINE
 
__šlše
 
	`__©Œibu‹__
 ((
®ways_šlše
))

	)

730 #–ià
defšed
(
_MSC_VER
)

731 
	#FORCEINLINE
 
__fÜûšlše


	)

734 #iâdeà
NOINLINE


735 #ià
defšed
(
__GNUC__
)

736 
	#NOINLINE
 
	`__©Œibu‹__
 ((
nošlše
))

	)

737 #–ià
defšed
(
_MSC_VER
)

738 
	#NOINLINE
 
	`__deş¥ec
(
nošlše
)

	)

740 
	#NOINLINE


	)

744 #ifdeà
__ılu¥lus


746 #iâdeà
FORCEINLINE


747 
	#FORCEINLINE
 
šlše


	)

750 #iâdeà
FORCEINLINE


751 
	#FORCEINLINE


	)

754 #ià!
ONLY_MSPACES


758 #iâdeà
USE_DL_PREFIX


759 
	#dlÿÎoc
 
ÿÎoc


	)

760 
	#dlä“
 
ä“


	)

761 
	#dlm®loc
 
m®loc


	)

762 
	#dlmem®ign
 
mem®ign


	)

763 
	#dÌ—Îoc
 
»®loc


	)

764 
	#dlv®loc
 
v®loc


	)

765 
	#dÍv®loc
 
pv®loc


	)

766 
	#dlm®lšfo
 
m®lšfo


	)

767 
	#dlm®lİt
 
m®lİt


	)

768 
	#dlm®loc_Œim
 
m®loc_Œim


	)

769 
	#dlm®loc_¡©s
 
m®loc_¡©s


	)

770 
	#dlm®loc_u§bË_size
 
m®loc_u§bË_size


	)

771 
	#dlm®loc_foÙ´št
 
m®loc_foÙ´št


	)

772 
	#dlm®loc_max_foÙ´št
 
m®loc_max_foÙ´št


	)

773 
	#dlšd•’d’t_ÿÎoc
 
šd•’d’t_ÿÎoc


	)

774 
	#dlšd•’d’t_com®loc
 
šd•’d’t_com®loc


	)

792 * 
dlm®loc
(
size_t
);

801 
dlä“
(*);

808 * 
dlÿÎoc
(
size_t
, size_t);

833 * 
dÌ—Îoc
(*, 
size_t
);

847 * 
dlmem®ign
(
size_t
, size_t);

854 * 
dlv®loc
(
size_t
);

878 
dlm®lİt
(, );

889 
size_t
 
dlm®loc_foÙ´št
();

902 
size_t
 
dlm®loc_max_foÙ´št
();

904 #ià!
NO_MALLINFO


927 
m®lšfo
 
dlm®lšfo
();

982 ** 
dlšd•’d’t_ÿÎoc
(
size_t
, size_t, **);

1043 ** 
dlšd•’d’t_com®loc
(
size_t
, size_t*, **);

1051 * 
dÍv®loc
(
size_t
);

1074 
dlm®loc_Œim
(
size_t
);

1095 
dlm®loc_¡©s
();

1113 
size_t
 
dlm®loc_u§bË_size
(*);

1116 #ià
MSPACES


1122 * 
	tm¥aû
;

1135 
m¥aû
 
ü—‹_m¥aû
(
size_t
 
ÿ·c™y
, 
locked
);

1143 
size_t
 
de¡roy_m¥aû
(
m¥aû
 
m¥
);

1154 
m¥aû
 
ü—‹_m¥aû_w™h_ba£
(* 
ba£
, 
size_t
 
ÿ·c™y
, 
locked
);

1167 
m¥aû_Œack_Ïrge_chunks
(
m¥aû
 
m¥
, 
’abË
);

1174 * 
m¥aû_m®loc
(
m¥aû
 
m¥
, 
size_t
 
by‹s
);

1184 
m¥aû_ä“
(
m¥aû
 
m¥
, * 
mem
);

1195 * 
m¥aû_»®loc
(
m¥aû
 
m¥
, * 
mem
, 
size_t
 
Ãwsize
);

1201 * 
m¥aû_ÿÎoc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
, size_ˆ
–em_size
);

1207 * 
m¥aû_mem®ign
(
m¥aû
 
m¥
, 
size_t
 
®ignm’t
, size_ˆ
by‹s
);

1213 ** 
m¥aû_šd•’d’t_ÿÎoc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
,

1214 
size_t
 
–em_size
, * 
chunks
[]);

1220 ** 
m¥aû_šd•’d’t_com®loc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
,

1221 
size_t
 
sizes
[], * 
chunks
[]);

1227 
size_t
 
m¥aû_foÙ´št
(
m¥aû
 
m¥
);

1233 
size_t
 
m¥aû_max_foÙ´št
(
m¥aû
 
m¥
);

1236 #ià!
NO_MALLINFO


1241 
m®lšfo
 
m¥aû_m®lšfo
(
m¥aû
 
m¥
);

1247 
size_t
 
m¥aû_u§bË_size
(* 
mem
);

1253 
m¥aû_m®loc_¡©s
(
m¥aû
 
m¥
);

1259 
m¥aû_Œim
(
m¥aû
 
m¥
, 
size_t
 
·d
);

1264 
m¥aû_m®lİt
(, );

1268 #ifdeà
__ılu¥lus


1284 #ifdeà
WIN32


1285 #´agm¨
w¬nšg
Ğ
di§bË
 : 4146 )

1288 
	~<¡dio.h
>

1290 #iâdeà
LACKS_ERRNO_H


1291 
	~<”ºo.h
>

1293 #ià
FOOTERS
 || 
DEBUG


1294 
	~<time.h
>

1296 #iâdeà
LACKS_STDLIB_H


1297 
	~<¡dlib.h
>

1299 #ifdeà
DEBUG


1300 #ià
ABORT_ON_ASSERT_FAILURE


1301 #undeà
as£¹


1302 
	#as£¹
(
x
èif(!(x)è
ABORT


	)

1304 
	~<as£¹.h
>

1307 #iâdeà
as£¹


1308 
	#as£¹
(
x
)

	)

1310 
	#DEBUG
 0

	)

1312 #iâdeà
LACKS_STRING_H


1313 
	~<¡ršg.h
>

1315 #ià
USE_BUILTIN_FFS


1316 #iâdeà
LACKS_STRINGS_H


1317 
	~<¡ršgs.h
>

1320 #ià
HAVE_MMAP


1321 #iâdeà
LACKS_SYS_MMAN_H


1323 #ià(
defšed
(
lšux
è&& !defšed(
__USE_GNU
))

1324 
	#__USE_GNU
 1

	)

1325 
	~<sys/mmª.h
>

1326 #undeà
__USE_GNU


1328 
	~<sys/mmª.h
>

1331 #iâdeà
LACKS_FCNTL_H


1332 
	~<fú.h
>

1335 #iâdeà
LACKS_UNISTD_H


1336 
	~<uni¡d.h
>

1338 #ià!
defšed
(
__F»eBSD__
è&& !defšed(
__O³nBSD__
è&& !defšed(
__N‘BSD__
)

1339 * 
sbrk
(
±rdiff_t
);

1344 #ià
USE_LOCKS


1345 #iâdeà
WIN32


1346 
	~<±h»ad.h
>

1347 #ià
defšed
 (
__SVR4
è&& defšed (
__sun
)

1348 
	~<th»ad.h
>

1351 #iâdeà
_M_AMD64


1353 #ifdeà
__ılu¥lus


1356 
LONG
 
__cdeş
 
_IÁ”lockedCom·»Exchªge
(LONG vŞ©*
De¡
, LONG 
Exchªge
, LONG 
Comp
);

1357 
LONG
 
__cdeş
 
_IÁ”lockedExchªge
(LONG vŞ©*
T¬g‘
, LONG 
V®ue
);

1358 #ifdeà
__ılu¥lus


1362 #´agm¨
šŒšsic
 (
_IÁ”lockedCom·»Exchªge
)

1363 #´agm¨
šŒšsic
 (
_IÁ”lockedExchªge
)

1364 
	#š‹¾ockedcom·»exchªge
 
_IÁ”lockedCom·»Exchªge


	)

1365 
	#š‹¾ockedexchªge
 
_IÁ”lockedExchªge


	)

1370 #ià
defšed
(
_MSC_VER
) && _MSC_VER>=1300

1371 #iâdeà
B™SÿnFÜw¬d


1372 #ifdeà
__ılu¥lus


1375 
_B™SÿnFÜw¬d
(*
šdex
, 
mask
);

1376 
_B™SÿnRev”£
(*
šdex
, 
mask
);

1377 #ifdeà
__ılu¥lus


1381 
	#B™SÿnFÜw¬d
 
_B™SÿnFÜw¬d


	)

1382 
	#B™SÿnRev”£
 
_B™SÿnRev”£


	)

1383 #´agm¨
šŒšsic
(
_B™SÿnFÜw¬d
)

1384 #´agm¨
šŒšsic
(
_B™SÿnRev”£
)

1388 #iâdeà
WIN32


1389 #iâdeà
m®loc_g‘·gesize


1390 #ifdeà
_SC_PAGESIZE


1391 #iâdeà
_SC_PAGE_SIZE


1392 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

1395 #ifdeà
_SC_PAGE_SIZE


1396 
	#m®loc_g‘·gesize
 
	`syscÚf
(
_SC_PAGE_SIZE
)

	)

1398 #ià
defšed
(
BSD
è|| defšed(
DGUX
è|| defšed(
HAVE_GETPAGESIZE
)

1399 
size_t
 
g‘·gesize
();

1400 
	#m®loc_g‘·gesize
 
	`g‘·gesize
()

	)

1402 #ifdeà
WIN32


1403 
	#m®loc_g‘·gesize
 
	`g‘·gesize
()

	)

1405 #iâdeà
LACKS_SYS_PARAM_H


1406 
	~<sys/·¿m.h
>

1408 #ifdeà
EXEC_PAGESIZE


1409 
	#m®loc_g‘·gesize
 
EXEC_PAGESIZE


	)

1411 #ifdeà
NBPG


1412 #iâdeà
CLSIZE


1413 
	#m®loc_g‘·gesize
 
NBPG


	)

1415 
	#m®loc_g‘·gesize
 (
NBPG
 * 
CLSIZE
)

	)

1418 #ifdeà
NBPC


1419 
	#m®loc_g‘·gesize
 
NBPC


	)

1421 #ifdeà
PAGESIZE


1422 
	#m®loc_g‘·gesize
 
PAGESIZE


	)

1424 
	#m®loc_g‘·gesize
 ((
size_t
)4096U)

	)

1440 
	#SIZE_T_SIZE
 ((
size_t
))

	)

1441 
	#SIZE_T_BITSIZE
 ((
size_t
è<< 3)

	)

1445 
	#SIZE_T_ZERO
 ((
size_t
)0)

	)

1446 
	#SIZE_T_ONE
 ((
size_t
)1)

	)

1447 
	#SIZE_T_TWO
 ((
size_t
)2)

	)

1448 
	#SIZE_T_FOUR
 ((
size_t
)4)

	)

1449 
	#TWO_SIZE_T_SIZES
 (
SIZE_T_SIZE
<<1)

	)

1450 
	#FOUR_SIZE_T_SIZES
 (
SIZE_T_SIZE
<<2)

	)

1451 
	#SIX_SIZE_T_SIZES
 (
FOUR_SIZE_T_SIZES
+
TWO_SIZE_T_SIZES
)

	)

1452 
	#HALF_MAX_SIZE_T
 (
MAX_SIZE_T
 / 2U)

	)

1455 
	#CHUNK_ALIGN_MASK
 (
MALLOC_ALIGNMENT
 - 
SIZE_T_ONE
)

	)

1458 
	#is_®igÃd
(
A
è(((
size_t
)((A)è& (
CHUNK_ALIGN_MASK
)è=ğ0)

	)

1461 
	#®ign_off£t
(
A
)\

1462 ((((
size_t
)(
A
è& 
CHUNK_ALIGN_MASK
) == 0)? 0 :\

1463 ((
MALLOC_ALIGNMENT
 - ((
size_t
)(
A
è& 
CHUNK_ALIGN_MASK
)è& CHUNK_ALIGN_MASK))

	)

1475 
	#MFAIL
 ((*)(
MAX_SIZE_T
))

	)

1476 
	#CMFAIL
 ((*)(
MFAIL
)è

	)

1478 #ià
HAVE_MMAP


1480 #iâdeà
WIN32


1481 
	#MUNMAP_DEFAULT
(
a
, 
s
è
	`munm­
(×), (s))

	)

1482 
	#MMAP_PROT
 (
PROT_READ
|
PROT_WRITE
)

	)

1483 #ià!
defšed
(
MAP_ANONYMOUS
è&& defšed(
MAP_ANON
)

1484 
	#MAP_ANONYMOUS
 
MAP_ANON


	)

1486 #ifdeà
MAP_ANONYMOUS


1487 
	#MMAP_FLAGS
 (
MAP_PRIVATE
|
MAP_ANONYMOUS
)

	)

1488 
	#MMAP_DEFAULT
(
s
è
	`mm­
(0, (s), 
MMAP_PROT
, 
MMAP_FLAGS
, -1, 0)

	)

1494 
	#MMAP_FLAGS
 (
MAP_PRIVATE
)

	)

1495 
	gdev_z”o_fd
 = -1;

1496 
	#MMAP_DEFAULT
(
s
è((
dev_z”o_fd
 < 0) ? \

1497 (
dev_z”o_fd
 = 
	`İ’
("/dev/z”o", 
O_RDWR
), \

1498 
	`mm­
(0, (
s
), 
MMAP_PROT
, 
MMAP_FLAGS
, 
dev_z”o_fd
, 0)) : \

1499 
	`mm­
(0, (
s
), 
MMAP_PROT
, 
MMAP_FLAGS
, 
dev_z”o_fd
, 0))

	)

1502 
	#DIRECT_MMAP_DEFAULT
(
s
è
	`MMAP_DEFAULT
(s)

	)

1507 
FORCEINLINE
 * 
wš32mm­
(
size_t
 
size
) {

1508 * 
	g±r
 = 
Vœtu®AÎoc
(0, 
size
, 
MEM_RESERVE
|
MEM_COMMIT
, 
PAGE_READWRITE
);

1509  (
	g±r
 !ğ0)? 
±r
: 
MFAIL
;

1513 
FORCEINLINE
 * 
wš32dœeù_mm­
(
size_t
 
size
) {

1514 * 
	g±r
 = 
Vœtu®AÎoc
(0, 
size
, 
MEM_RESERVE
|
MEM_COMMIT
|
MEM_TOP_DOWN
,

1515 
PAGE_READWRITE
);

1516  (
	g±r
 !ğ0)? 
±r
: 
MFAIL
;

1520 
FORCEINLINE
 
wš32munm­
(* 
±r
, 
size_t
 
size
) {

1521 
MEMORY_BASIC_INFORMATION
 
	gmšfo
;

1522 * 
	gıŒ
 = (*)
±r
;

1523 
	gsize
) {

1524 ià(
Vœtu®Qu”y
(
ıŒ
, &
mšfo
, (minfo)) == 0)

1526 ià(
	gmšfo
.
	gBa£Add»ss
 !ğ
ıŒ
 || 
mšfo
.
AÎoÿtiÚBa£
 != cptr ||

1527 
mšfo
.
S‹
 !ğ
MEM_COMMIT
 || mšfo.
RegiÚSize
 > 
size
)

1529 ià(
Vœtu®F»e
(
ıŒ
, 0, 
MEM_RELEASE
) == 0)

1531 
	gıŒ
 +ğ
mšfo
.
RegiÚSize
;

1532 
	gsize
 -ğ
mšfo
.
RegiÚSize
;

1537 
	#MMAP_DEFAULT
(
s
è
	`wš32mm­
(s)

	)

1538 
	#MUNMAP_DEFAULT
(
a
, 
s
è
	`wš32munm­
(×), (s))

	)

1539 
	#DIRECT_MMAP_DEFAULT
(
s
è
	`wš32dœeù_mm­
(s)

	)

1543 #ià
HAVE_MREMAP


1544 #iâdeà
WIN32


1545 
	#MREMAP_DEFAULT
(
addr
, 
osz
, 
nsz
, 
mv
è
	`m»m­
(×ddr), (osz), (nsz), (mv))

	)

1553 #ià
HAVE_MORECORE


1554 #ifdeà
MORECORE


1555 
	#CALL_MORECORE
(
S
è
	`MORECORE
(S)

	)

1557 
	#CALL_MORECORE
(
S
è
	`MORECORE_DEFAULT
(S)

	)

1560 
	#CALL_MORECORE
(
S
è
MFAIL


	)

1566 #ià
HAVE_MMAP


1567 
	#USE_MMAP_BIT
 (
SIZE_T_ONE
)

	)

1569 #ifdeà
MMAP


1570 
	#CALL_MMAP
(
s
è
	`MMAP
(s)

	)

1572 
	#CALL_MMAP
(
s
è
	`MMAP_DEFAULT
(s)

	)

1574 #ifdeà
MUNMAP


1575 
	#CALL_MUNMAP
(
a
, 
s
è
	`MUNMAP
(×), (s))

	)

1577 
	#CALL_MUNMAP
(
a
, 
s
è
	`MUNMAP_DEFAULT
(×), (s))

	)

1579 #ifdeà
DIRECT_MMAP


1580 
	#CALL_DIRECT_MMAP
(
s
è
	`DIRECT_MMAP
(s)

	)

1582 
	#CALL_DIRECT_MMAP
(
s
è
	`DIRECT_MMAP_DEFAULT
(s)

	)

1585 
	#USE_MMAP_BIT
 (
SIZE_T_ZERO
)

	)

1587 
	#MMAP
(
s
è
MFAIL


	)

1588 
	#MUNMAP
(
a
, 
s
è(-1)

	)

1589 
	#DIRECT_MMAP
(
s
è
MFAIL


	)

1590 
	#CALL_DIRECT_MMAP
(
s
è
	`DIRECT_MMAP
(s)

	)

1591 
	#CALL_MMAP
(
s
è
	`MMAP
(s)

	)

1592 
	#CALL_MUNMAP
(
a
, 
s
è
	`MUNMAP
(×), (s))

	)

1598 #ià
HAVE_MMAP
 && 
HAVE_MREMAP


1599 #ifdeà
MREMAP


1600 
	#CALL_MREMAP
(
addr
, 
osz
, 
nsz
, 
mv
è
	`MREMAP
(×ddr), (osz), (nsz), (mv))

	)

1602 
	#CALL_MREMAP
(
addr
, 
osz
, 
nsz
, 
mv
è
	`MREMAP_DEFAULT
(×ddr), (osz), (nsz), (mv))

	)

1605 
	#CALL_MREMAP
(
addr
, 
osz
, 
nsz
, 
mv
è
MFAIL


	)

1609 
	#USE_NONCONTIGUOUS_BIT
 (4U)

	)

1612 
	#EXTERN_BIT
 (8U)

	)

1647 #ià
USE_LOCKS
 == 1

1649 #ià
USE_SPIN_LOCKS
 && 
SPIN_LOCKS_AVAILABLE


1650 #iâdeà
WIN32


1653 
	s±h»ad_mlock_t
 {

1654 vŞ©
	gl
;

1655 
	gc
;

1656 
±h»ad_t
 
	gth»adid
;

1658 
	#MLOCK_T
 
±h»ad_mlock_t


	)

1659 
	#CURRENT_THREAD
 
	`±h»ad_£lf
()

	)

1660 
	#INITIAL_LOCK
(
¦
è((¦)->
th»adid
 = 0, (¦)->
l
 = (¦)->
c
 = 0, 0)

	)

1661 
	#ACQUIRE_LOCK
(
¦
è
	`±h»ad_acquœe_lock
(¦)

	)

1662 
	#RELEASE_LOCK
(
¦
è
	`±h»ad_»Ëa£_lock
(¦)

	)

1663 
	#TRY_LOCK
(
¦
è
	`±h»ad_Œy_lock
(¦)

	)

1664 
	#SPINS_PER_YIELD
 63

	)

1666 
MLOCK_T
 
	gm®loc_glob®_mu‹x
 = { 0, 0, 0};

1668 
FORCEINLINE
 
±h»ad_acquœe_lock
 (
MLOCK_T
 *
¦
) {

1669 
	g¥šs
 = 0;

1670 vŞ©* 
	gÍ
 = &
¦
->
l
;

1672 ià(*
	gÍ
 != 0) {

1673 ià(
¦
->
th»adid
 =ğ
CURRENT_THREAD
) {

1674 ++
¦
->
c
;

1680 
	gcmp
 = 0;

1681 
	gv®
 = 1;

1682 
	g»t
;

1683 
__asm__
 
__vŞ©e__
 ("lock; cmpxchgl %1, %2"

1684 : "÷" (
»t
)

1685 : "r" (
v®
), "m" (*(
Í
)), "0"(
cmp
)

1687 ià(!
	g»t
) {

1688 
as£¹
(!
¦
->
th»adid
);

1689 
	g¦
->
	gth»adid
 = 
CURRENT_THREAD
;

1690 
	g¦
->
	gc
 = 1;

1694 ià((++
	g¥šs
 & 
	gSPINS_PER_YIELD
) == 0) {

1695 #ià
defšed
 (
__SVR4
è&& defšed (
__sun
)

1696 
thr_y›ld
();

1698 #ià
defšed
(
__lšux__
è|| defšed(
__F»eBSD__
è|| defšed(
__APPLE__
)

1699 
sched_y›ld
();

1708 
FORCEINLINE
 
±h»ad_»Ëa£_lock
 (
MLOCK_T
 *
¦
) {

1709 vŞ©* 
	gÍ
 = &
¦
->
l
;

1710 
as£¹
(*
Í
 != 0);

1711 
as£¹
(
¦
->
th»adid
 =ğ
CURRENT_THREAD
);

1712 ià(--
	g¦
->
	gc
 == 0) {

1713 
¦
->
th»adid
 = 0;

1714 
	g´ev
 = 0;

1715 
	g»t
;

1716 
__asm__
 
__vŞ©e__
 ("lock; xchgl %0, %1"

1717 : "ô" (
»t
)

1718 : "m" (*(
Í
)), "0"(
´ev
)

1723 
FORCEINLINE
 
±h»ad_Œy_lock
 (
MLOCK_T
 *
¦
) {

1724 vŞ©* 
	gÍ
 = &
¦
->
l
;

1725 ià(*
	gÍ
 != 0) {

1726 ià(
¦
->
th»adid
 =ğ
CURRENT_THREAD
) {

1727 ++
¦
->
c
;

1732 
	gcmp
 = 0;

1733 
	gv®
 = 1;

1734 
	g»t
;

1735 
__asm__
 
__vŞ©e__
 ("lock; cmpxchgl %1, %2"

1736 : "÷" (
»t
)

1737 : "r" (
v®
), "m" (*(
Í
)), "0"(
cmp
)

1739 ià(!
	g»t
) {

1740 
as£¹
(!
¦
->
th»adid
);

1741 
	g¦
->
	gth»adid
 = 
CURRENT_THREAD
;

1742 
	g¦
->
	gc
 = 1;

1752 
	swš32_mlock_t
 {

1753 vŞ©
	gl
;

1754 
	gc
;

1755 
	gth»adid
;

1758 
	#MLOCK_T
 
wš32_mlock_t


	)

1759 
	#CURRENT_THREAD
 
	`G‘Cu¼’tTh»adId
()

	)

1760 
	#INITIAL_LOCK
(
¦
è((¦)->
th»adid
 = 0, (¦)->
l
 = (¦)->
c
 = 0, 0)

	)

1761 
	#ACQUIRE_LOCK
(
¦
è
	`wš32_acquœe_lock
(¦)

	)

1762 
	#RELEASE_LOCK
(
¦
è
	`wš32_»Ëa£_lock
(¦)

	)

1763 
	#TRY_LOCK
(
¦
è
	`wš32_Œy_lock
(¦)

	)

1764 
	#SPINS_PER_YIELD
 63

	)

1766 
MLOCK_T
 
	gm®loc_glob®_mu‹x
 = { 0, 0, 0};

1768 
FORCEINLINE
 
wš32_acquœe_lock
 (
MLOCK_T
 *
¦
) {

1769 
	g¥šs
 = 0;

1771 ià(
	g¦
->
	gl
 != 0) {

1772 ià(
¦
->
th»adid
 =ğ
CURRENT_THREAD
) {

1773 ++
¦
->
c
;

1778 ià(!
š‹¾ockedexchªge
(&
¦
->
l
, 1)) {

1779 
as£¹
(!
¦
->
th»adid
);

1780 
	g¦
->
	gth»adid
 = 
CURRENT_THREAD
;

1781 
	g¦
->
	gc
 = 1;

1785 ià((++
	g¥šs
 & 
	gSPINS_PER_YIELD
) == 0)

1786 
SË•Ex
(0, 
FALSE
);

1790 
FORCEINLINE
 
wš32_»Ëa£_lock
 (
MLOCK_T
 *
¦
) {

1791 
as£¹
(
¦
->
th»adid
 =ğ
CURRENT_THREAD
);

1792 
as£¹
(
¦
->
l
 != 0);

1793 ià(--
	g¦
->
	gc
 == 0) {

1794 
¦
->
th»adid
 = 0;

1795 
š‹¾ockedexchªge
 (&
¦
->
l
, 0);

1799 
FORCEINLINE
 
wš32_Œy_lock
 (
MLOCK_T
 *
¦
) {

1800 ià(
	g¦
->
	gl
 != 0) {

1801 ià(
¦
->
th»adid
 =ğ
CURRENT_THREAD
) {

1802 ++
¦
->
c
;

1807 ià(!
š‹¾ockedexchªge
(&
¦
->
l
, 1)){

1808 
as£¹
(!
¦
->
th»adid
);

1809 
	g¦
->
	gth»adid
 = 
CURRENT_THREAD
;

1810 
	g¦
->
	gc
 = 1;

1820 #iâdeà
WIN32


1823 
	#MLOCK_T
 
±h»ad_mu‹x_t


	)

1824 
	#CURRENT_THREAD
 
	`±h»ad_£lf
()

	)

1825 
	#INITIAL_LOCK
(
¦
è
	`±h»ad_š™_lock
(¦)

	)

1826 
	#ACQUIRE_LOCK
(
¦
è
	`±h»ad_mu‹x_lock
(¦)

	)

1827 
	#RELEASE_LOCK
(
¦
è
	`±h»ad_mu‹x_uÆock
(¦)

	)

1828 
	#TRY_LOCK
(
¦
è(!
	`±h»ad_mu‹x_Œylock
(¦))

	)

1830 
MLOCK_T
 
	gm®loc_glob®_mu‹x
 = 
PTHREAD_MUTEX_INITIALIZER
;

1834 #ifdeà
lšux


1835 #iâdeà
PTHREAD_MUTEX_RECURSIVE


1836 
±h»ad_mu‹x©Œ_£tkšd_Å
 
__P
 ((
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

1837 
__kšd
));

1838 
	#PTHREAD_MUTEX_RECURSIVE
 
PTHREAD_MUTEX_RECURSIVE_NP


	)

1839 
	#±h»ad_mu‹x©Œ_£‰y³
(
x
,
y
è
	`±h»ad_mu‹x©Œ_£tkšd_Å
(x,y)

	)

1843 
±h»ad_š™_lock
 (
MLOCK_T
 *
¦
) {

1844 
±h»ad_mu‹x©Œ_t
 
	g©Œ
;

1845 ià(
±h»ad_mu‹x©Œ_š™
(&
©Œ
))  1;

1846 ià(
±h»ad_mu‹x©Œ_£‰y³
(&
©Œ
, 
PTHREAD_MUTEX_RECURSIVE
))  1;

1847 ià(
±h»ad_mu‹x_š™
(
¦
, &
©Œ
))  1;

1848 ià(
±h»ad_mu‹x©Œ_de¡roy
(&
©Œ
))  1;

1854 
	#MLOCK_T
 
CRITICAL_SECTION


	)

1855 
	#CURRENT_THREAD
 
	`G‘Cu¼’tTh»adId
()

	)

1856 
	#INITIAL_LOCK
(
s
è(!
	`In™ŸlizeCr™iÿlSeùiÚAndSpšCouÁ
((s), 0x80000000|4000))

	)

1857 
	#ACQUIRE_LOCK
(
s
è(
	`EÁ”Cr™iÿlSeùiÚ
(
¦
), 0)

	)

1858 
	#RELEASE_LOCK
(
s
è
	`L—veCr™iÿlSeùiÚ
(
¦
)

	)

1859 
	#TRY_LOCK
(
s
è
	`TryEÁ”Cr™iÿlSeùiÚ
(
¦
)

	)

1860 
	#NEED_GLOBAL_LOCK_INIT


	)

1862 
MLOCK_T
 
	gm®loc_glob®_mu‹x
;

1863 vŞ©
	gm®loc_glob®_mu‹x_¡©us
;

1866 
š™_m®loc_glob®_mu‹x
() {

1868 
	g¡©
 = 
m®loc_glob®_mu‹x_¡©us
;

1869 ià(
	g¡©
 > 0)

1872 ià(
	g¡©
 == 0 &&

1873 
š‹¾ockedcom·»exchªge
(&
m®loc_glob®_mu‹x_¡©us
, -1, 0) == 0) {

1874 
In™ŸlizeCr™iÿlSeùiÚ
(&
m®loc_glob®_mu‹x
);

1875 
š‹¾ockedexchªge
(&
m®loc_glob®_mu‹x_¡©us
,1);

1878 
SË•Ex
(0, 
FALSE
);

1888 #ià
USE_LOCKS
 > 1

1899 #ià
USE_LOCKS


1900 
	#USE_LOCK_BIT
 (2U)

	)

1902 
	#USE_LOCK_BIT
 (0U)

	)

1903 
	#INITIAL_LOCK
(
l
)

	)

1906 #ià
USE_LOCKS


1907 #iâdeà
ACQUIRE_MALLOC_GLOBAL_LOCK


1908 
	#ACQUIRE_MALLOC_GLOBAL_LOCK
(è
	`ACQUIRE_LOCK
(&
m®loc_glob®_mu‹x
);

	)

1910 #iâdeà
RELEASE_MALLOC_GLOBAL_LOCK


1911 
	#RELEASE_MALLOC_GLOBAL_LOCK
(è
	`RELEASE_LOCK
(&
m®loc_glob®_mu‹x
);

	)

1914 
	#ACQUIRE_MALLOC_GLOBAL_LOCK
()

	)

1915 
	#RELEASE_MALLOC_GLOBAL_LOCK
()

	)

2056 
	sm®loc_chunk
 {

2057 
size_t
 
	g´ev_foÙ
;

2058 
size_t
 
	gh—d
;

2059 
m®loc_chunk
* 
	gfd
;

2060 
m®loc_chunk
* 
	gbk
;

2063 
m®loc_chunk
 
	tmchunk
;

2064 
m®loc_chunk
* 
	tmchunk±r
;

2065 
m®loc_chunk
* 
	tsbš±r
;

2066 
	tbšdex_t
;

2067 
	tbšm­_t
;

2068 
	tæag_t
;

2072 
	#MCHUNK_SIZE
 ((
mchunk
))

	)

2074 #ià
FOOTERS


2075 
	#CHUNK_OVERHEAD
 (
TWO_SIZE_T_SIZES
)

	)

2077 
	#CHUNK_OVERHEAD
 (
SIZE_T_SIZE
)

	)

2081 
	#MMAP_CHUNK_OVERHEAD
 (
TWO_SIZE_T_SIZES
)

	)

2083 
	#MMAP_FOOT_PAD
 (
FOUR_SIZE_T_SIZES
)

	)

2086 
	#MIN_CHUNK_SIZE
\

2087 ((
MCHUNK_SIZE
 + 
CHUNK_ALIGN_MASK
è& ~CHUNK_ALIGN_MASK)

	)

2090 
	#chunk2mem
(
p
è((*)((*)Õè+ 
TWO_SIZE_T_SIZES
))

	)

2091 
	#mem2chunk
(
mem
è((
mchunk±r
)((*)(memè- 
TWO_SIZE_T_SIZES
))

	)

2093 
	#®ign_as_chunk
(
A
è(
mchunk±r
)((Aè+ 
	`®ign_off£t
(
	`chunk2mem
(A)))

	)

2096 
	#MAX_REQUEST
 ((-
MIN_CHUNK_SIZE
è<< 2)

	)

2097 
	#MIN_REQUEST
 (
MIN_CHUNK_SIZE
 - 
CHUNK_OVERHEAD
 - 
SIZE_T_ONE
)

	)

2100 
	#·d_»que¡
(
»q
) \

2101 (((
»q
è+ 
CHUNK_OVERHEAD
 + 
CHUNK_ALIGN_MASK
è& ~CHUNK_ALIGN_MASK)

	)

2104 
	#»que¡2size
(
»q
) \

2105 (((
»q
è< 
MIN_REQUEST
)? 
MIN_CHUNK_SIZE
 : 
	`·d_»que¡
Ôeq))

	)

2118 
	#PINUSE_BIT
 (
SIZE_T_ONE
)

	)

2119 
	#CINUSE_BIT
 (
SIZE_T_TWO
)

	)

2120 
	#FLAG4_BIT
 (
SIZE_T_FOUR
)

	)

2121 
	#INUSE_BITS
 (
PINUSE_BIT
|
CINUSE_BIT
)

	)

2122 
	#FLAG_BITS
 (
PINUSE_BIT
|
CINUSE_BIT
|
FLAG4_BIT
)

	)

2125 
	#FENCEPOST_HEAD
 (
INUSE_BITS
|
SIZE_T_SIZE
)

	)

2128 
	#cšu£
(
p
è(Õ)->
h—d
 & 
CINUSE_BIT
)

	)

2129 
	#pšu£
(
p
è(Õ)->
h—d
 & 
PINUSE_BIT
)

	)

2130 
	#is_šu£
(
p
è((Õ)->
h—d
 & 
INUSE_BITS
è!ğ
PINUSE_BIT
)

	)

2131 
	#is_mm­³d
(
p
è((Õ)->
h—d
 & 
INUSE_BITS
è=ğ0)

	)

2133 
	#chunksize
(
p
è(Õ)->
h—d
 & ~(
FLAG_BITS
))

	)

2135 
	#ş—r_pšu£
(
p
è(Õ)->
h—d
 &ğ~
PINUSE_BIT
)

	)

2138 
	#chunk_¶us_off£t
(
p
, 
s
è((
mchunk±r
)(((*)Õ)è+ (s)))

	)

2139 
	#chunk_mšus_off£t
(
p
, 
s
è((
mchunk±r
)(((*)Õ)è- (s)))

	)

2142 
	#Ãxt_chunk
(
p
è((
mchunk±r
)Ğ((*)Õ)è+ (Õ)->
h—d
 & ~
FLAG_BITS
)))

	)

2143 
	#´ev_chunk
(
p
è((
mchunk±r
)Ğ((*)Õ)è- (Õ)->
´ev_foÙ
è))

	)

2146 
	#Ãxt_pšu£
(
p
è((
	`Ãxt_chunk
Õ)->
h—d
è& 
PINUSE_BIT
)

	)

2149 
	#g‘_foÙ
(
p
, 
s
è(((
mchunk±r
)((*)Õè+ (s)))->
´ev_foÙ
)

	)

2150 
	#£t_foÙ
(
p
, 
s
è(((
mchunk±r
)((*)Õè+ (s)))->
´ev_foÙ
 = (s))

	)

2153 
	#£t_size_ªd_pšu£_of_ä“_chunk
(
p
, 
s
)\

2154 ((
p
)->
h—d
 = (
s
|
PINUSE_BIT
), 
	`£t_foÙ
Õ, s))

	)

2157 
	#£t_ä“_w™h_pšu£
(
p
, 
s
, 
n
)\

2158 (
	`ş—r_pšu£
(
n
), 
	`£t_size_ªd_pšu£_of_ä“_chunk
(
p
, 
s
))

	)

2161 
	#ov”h—d_fÜ
(
p
)\

2162 (
	`is_mm­³d
(
p
)? 
MMAP_CHUNK_OVERHEAD
 : 
CHUNK_OVERHEAD
)

	)

2165 #ià
MMAP_CLEARS


2166 
	#ÿÎoc_mu¡_ş—r
(
p
è(!
	`is_mm­³d
Õ))

	)

2168 
	#ÿÎoc_mu¡_ş—r
(
p
è(1)

	)

2262 
	sm®loc_Œ“_chunk
 {

2264 
size_t
 
	g´ev_foÙ
;

2265 
size_t
 
	gh—d
;

2266 
m®loc_Œ“_chunk
* 
	gfd
;

2267 
m®loc_Œ“_chunk
* 
	gbk
;

2269 
m®loc_Œ“_chunk
* 
	gchd
[2];

2270 
m®loc_Œ“_chunk
* 
	g·»Á
;

2271 
bšdex_t
 
	gšdex
;

2274 
m®loc_Œ“_chunk
 
	ttchunk
;

2275 
m®loc_Œ“_chunk
* 
	ttchunk±r
;

2276 
m®loc_Œ“_chunk
* 
	ttbš±r
;

2279 
	#Ëámo¡_chd
(
t
è(Ñ)->
chd
[0] !ğ0? (t)->chd[0] : (t)->chd[1])

	)

2338 
	sm®loc_£gm’t
 {

2339 * 
	gba£
;

2340 
size_t
 
	gsize
;

2341 
m®loc_£gm’t
* 
	gÃxt
;

2342 
æag_t
 
	gsæags
;

2345 
	#is_mm­³d_£gm’t
(
S
è((S)->
sæags
 & 
USE_MMAP_BIT
)

	)

2346 
	#is_ex‹º_£gm’t
(
S
è((S)->
sæags
 & 
EXTERN_BIT
)

	)

2348 
m®loc_£gm’t
 
	tm£gm’t
;

2349 
m®loc_£gm’t
* 
	tm£gm’Œ
;

2436 
	#NSMALLBINS
 (32U)

	)

2437 
	#NTREEBINS
 (32U)

	)

2438 
	#SMALLBIN_SHIFT
 (3U)

	)

2439 
	#SMALLBIN_WIDTH
 (
SIZE_T_ONE
 << 
SMALLBIN_SHIFT
)

	)

2440 
	#TREEBIN_SHIFT
 (8U)

	)

2441 
	#MIN_LARGE_SIZE
 (
SIZE_T_ONE
 << 
TREEBIN_SHIFT
)

	)

2442 
	#MAX_SMALL_SIZE
 (
MIN_LARGE_SIZE
 - 
SIZE_T_ONE
)

	)

2443 
	#MAX_SMALL_REQUEST
 (
MAX_SMALL_SIZE
 - 
CHUNK_ALIGN_MASK
 - 
CHUNK_OVERHEAD
)

	)

2445 
	sm®loc_¡©e
 {

2446 
bšm­_t
 
	gsm®lm­
;

2447 
bšm­_t
 
	gŒ“m­
;

2448 
size_t
 
	gdvsize
;

2449 
size_t
 
	gtİsize
;

2450 * 
	gËa¡_addr
;

2451 
mchunk±r
 
	gdv
;

2452 
mchunk±r
 
	gtİ
;

2453 
size_t
 
	gŒim_check
;

2454 
size_t
 
	g»Ëa£_checks
;

2455 
size_t
 
	gmagic
;

2456 
mchunk±r
 
	gsm®lbšs
[(
NSMALLBINS
+1)*2];

2457 
tbš±r
 
	gŒ“bšs
[
NTREEBINS
];

2458 
size_t
 
	gfoÙ´št
;

2459 
size_t
 
	gmax_foÙ´št
;

2460 
æag_t
 
	gmæags
;

2461 #ià
USE_LOCKS


2462 
MLOCK_T
 
	gmu‹x
;

2464 
m£gm’t
 
	g£g
;

2465 * 
	gex
;

2466 
size_t
 
	gexts
;

2469 
m®loc_¡©e
* 
	tm¡©e
;

2480 
	sm®loc_·¿ms
 {

2481 vŞ©
size_t
 
	gmagic
;

2482 
size_t
 
	g·ge_size
;

2483 
size_t
 
	gg¿nuÏr™y
;

2484 
size_t
 
	gmm­_th»shŞd
;

2485 
size_t
 
	gŒim_th»shŞd
;

2486 
æag_t
 
	gdeçuÉ_mæags
;

2489 
m®loc_·¿ms
 
	gm·¿ms
;

2492 
	#’su»_š™Ÿliz©iÚ
(è()(
m·¿ms
.
magic
 !ğ0 || 
	`š™_m·¿ms
())

	)

2494 #ià!
ONLY_MSPACES


2497 
m®loc_¡©e
 
	g_gm_
;

2498 
	#gm
 (&
_gm_
)

	)

2499 
	#is_glob®
(
M
è((Mè=ğ&
_gm_
)

	)

2503 
	#is_š™Ÿlized
(
M
è((M)->
tİ
 !ğ0)

	)

2509 
	#u£_lock
(
M
è((M)->
mæags
 & 
USE_LOCK_BIT
)

	)

2510 
	#’abË_lock
(
M
è((M)->
mæags
 |ğ
USE_LOCK_BIT
)

	)

2511 
	#di§bË_lock
(
M
è((M)->
mæags
 &ğ~
USE_LOCK_BIT
)

	)

2513 
	#u£_mm­
(
M
è((M)->
mæags
 & 
USE_MMAP_BIT
)

	)

2514 
	#’abË_mm­
(
M
è((M)->
mæags
 |ğ
USE_MMAP_BIT
)

	)

2515 
	#di§bË_mm­
(
M
è((M)->
mæags
 &ğ~
USE_MMAP_BIT
)

	)

2517 
	#u£_nÚcÚtiguous
(
M
è((M)->
mæags
 & 
USE_NONCONTIGUOUS_BIT
)

	)

2518 
	#di§bË_cÚtiguous
(
M
è((M)->
mæags
 |ğ
USE_NONCONTIGUOUS_BIT
)

	)

2520 
	#£t_lock
(
M
,
L
)\

2521 ((
M
)->
mæags
 = (
L
)?\

2522 ((
M
)->
mæags
 | 
USE_LOCK_BIT
) :\

2523 ((
M
)->
mæags
 & ~
USE_LOCK_BIT
))

	)

2526 
	#·ge_®ign
(
S
)\

2527 (((
S
è+ (
m·¿ms
.
·ge_size
 - 
SIZE_T_ONE
)è& ~(m·¿ms.·ge_siz- SIZE_T_ONE))

	)

2530 
	#g¿nuÏr™y_®ign
(
S
)\

2531 (((
S
è+ (
m·¿ms
.
g¿nuÏr™y
 - 
SIZE_T_ONE
))\

2532 & ~(
m·¿ms
.
g¿nuÏr™y
 - 
SIZE_T_ONE
))

	)

2536 #ifdeà
WIN32


2537 
	#mm­_®ign
(
S
è
	`g¿nuÏr™y_®ign
(S)

	)

2539 
	#mm­_®ign
(
S
è
	`·ge_®ign
(S)

	)

2543 
	#SYS_ALLOC_PADDING
 (
TOP_FOOT_SIZE
 + 
MALLOC_ALIGNMENT
)

	)

2545 
	#is_·ge_®igÃd
(
S
)\

2546 (((
size_t
)(
S
è& (
m·¿ms
.
·ge_size
 - 
SIZE_T_ONE
)è=ğ0)

	)

2547 
	#is_g¿nuÏr™y_®igÃd
(
S
)\

2548 (((
size_t
)(
S
è& (
m·¿ms
.
g¿nuÏr™y
 - 
SIZE_T_ONE
)è=ğ0)

	)

2551 
	#£gm’t_hŞds
(
S
, 
A
)\

2552 ((*)(
A
è>ğ
S
->
ba£
 && (*)(Aè< S->ba£ + S->
size
)

	)

2555 
m£gm’Œ
 
£gm’t_hŞdšg
(
m¡©e
 
m
, * 
addr
) {

2556 
m£gm’Œ
 
	g¥
 = &
m
->
£g
;

2558 ià(
	gaddr
 >ğ
¥
->
ba£
 && 
addr
 < sp->ba£ + sp->
size
)

2559  
¥
;

2560 ià((
	g¥
 = 
¥
->
Ãxt
) == 0)

2566 
has_£gm’t_lšk
(
m¡©e
 
m
, 
m£gm’Œ
 
ss
) {

2567 
m£gm’Œ
 
	g¥
 = &
m
->
£g
;

2569 ià((*)
	g¥
 >ğ
ss
->
ba£
 && (*)
¥
 < ss->ba£ + ss->
size
)

2571 ià((
	g¥
 = 
¥
->
Ãxt
) == 0)

2576 #iâdeà
MORECORE_CANNOT_TRIM


2577 
	#should_Œim
(
M
,
s
è((sè> (M)->
Œim_check
)

	)

2579 
	#should_Œim
(
M
,
s
è(0)

	)

2587 
	#TOP_FOOT_SIZE
\

2588 (
	`®ign_off£t
(
	`chunk2mem
(0))+
	`·d_»que¡
((
m®loc_£gm’t
))+
MIN_CHUNK_SIZE
)

	)

2599 #ià
USE_LOCKS


2601 
	#PREACTION
(
M
è((
	`u£_lock
(M))? 
	`ACQUIRE_LOCK
(&(M)->
mu‹x
è: 0)

	)

2602 
	#POSTACTION
(
M
è{ ià(
	`u£_lock
(M)è
	`RELEASE_LOCK
(&(M)->
mu‹x
); }

	)

2605 #iâdeà
PREACTION


2606 
	#PREACTION
(
M
è(0)

	)

2609 #iâdeà
POSTACTION


2610 
	#POSTACTION
(
M
)

	)

2623 #ià
PROCEED_ON_ERROR


2626 
	gm®loc_cÜru±iÚ_”rÜ_couÁ
;

2629 
»£t_Ú_”rÜ
(
m¡©e
 
m
);

2631 
	#CORRUPTION_ERROR_ACTION
(
m
è
	`»£t_Ú_”rÜ
(m)

	)

2632 
	#USAGE_ERROR_ACTION
(
m
, 
p
)

	)

2636 #iâdeà
CORRUPTION_ERROR_ACTION


2637 
	#CORRUPTION_ERROR_ACTION
(
m
è
ABORT


	)

2640 #iâdeà
USAGE_ERROR_ACTION


2641 
	#USAGE_ERROR_ACTION
(
m
,
p
è
ABORT


	)

2648 #ià! 
DEBUG


2650 
	#check_ä“_chunk
(
M
,
P
)

	)

2651 
	#check_šu£_chunk
(
M
,
P
)

	)

2652 
	#check_m®loûd_chunk
(
M
,
P
,
N
)

	)

2653 
	#check_mm­³d_chunk
(
M
,
P
)

	)

2654 
	#check_m®loc_¡©e
(
M
)

	)

2655 
	#check_tİ_chunk
(
M
,
P
)

	)

2658 
	#check_ä“_chunk
(
M
,
P
è
	`do_check_ä“_chunk
(M,P)

	)

2659 
	#check_šu£_chunk
(
M
,
P
è
	`do_check_šu£_chunk
(M,P)

	)

2660 
	#check_tİ_chunk
(
M
,
P
è
	`do_check_tİ_chunk
(M,P)

	)

2661 
	#check_m®loûd_chunk
(
M
,
P
,
N
è
	`do_check_m®loûd_chunk
(M,P,N)

	)

2662 
	#check_mm­³d_chunk
(
M
,
P
è
	`do_check_mm­³d_chunk
(M,P)

	)

2663 
	#check_m®loc_¡©e
(
M
è
	`do_check_m®loc_¡©e
(M)

	)

2665 
do_check_ªy_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
);

2666 
do_check_tİ_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
);

2667 
do_check_mm­³d_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
);

2668 
do_check_šu£_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
);

2669 
do_check_ä“_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
);

2670 
do_check_m®loûd_chunk
(
m¡©e
 
m
, * 
mem
, 
size_t
 
s
);

2671 
do_check_Œ“
(
m¡©e
 
m
, 
tchunk±r
 
t
);

2672 
do_check_Œ“bš
(
m¡©e
 
m
, 
bšdex_t
 
i
);

2673 
do_check_sm®lbš
(
m¡©e
 
m
, 
bšdex_t
 
i
);

2674 
do_check_m®loc_¡©e
(
m¡©e
 
m
);

2675 
bš_fšd
(
m¡©e
 
m
, 
mchunk±r
 
x
);

2676 
size_t
 
Œav”£_ªd_check
(
m¡©e
 
m
);

2681 
	#is_sm®l
(
s
è(((sè>> 
SMALLBIN_SHIFT
è< 
NSMALLBINS
)

	)

2682 
	#sm®l_šdex
(
s
è((sè>> 
SMALLBIN_SHIFT
)

	)

2683 
	#sm®l_šdex2size
(
i
è((iè<< 
SMALLBIN_SHIFT
)

	)

2684 
	#MIN_SMALL_INDEX
 (
	`sm®l_šdex
(
MIN_CHUNK_SIZE
))

	)

2687 
	#sm®lbš_©
(
M
, 
i
è((
sbš±r
)((*)&((M)->
sm®lbšs
[(i)<<1])))

	)

2688 
	#Œ“bš_©
(
M
,
i
è(&((M)->
Œ“bšs
[i]))

	)

2691 #ià
defšed
(
__GNUC__
è&& (defšed(
__i386__
è|| defšed(
__x86_64__
))

2692 
	#compu‹_Œ“_šdex
(
S
, 
I
)\

2694 
X
 = 
S
 >> 
TREEBIN_SHIFT
;\

2695 ià(
X
 == 0)\

2696 
I
 = 0;\

2697 ià(
X
 > 0xFFFF)\

2698 
I
 = 
NTREEBINS
-1;\

2700 
K
;\

2701 
	`__asm__
("b¤l\t%1, %0\n\t" : "ô" (
K
è: "g" (
X
));\

2702 
I
 = (
bšdex_t
)((
K
 << 1è+ ((
S
 >> (K + (
TREEBIN_SHIFT
-1)) & 1)));\

2704 }

	)

2706 #–ià
defšed
 (
__INTEL_COMPILER
)

2707 
	#compu‹_Œ“_šdex
(
S
, 
I
)\

2709 
size_t
 
X
 = 
S
 >> 
TREEBIN_SHIFT
;\

2710 ià(
X
 == 0)\

2711 
I
 = 0;\

2712 ià(
X
 > 0xFFFF)\

2713 
I
 = 
NTREEBINS
-1;\

2715 
K
 = 
	`_b™_sÿn_»v”£
 (
X
); \

2716 
I
 = (
bšdex_t
)((
K
 << 1è+ ((
S
 >> (K + (
TREEBIN_SHIFT
-1)) & 1)));\

2718 }

	)

2720 #–ià
defšed
(
_MSC_VER
) && _MSC_VER>=1300

2721 
	#compu‹_Œ“_šdex
(
S
, 
I
)\

2723 
size_t
 
X
 = 
S
 >> 
TREEBIN_SHIFT
;\

2724 ià(
X
 == 0)\

2725 
I
 = 0;\

2726 ià(
X
 > 0xFFFF)\

2727 
I
 = 
NTREEBINS
-1;\

2729 
K
;\

2730 
	`_B™SÿnRev”£
((
DWORD
 *è&
K
, 
X
);\

2731 
I
 = (
bšdex_t
)((
K
 << 1è+ ((
S
 >> (K + (
TREEBIN_SHIFT
-1)) & 1)));\

2733 }

	)

2736 
	#compu‹_Œ“_šdex
(
S
, 
I
)\

2738 
size_t
 
X
 = 
S
 >> 
TREEBIN_SHIFT
;\

2739 ià(
X
 == 0)\

2740 
I
 = 0;\

2741 ià(
X
 > 0xFFFF)\

2742 
I
 = 
NTREEBINS
-1;\

2744 
Y
 = ()
X
;\

2745 
N
 = ((
Y
 - 0x100) >> 16) & 8;\

2746 
K
 = (((
Y
 <<ğ
N
) - 0x1000) >> 16) & 4;\

2747 
N
 +ğ
K
;\

2748 
N
 +ğ
K
 = (((
Y
 <<= K) - 0x4000) >> 16) & 2;\

2749 
K
 = 14 - 
N
 + ((
Y
 <<= K) >> 15);\

2750 
I
 = (
K
 << 1è+ ((
S
 >> (K + (
TREEBIN_SHIFT
-1)) & 1));\

2752 }

	)

2756 
	#b™_fÜ_Œ“_šdex
(
i
) \

2757 (
i
 =ğ
NTREEBINS
-1)? (
SIZE_T_BITSIZE
-1è: (((iè>> 1è+ 
TREEBIN_SHIFT
 - 2)

	)

2760 
	#Ëáshiá_fÜ_Œ“_šdex
(
i
) \

2761 ((
i
 =ğ
NTREEBINS
-1)? 0 : \

2762 ((
SIZE_T_BITSIZE
-
SIZE_T_ONE
è- (((
i
è>> 1è+ 
TREEBIN_SHIFT
 - 2)))

	)

2765 
	#mšsize_fÜ_Œ“_šdex
(
i
) \

2766 ((
SIZE_T_ONE
 << (((
i
è>> 1è+ 
TREEBIN_SHIFT
)) | \

2767 (((
size_t
)((
i
è& 
SIZE_T_ONE
)è<< (((iè>> 1è+ 
TREEBIN_SHIFT
 - 1)))

	)

2773 
	#idx2b™
(
i
è((
bšm­_t
)(1è<< (i))

	)

2776 
	#m¬k_sm®lm­
(
M
,
i
è((M)->
sm®lm­
 |ğ
	`idx2b™
(i))

	)

2777 
	#ş—r_sm®lm­
(
M
,
i
è((M)->
sm®lm­
 &ğ~
	`idx2b™
(i))

	)

2778 
	#sm®lm­_is_m¬ked
(
M
,
i
è((M)->
sm®lm­
 & 
	`idx2b™
(i))

	)

2780 
	#m¬k_Œ“m­
(
M
,
i
è((M)->
Œ“m­
 |ğ
	`idx2b™
(i))

	)

2781 
	#ş—r_Œ“m­
(
M
,
i
è((M)->
Œ“m­
 &ğ~
	`idx2b™
(i))

	)

2782 
	#Œ“m­_is_m¬ked
(
M
,
i
è((M)->
Œ“m­
 & 
	`idx2b™
(i))

	)

2785 
	#Ëa¡_b™
(
x
è((xè& -(x))

	)

2788 
	#Ëá_b™s
(
x
è((x<<1è| -(x<<1))

	)

2791 
	#§me_Ü_Ëá_b™s
(
x
è((xè| -(x))

	)

2795 #ià
defšed
(
__GNUC__
è&& (defšed(
__i386__
è|| defšed(
__x86_64__
))

2796 
	#compu‹_b™2idx
(
X
, 
I
)\

2798 
J
;\

2799 
	`__asm__
("bsæ\t%1, %0\n\t" : "ô" (
J
è: "g" (
X
));\

2800 
I
 = (
bšdex_t
)
J
;\

2801 }

	)

2803 #–ià
defšed
 (
__INTEL_COMPILER
)

2804 
	#compu‹_b™2idx
(
X
, 
I
)\

2806 
J
;\

2807 
J
 = 
	`_b™_sÿn_fÜw¬d
 (
X
); \

2808 
I
 = (
bšdex_t
)
J
;\

2809 }

	)

2811 #–ià
defšed
(
_MSC_VER
) && _MSC_VER>=1300

2812 
	#compu‹_b™2idx
(
X
, 
I
)\

2814 
J
;\

2815 
	`_B™SÿnFÜw¬d
((
DWORD
 *è&
J
, 
X
);\

2816 
I
 = (
bšdex_t
)
J
;\

2817 }

	)

2819 #–ià
USE_BUILTIN_FFS


2820 
	#compu‹_b™2idx
(
X
, 
I
èI = 
	`ffs
(X)-1

	)

2823 
	#compu‹_b™2idx
(
X
, 
I
)\

2825 
Y
 = 
X
 - 1;\

2826 
K
 = 
Y
 >> (16-4) & 16;\

2827 
N
 = 
K
; 
Y
 >>= K;\

2828 
N
 +ğ
K
 = 
Y
 >> (8-3) & 8; Y >>= K;\

2829 
N
 +ğ
K
 = 
Y
 >> (4-2) & 4; Y >>= K;\

2830 
N
 +ğ
K
 = 
Y
 >> (2-1) & 2; Y >>= K;\

2831 
N
 +ğ
K
 = 
Y
 >> (1-0) & 1; Y >>= K;\

2832 
I
 = (
bšdex_t
)(
N
 + 
Y
);\

2833 }

	)

2865 #ià!
INSECURE


2867 
	#ok_add»ss
(
M
, 
a
è((*)×è>ğ(M)->
Ëa¡_addr
)

	)

2869 
	#ok_Ãxt
(
p
, 
n
è((*)Õè< (*)Ò))

	)

2871 
	#ok_šu£
(
p
è
	`is_šu£
Õ)

	)

2873 
	#ok_pšu£
(
p
è
	`pšu£
Õ)

	)

2876 
	#ok_add»ss
(
M
, 
a
è(1)

	)

2877 
	#ok_Ãxt
(
b
, 
n
è(1)

	)

2878 
	#ok_šu£
(
p
è(1)

	)

2879 
	#ok_pšu£
(
p
è(1)

	)

2882 #ià(
FOOTERS
 && !
INSECURE
)

2884 
	#ok_magic
(
M
è((M)->
magic
 =ğ
m·¿ms
.magic)

	)

2886 
	#ok_magic
(
M
è(1)

	)

2891 #ià!
INSECURE


2892 #ià
defšed
(
__GNUC__
) && __GNUC__ >= 3

2893 
	#RTCHECK
(
e
è
	`__butš_ex³ù
Ó, 1)

	)

2895 
	#RTCHECK
(
e
èÓ)

	)

2898 
	#RTCHECK
(
e
è(1)

	)

2903 #ià!
FOOTERS


2905 
	#m¬k_šu£_foÙ
(
M
,
p
,
s
)

	)

2910 
	#£t_šu£
(
M
,
p
,
s
)\

2911 ((
p
)->
h—d
 = ((Õ)->h—d & 
PINUSE_BIT
)|
s
|
CINUSE_BIT
),\

2912 ((
mchunk±r
)(((*)(
p
)è+ (
s
)))->
h—d
 |ğ
PINUSE_BIT
)

	)

2915 
	#£t_šu£_ªd_pšu£
(
M
,
p
,
s
)\

2916 ((
p
)->
h—d
 = (
s
|
PINUSE_BIT
|
CINUSE_BIT
),\

2917 ((
mchunk±r
)(((*)(
p
)è+ (
s
)))->
h—d
 |ğ
PINUSE_BIT
)

	)

2920 
	#£t_size_ªd_pšu£_of_šu£_chunk
(
M
, 
p
, 
s
)\

2921 ((
p
)->
h—d
 = (
s
|
PINUSE_BIT
|
CINUSE_BIT
))

	)

2926 
	#m¬k_šu£_foÙ
(
M
,
p
,
s
)\

2927 (((
mchunk±r
)((*)(
p
è+ (
s
)))->
´ev_foÙ
 = ((
size_t
)(
M
è^ 
m·¿ms
.
magic
))

	)

2929 
	#g‘_m¡©e_fÜ
(
p
)\

2930 ((
m¡©e
)(((
mchunk±r
)((*)(
p
) +\

2931 (
	`chunksize
(
p
))))->
´ev_foÙ
 ^ 
m·¿ms
.
magic
))

	)

2933 
	#£t_šu£
(
M
,
p
,
s
)\

2934 ((
p
)->
h—d
 = ((Õ)->h—d & 
PINUSE_BIT
)|
s
|
CINUSE_BIT
),\

2935 (((
mchunk±r
)(((*)(
p
)è+ (
s
)))->
h—d
 |ğ
PINUSE_BIT
), \

2936 
	`m¬k_šu£_foÙ
(
M
,
p
,
s
))

	)

2938 
	#£t_šu£_ªd_pšu£
(
M
,
p
,
s
)\

2939 ((
p
)->
h—d
 = (
s
|
PINUSE_BIT
|
CINUSE_BIT
),\

2940 (((
mchunk±r
)(((*)(
p
)è+ (
s
)))->
h—d
 |ğ
PINUSE_BIT
),\

2941 
	`m¬k_šu£_foÙ
(
M
,
p
,
s
))

	)

2943 
	#£t_size_ªd_pšu£_of_šu£_chunk
(
M
, 
p
, 
s
)\

2944 ((
p
)->
h—d
 = (
s
|
PINUSE_BIT
|
CINUSE_BIT
),\

2945 
	`m¬k_šu£_foÙ
(
M
, 
p
, 
s
))

	)

2952 
š™_m·¿ms
() {

2953 #ifdeà
NEED_GLOBAL_LOCK_INIT


2954 ià(
	gm®loc_glob®_mu‹x_¡©us
 <= 0)

2955 
š™_m®loc_glob®_mu‹x
();

2958 
ACQUIRE_MALLOC_GLOBAL_LOCK
();

2959 ià(
	gm·¿ms
.
	gmagic
 == 0) {

2960 
size_t
 
magic
;

2961 
size_t
 
	gpsize
;

2962 
size_t
 
	ggsize
;

2964 #iâdeà
WIN32


2965 
	gpsize
 = 
m®loc_g‘·gesize
;

2966 
	ggsize
 = ((
DEFAULT_GRANULARITY
 !ğ0)? DEFAULT_GRANULARITY : 
psize
);

2969 
SYSTEM_INFO
 
	gsy¡em_šfo
;

2970 
G‘Sy¡emInfo
(&
sy¡em_šfo
);

2971 
	gpsize
 = 
sy¡em_šfo
.
dwPageSize
;

2972 
	ggsize
 = ((
DEFAULT_GRANULARITY
 != 0)?

2973 
DEFAULT_GRANULARITY
 : 
sy¡em_šfo
.
dwAÎoÿtiÚG¿nuÏr™y
);

2983 ià(((
	gsize_t
) != (*)) ||

2984 (
MAX_SIZE_T
 < 
MIN_CHUNK_SIZE
) ||

2986 (
MALLOC_ALIGNMENT
 < (
size_t
)8U) ||

2987 ((
MALLOC_ALIGNMENT
 & (MALLOC_ALIGNMENT-
SIZE_T_ONE
)) != 0) ||

2988 ((
MCHUNK_SIZE
 & (MCHUNK_SIZE-
SIZE_T_ONE
)) != 0) ||

2989 ((
gsize
 & (gsize-
SIZE_T_ONE
)) != 0) ||

2990 ((
psize
 & (psize-
SIZE_T_ONE
)) != 0))

2991 
ABORT
;

2993 
	gm·¿ms
.
	gg¿nuÏr™y
 = 
gsize
;

2994 
	gm·¿ms
.
	g·ge_size
 = 
psize
;

2995 
	gm·¿ms
.
	gmm­_th»shŞd
 = 
DEFAULT_MMAP_THRESHOLD
;

2996 
	gm·¿ms
.
	gŒim_th»shŞd
 = 
DEFAULT_TRIM_THRESHOLD
;

2997 #ià
MORECORE_CONTIGUOUS


2998 
	gm·¿ms
.
	gdeçuÉ_mæags
 = 
USE_LOCK_BIT
|
USE_MMAP_BIT
;

3000 
	gm·¿ms
.
	gdeçuÉ_mæags
 = 
USE_LOCK_BIT
|
USE_MMAP_BIT
|
USE_NONCONTIGUOUS_BIT
;

3003 #ià!
ONLY_MSPACES


3005 
	ggm
->
	gmæags
 = 
m·¿ms
.
deçuÉ_mæags
;

3006 
INITIAL_LOCK
(&
gm
->
mu‹x
);

3010 #ià
USE_DEV_RANDOM


3011 
	gfd
;

3012 
	gbuf
[(
size_t
)];

3014 ià((
	gfd
 = 
İ’
("/dev/u¿ndom", 
O_RDONLY
)) >= 0 &&

3015 
»ad
(
fd
, 
buf
, (buf)) == (buf)) {

3016 
magic
 = *((
size_t
 *è
buf
);

3017 
şo£
(
fd
);

3021 #ifdeà
WIN32


3022 
	gmagic
 = (
size_t
)(
G‘TickCouÁ
() ^ (size_t)0x55555555U);

3024 
	gmagic
 = (
size_t
)(
time
(0) ^ (size_t)0x55555555U);

3026 
	gmagic
 |ğ(
size_t
)8U;

3027 
	gmagic
 &ğ~(
size_t
)7U;

3028 
	gm·¿ms
.
	gmagic
 = 
magic
;

3032 
RELEASE_MALLOC_GLOBAL_LOCK
();

3037 
chªge_m·¿m
(
·¿m_numb”
, 
v®ue
) {

3038 
size_t
 
	gv®
;

3039 
’su»_š™Ÿliz©iÚ
();

3040 
	gv®
 = (
v®ue
 =ğ-1)? 
MAX_SIZE_T
 : (
size_t
)value;

3041 
	g·¿m_numb”
) {

3042 
	gM_TRIM_THRESHOLD
:

3043 
m·¿ms
.
Œim_th»shŞd
 = 
v®
;

3045 
	gM_GRANULARITY
:

3046 ià(
v®
 >ğ
m·¿ms
.
·ge_size
 && ((val & (val-1)) == 0)) {

3047 
m·¿ms
.
g¿nuÏr™y
 = 
v®
;

3052 
	gM_MMAP_THRESHOLD
:

3053 
m·¿ms
.
mm­_th»shŞd
 = 
v®
;

3060 #ià
DEBUG


3064 
do_check_ªy_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
) {

3065 
as£¹
((
is_®igÃd
(
chunk2mem
(
p
))è|| (p->
h—d
 =ğ
FENCEPOST_HEAD
));

3066 
as£¹
(
ok_add»ss
(
m
, 
p
));

3070 
do_check_tİ_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
) {

3071 
m£gm’Œ
 
	g¥
 = 
£gm’t_hŞdšg
(
m
, (*)
p
);

3072 
size_t
 
	gsz
 = 
p
->
h—d
 & ~
INUSE_BITS
;

3073 
as£¹
(
¥
 != 0);

3074 
as£¹
((
is_®igÃd
(
chunk2mem
(
p
))è|| (p->
h—d
 =ğ
FENCEPOST_HEAD
));

3075 
as£¹
(
ok_add»ss
(
m
, 
p
));

3076 
as£¹
(
sz
 =ğ
m
->
tİsize
);

3077 
as£¹
(
sz
 > 0);

3078 
as£¹
(
sz
 =ğ((
¥
->
ba£
 + sp->
size
è- (*)
p
è- 
TOP_FOOT_SIZE
);

3079 
as£¹
(
pšu£
(
p
));

3080 
as£¹
(!
pšu£
(
chunk_¶us_off£t
(
p
, 
sz
)));

3084 
do_check_mm­³d_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
) {

3085 
size_t
 
	gsz
 = 
chunksize
(
p
);

3086 
size_t
 
	gËn
 = (
sz
 + (
p
->
´ev_foÙ
è+ 
MMAP_FOOT_PAD
);

3087 
as£¹
(
is_mm­³d
(
p
));

3088 
as£¹
(
u£_mm­
(
m
));

3089 
as£¹
((
is_®igÃd
(
chunk2mem
(
p
))è|| (p->
h—d
 =ğ
FENCEPOST_HEAD
));

3090 
as£¹
(
ok_add»ss
(
m
, 
p
));

3091 
as£¹
(!
is_sm®l
(
sz
));

3092 
as£¹
((
Ën
 & (
m·¿ms
.
·ge_size
-
SIZE_T_ONE
)) == 0);

3093 
as£¹
(
chunk_¶us_off£t
(
p
, 
sz
)->
h—d
 =ğ
FENCEPOST_HEAD
);

3094 
as£¹
(
chunk_¶us_off£t
(
p
, 
sz
+
SIZE_T_SIZE
)->
h—d
 == 0);

3098 
do_check_šu£_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
) {

3099 
do_check_ªy_chunk
(
m
, 
p
);

3100 
as£¹
(
is_šu£
(
p
));

3101 
as£¹
(
Ãxt_pšu£
(
p
));

3103 
as£¹
(
is_mm­³d
(
p
è|| 
pšu£
Õè|| 
Ãxt_chunk
(
´ev_chunk
(p)) ==…);

3104 ià(
is_mm­³d
(
p
))

3105 
do_check_mm­³d_chunk
(
m
, 
p
);

3109 
do_check_ä“_chunk
(
m¡©e
 
m
, 
mchunk±r
 
p
) {

3110 
size_t
 
	gsz
 = 
chunksize
(
p
);

3111 
mchunk±r
 
	gÃxt
 = 
chunk_¶us_off£t
(
p
, 
sz
);

3112 
do_check_ªy_chunk
(
m
, 
p
);

3113 
as£¹
(!
is_šu£
(
p
));

3114 
as£¹
(!
Ãxt_pšu£
(
p
));

3115 
as£¹
 (!
is_mm­³d
(
p
));

3116 ià(
	gp
 !ğ
m
->
dv
 && 
p
 !ğm->
tİ
) {

3117 ià(
sz
 >ğ
MIN_CHUNK_SIZE
) {

3118 
as£¹
((
sz
 & 
CHUNK_ALIGN_MASK
) == 0);

3119 
as£¹
(
is_®igÃd
(
chunk2mem
(
p
)));

3120 
as£¹
(
Ãxt
->
´ev_foÙ
 =ğ
sz
);

3121 
as£¹
(
pšu£
(
p
));

3122 
as£¹
 (
Ãxt
 =ğ
m
->
tİ
 || 
is_šu£
(next));

3123 
as£¹
(
p
->
fd
->
bk
 ==…);

3124 
as£¹
(
p
->
bk
->
fd
 ==…);

3127 
as£¹
(
sz
 =ğ
SIZE_T_SIZE
);

3132 
do_check_m®loûd_chunk
(
m¡©e
 
m
, * 
mem
, 
size_t
 
s
) {

3133 ià(
	gmem
 != 0) {

3134 
mchunk±r
 
p
 = 
mem2chunk
(
mem
);

3135 
size_t
 
	gsz
 = 
p
->
h—d
 & ~
INUSE_BITS
;

3136 
do_check_šu£_chunk
(
m
, 
p
);

3137 
as£¹
((
sz
 & 
CHUNK_ALIGN_MASK
) == 0);

3138 
as£¹
(
sz
 >ğ
MIN_CHUNK_SIZE
);

3139 
as£¹
(
sz
 >ğ
s
);

3141 
as£¹
(
is_mm­³d
(
p
è|| 
sz
 < (
s
 + 
MIN_CHUNK_SIZE
));

3146 
do_check_Œ“
(
m¡©e
 
m
, 
tchunk±r
 
t
) {

3147 
tchunk±r
 
	gh—d
 = 0;

3148 
tchunk±r
 
	gu
 = 
t
;

3149 
bšdex_t
 
	gtšdex
 = 
t
->
šdex
;

3150 
size_t
 
	gtsize
 = 
chunksize
(
t
);

3151 
bšdex_t
 
	gidx
;

3152 
compu‹_Œ“_šdex
(
tsize
, 
idx
);

3153 
as£¹
(
tšdex
 =ğ
idx
);

3154 
as£¹
(
tsize
 >ğ
MIN_LARGE_SIZE
);

3155 
as£¹
(
tsize
 >ğ
mšsize_fÜ_Œ“_šdex
(
idx
));

3156 
as£¹
((
idx
 =ğ
NTREEBINS
-1è|| (
tsize
 < 
mšsize_fÜ_Œ“_šdex
((idx+1))));

3159 
do_check_ªy_chunk
(
m
, ((
mchunk±r
)
u
));

3160 
as£¹
(
u
->
šdex
 =ğ
tšdex
);

3161 
as£¹
(
chunksize
(
u
è=ğ
tsize
);

3162 
as£¹
(!
is_šu£
(
u
));

3163 
as£¹
(!
Ãxt_pšu£
(
u
));

3164 
as£¹
(
u
->
fd
->
bk
 == u);

3165 
as£¹
(
u
->
bk
->
fd
 == u);

3166 ià(
	gu
->
	g·»Á
 == 0) {

3167 
as£¹
(
u
->
chd
[0] == 0);

3168 
as£¹
(
u
->
chd
[1] == 0);

3171 
as£¹
(
h—d
 == 0);

3172 
	gh—d
 = 
u
;

3173 
as£¹
(
u
->
·»Á
 != u);

3174 
as£¹
 (
u
->
·»Á
->
chd
[0] == u ||

3175 
u
->
·»Á
->
chd
[1] == u ||

3176 *((
tbš±r
*)(
u
->
·»Á
)) == u);

3177 ià(
	gu
->
	gchd
[0] != 0) {

3178 
as£¹
(
u
->
chd
[0]->
·»Á
 == u);

3179 
as£¹
(
u
->
chd
[0] != u);

3180 
do_check_Œ“
(
m
, 
u
->
chd
[0]);

3182 ià(
	gu
->
	gchd
[1] != 0) {

3183 
as£¹
(
u
->
chd
[1]->
·»Á
 == u);

3184 
as£¹
(
u
->
chd
[1] != u);

3185 
do_check_Œ“
(
m
, 
u
->
chd
[1]);

3187 ià(
	gu
->
	gchd
[0] !ğ0 && 
u
->
chd
[1] != 0) {

3188 
as£¹
(
chunksize
(
u
->
chd
[0]) < chunksize(u->child[1]));

3191 
	gu
 = 
u
->
fd
;

3192 } 
	gu
 !ğ
t
);

3193 
as£¹
(
h—d
 != 0);

3197 
do_check_Œ“bš
(
m¡©e
 
m
, 
bšdex_t
 
i
) {

3198 
tbš±r
* 
	gtb
 = 
Œ“bš_©
(
m
, 
i
);

3199 
tchunk±r
 
	gt
 = *
tb
;

3200 
	gem±y
 = (
m
->
Œ“m­
 & (1U << 
i
)) == 0;

3201 ià(
	gt
 == 0)

3202 
as£¹
(
em±y
);

3203 ià(!
	gem±y
)

3204 
do_check_Œ“
(
m
, 
t
);

3208 
do_check_sm®lbš
(
m¡©e
 
m
, 
bšdex_t
 
i
) {

3209 
sbš±r
 
	gb
 = 
sm®lbš_©
(
m
, 
i
);

3210 
mchunk±r
 
	gp
 = 
b
->
bk
;

3211 
	gem±y
 = (
m
->
sm®lm­
 & (1U << 
i
)) == 0;

3212 ià(
	gp
 =ğ
b
)

3213 
as£¹
(
em±y
);

3214 ià(!
	gem±y
) {

3215 ; 
	gp
 !ğ
b
;… = 
p
->
bk
) {

3216 
size_t
 
size
 = 
chunksize
(
p
);

3217 
mchunk±r
 
	gq
;

3219 
do_check_ä“_chunk
(
m
, 
p
);

3221 
as£¹
(
sm®l_šdex
(
size
è=ğ
i
);

3222 
as£¹
(
p
->
bk
 =ğ
b
 || 
chunksize
(p->bk) == chunksize(p));

3224 
	gq
 = 
Ãxt_chunk
(
p
);

3225 ià(
	gq
->
	gh—d
 !ğ
FENCEPOST_HEAD
)

3226 
do_check_šu£_chunk
(
m
, 
q
);

3232 
bš_fšd
(
m¡©e
 
m
, 
mchunk±r
 
x
) {

3233 
size_t
 
	gsize
 = 
chunksize
(
x
);

3234 ià(
is_sm®l
(
size
)) {

3235 
bšdex_t
 
	gsidx
 = 
sm®l_šdex
(
size
);

3236 
sbš±r
 
	gb
 = 
sm®lbš_©
(
m
, 
sidx
);

3237 ià(
sm®lm­_is_m¬ked
(
m
, 
sidx
)) {

3238 
mchunk±r
 
	gp
 = 
b
;

3240 ià(
	gp
 =ğ
x
)

3242 } (
	gp
 = 
p
->
fd
è!ğ
b
);

3246 
bšdex_t
 
	gtidx
;

3247 
compu‹_Œ“_šdex
(
size
, 
tidx
);

3248 ià(
Œ“m­_is_m¬ked
(
m
, 
tidx
)) {

3249 
tchunk±r
 
	gt
 = *
Œ“bš_©
(
m
, 
tidx
);

3250 
size_t
 
	gsizeb™s
 = 
size
 << 
Ëáshiá_fÜ_Œ“_šdex
(
tidx
);

3251 
	gt
 !ğ0 && 
chunksize
(
t
è!ğ
size
) {

3252 
t
 =->
chd
[(
sizeb™s
 >> (
SIZE_T_BITSIZE
-
SIZE_T_ONE
)) & 1];

3253 
	gsizeb™s
 <<= 1;

3255 ià(
	gt
 != 0) {

3256 
tchunk±r
 
u
 = 
t
;

3258 ià(
	gu
 =ğ(
tchunk±r
)
x
)

3260 } (
	gu
 = 
u
->
fd
è!ğ
t
);

3268 
size_t
 
Œav”£_ªd_check
(
m¡©e
 
m
) {

3269 
size_t
 
	gsum
 = 0;

3270 ià(
is_š™Ÿlized
(
m
)) {

3271 
m£gm’Œ
 
	gs
 = &
m
->
£g
;

3272 
	gsum
 +ğ
m
->
tİsize
 + 
TOP_FOOT_SIZE
;

3273 
	gs
 != 0) {

3274 
mchunk±r
 
q
 = 
®ign_as_chunk
(
s
->
ba£
);

3275 
mchunk±r
 
	gÏ¡q
 = 0;

3276 
as£¹
(
pšu£
(
q
));

3277 
£gm’t_hŞds
(
s
, 
q
) &&

3278 
	gq
 !ğ
m
->
tİ
 && 
q
->
h—d
 !ğ
FENCEPOST_HEAD
) {

3279 
sum
 +ğ
chunksize
(
q
);

3280 ià(
is_šu£
(
q
)) {

3281 
as£¹
(!
bš_fšd
(
m
, 
q
));

3282 
do_check_šu£_chunk
(
m
, 
q
);

3285 
as£¹
(
q
 =ğ
m
->
dv
 || 
bš_fšd
(m, q));

3286 
as£¹
(
Ï¡q
 =ğ0 || 
is_šu£
(lastq));

3287 
do_check_ä“_chunk
(
m
, 
q
);

3289 
	gÏ¡q
 = 
q
;

3290 
	gq
 = 
Ãxt_chunk
(
q
);

3292 
	gs
 = 
s
->
Ãxt
;

3295  
	gsum
;

3299 
do_check_m®loc_¡©e
(
m¡©e
 
m
) {

3300 
bšdex_t
 
	gi
;

3301 
size_t
 
	gtÙ®
;

3303 
	gi
 = 0; i < 
	gNSMALLBINS
; ++i)

3304 
do_check_sm®lbš
(
m
, 
i
);

3305 
	gi
 = 0; i < 
	gNTREEBINS
; ++i)

3306 
do_check_Œ“bš
(
m
, 
i
);

3308 ià(
	gm
->
	gdvsize
 != 0) {

3309 
do_check_ªy_chunk
(
m
, m->
dv
);

3310 
as£¹
(
m
->
dvsize
 =ğ
chunksize
(m->
dv
));

3311 
as£¹
(
m
->
dvsize
 >ğ
MIN_CHUNK_SIZE
);

3312 
as£¹
(
bš_fšd
(
m
, m->
dv
) == 0);

3315 ià(
	gm
->
	gtİ
 != 0) {

3316 
do_check_tİ_chunk
(
m
, m->
tİ
);

3318 
as£¹
(
m
->
tİsize
 > 0);

3319 
as£¹
(
bš_fšd
(
m
, m->
tİ
) == 0);

3322 
	gtÙ®
 = 
Œav”£_ªd_check
(
m
);

3323 
as£¹
(
tÙ®
 <ğ
m
->
foÙ´št
);

3324 
as£¹
(
m
->
foÙ´št
 <ğm->
max_foÙ´št
);

3330 #ià!
NO_MALLINFO


3331 
m®lšfo
 
š‹º®_m®lšfo
(
m¡©e
 
m
) {

3332 
m®lšfo
 
	gnm
 = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };

3333 
’su»_š™Ÿliz©iÚ
();

3334 ià(!
PREACTION
(
m
)) {

3335 
check_m®loc_¡©e
(
m
);

3336 ià(
is_š™Ÿlized
(
m
)) {

3337 
size_t
 
	gnä“
 = 
SIZE_T_ONE
;

3338 
size_t
 
	gmä“
 = 
m
->
tİsize
 + 
TOP_FOOT_SIZE
;

3339 
size_t
 
	gsum
 = 
mä“
;

3340 
m£gm’Œ
 
	gs
 = &
m
->
£g
;

3341 
	gs
 != 0) {

3342 
mchunk±r
 
q
 = 
®ign_as_chunk
(
s
->
ba£
);

3343 
£gm’t_hŞds
(
s
, 
q
) &&

3344 
	gq
 !ğ
m
->
tİ
 && 
q
->
h—d
 !ğ
FENCEPOST_HEAD
) {

3345 
size_t
 
sz
 = 
chunksize
(
q
);

3346 
	gsum
 +ğ
sz
;

3347 ià(!
is_šu£
(
q
)) {

3348 
	gmä“
 +ğ
sz
;

3349 ++
	gnä“
;

3351 
	gq
 = 
Ãxt_chunk
(
q
);

3353 
	gs
 = 
s
->
Ãxt
;

3356 
	gnm
.
	g¬’a
 = 
sum
;

3357 
	gnm
.
	gÜdblks
 = 
nä“
;

3358 
	gnm
.
	ghblkhd
 = 
m
->
foÙ´št
 - 
sum
;

3359 
	gnm
.
	gusmblks
 = 
m
->
max_foÙ´št
;

3360 
	gnm
.
	guÜdblks
 = 
m
->
foÙ´št
 - 
mä“
;

3361 
	gnm
.
	gfÜdblks
 = 
mä“
;

3362 
	gnm
.
	gk“pco¡
 = 
m
->
tİsize
;

3365 
POSTACTION
(
m
);

3367  
	gnm
;

3371 
š‹º®_m®loc_¡©s
(
m¡©e
 
m
) {

3372 
’su»_š™Ÿliz©iÚ
();

3373 ià(!
PREACTION
(
m
)) {

3374 
size_t
 
	gmaxå
 = 0;

3375 
size_t
 
	gå
 = 0;

3376 
size_t
 
	gu£d
 = 0;

3377 
check_m®loc_¡©e
(
m
);

3378 ià(
is_š™Ÿlized
(
m
)) {

3379 
m£gm’Œ
 
	gs
 = &
m
->
£g
;

3380 
	gmaxå
 = 
m
->
max_foÙ´št
;

3381 
	gå
 = 
m
->
foÙ´št
;

3382 
	gu£d
 = 
å
 - (
m
->
tİsize
 + 
TOP_FOOT_SIZE
);

3384 
	gs
 != 0) {

3385 
mchunk±r
 
q
 = 
®ign_as_chunk
(
s
->
ba£
);

3386 
£gm’t_hŞds
(
s
, 
q
) &&

3387 
	gq
 !ğ
m
->
tİ
 && 
q
->
h—d
 !ğ
FENCEPOST_HEAD
) {

3388 ià(!
is_šu£
(
q
))

3389 
u£d
 -ğ
chunksize
(
q
);

3390 
	gq
 = 
Ãxt_chunk
(
q
);

3392 
	gs
 = 
s
->
Ãxt
;

3396 
årštf
(
¡d”r
, "max sy¡em by‹ ğ%10lu\n", ()(
maxå
));

3397 
årštf
(
¡d”r
, "sy¡em by‹  = %10lu\n", ()(
å
));

3398 
årštf
(
¡d”r
, "š u£ by‹  = %10lu\n", ()(
u£d
));

3400 
POSTACTION
(
m
);

3414 
	#š£¹_sm®l_chunk
(
M
, 
P
, 
S
) {\

3415 
bšdex_t
 
I
 = 
	`sm®l_šdex
(
S
);\

3416 
mchunk±r
 
B
 = 
	`sm®lbš_©
(
M
, 
I
);\

3417 
mchunk±r
 
F
 = 
B
;\

3418 
	`as£¹
(
S
 >ğ
MIN_CHUNK_SIZE
);\

3419 ià(!
	`sm®lm­_is_m¬ked
(
M
, 
I
))\

3420 
	`m¬k_sm®lm­
(
M
, 
I
);\

3421 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
B
->
fd
)))\

3422 
F
 = 
B
->
fd
;\

3424 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3426 
B
->
fd
 = 
P
;\

3427 
F
->
bk
 = 
P
;\

3428 
P
->
fd
 = 
F
;\

3429 
P
->
bk
 = 
B
;\

3430 }

	)

3433 
	#uÆšk_sm®l_chunk
(
M
, 
P
, 
S
) {\

3434 
mchunk±r
 
F
 = 
P
->
fd
;\

3435 
mchunk±r
 
B
 = 
P
->
bk
;\

3436 
bšdex_t
 
I
 = 
	`sm®l_šdex
(
S
);\

3437 
	`as£¹
(
P
 !ğ
B
);\

3438 
	`as£¹
(
P
 !ğ
F
);\

3439 
	`as£¹
(
	`chunksize
(
P
è=ğ
	`sm®l_šdex2size
(
I
));\

3440 ià(
F
 =ğ
B
)\

3441 
	`ş—r_sm®lm­
(
M
, 
I
);\

3442 ià(
	`RTCHECK
((
F
 =ğ
	`sm®lbš_©
(
M
,
I
è|| 
	`ok_add»ss
(M, F)) &&\

3443 (
B
 =ğ
	`sm®lbš_©
(
M
,
I
è|| 
	`ok_add»ss
(M, B)))) {\

3444 
F
->
bk
 = 
B
;\

3445 
B
->
fd
 = 
F
;\

3448 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3450 }

	)

3453 
	#uÆšk_fœ¡_sm®l_chunk
(
M
, 
B
, 
P
, 
I
) {\

3454 
mchunk±r
 
F
 = 
P
->
fd
;\

3455 
	`as£¹
(
P
 !ğ
B
);\

3456 
	`as£¹
(
P
 !ğ
F
);\

3457 
	`as£¹
(
	`chunksize
(
P
è=ğ
	`sm®l_šdex2size
(
I
));\

3458 ià(
B
 =ğ
F
)\

3459 
	`ş—r_sm®lm­
(
M
, 
I
);\

3460 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
F
))) {\

3461 
B
->
fd
 = 
F
;\

3462 
F
->
bk
 = 
B
;\

3465 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3467 }

	)

3473 
	#»¶aû_dv
(
M
, 
P
, 
S
) {\

3474 
size_t
 
DVS
 = 
M
->
dvsize
;\

3475 ià(
DVS
 != 0) {\

3476 
mchunk±r
 
DV
 = 
M
->
dv
;\

3477 
	`as£¹
(
	`is_sm®l
(
DVS
));\

3478 
	`š£¹_sm®l_chunk
(
M
, 
DV
, 
DVS
);\

3480 
M
->
dvsize
 = 
S
;\

3481 
M
->
dv
 = 
P
;\

3482 }

	)

3487 
	#š£¹_Ïrge_chunk
(
M
, 
X
, 
S
) {\

3488 
tbš±r
* 
H
;\

3489 
bšdex_t
 
I
;\

3490 
	`compu‹_Œ“_šdex
(
S
, 
I
);\

3491 
H
 = 
	`Œ“bš_©
(
M
, 
I
);\

3492 
X
->
šdex
 = 
I
;\

3493 
X
->
chd
[0] = X->child[1] = 0;\

3494 ià(!
	`Œ“m­_is_m¬ked
(
M
, 
I
)) {\

3495 
	`m¬k_Œ“m­
(
M
, 
I
);\

3496 *
H
 = 
X
;\

3497 
X
->
·»Á
 = (
tchunk±r
)
H
;\

3498 
X
->
fd
 = X->
bk
 = X;\

3501 
tchunk±r
 
T
 = *
H
;\

3502 
size_t
 
K
 = 
S
 << 
	`Ëáshiá_fÜ_Œ“_šdex
(
I
);\

3504 ià(
	`chunksize
(
T
è!ğ
S
) {\

3505 
tchunk±r
* 
C
 = &(
T
->
chd
[(
K
 >> (
SIZE_T_BITSIZE
-
SIZE_T_ONE
)) & 1]);\

3506 
K
 <<= 1;\

3507 ià(*
C
 != 0)\

3508 
T
 = *
C
;\

3509 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
C
))) {\

3510 *
C
 = 
X
;\

3511 
X
->
·»Á
 = 
T
;\

3512 
X
->
fd
 = X->
bk
 = X;\

3516 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3521 
tchunk±r
 
F
 = 
T
->
fd
;\

3522 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
T
è&& ok_add»ss(M, 
F
))) {\

3523 
T
->
fd
 = 
F
->
bk
 = 
X
;\

3524 
X
->
fd
 = 
F
;\

3525 
X
->
bk
 = 
T
;\

3526 
X
->
·»Á
 = 0;\

3530 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3536 }

	)

3555 
	#uÆšk_Ïrge_chunk
(
M
, 
X
) {\

3556 
tchunk±r
 
XP
 = 
X
->
·»Á
;\

3557 
tchunk±r
 
R
;\

3558 ià(
X
->
bk
 != X) {\

3559 
tchunk±r
 
F
 = 
X
->
fd
;\

3560 
R
 = 
X
->
bk
;\

3561 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
F
))) {\

3562 
F
->
bk
 = 
R
;\

3563 
R
->
fd
 = 
F
;\

3566 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3570 
tchunk±r
* 
RP
;\

3571 ià(((
R
 = *(
RP
 = &(
X
->
chd
[1]))) != 0) ||\

3572 ((
R
 = *(
RP
 = &(
X
->
chd
[0]))) != 0)) {\

3573 
tchunk±r
* 
CP
;\

3574 (*(
CP
 = &(
R
->
chd
[1])) != 0) ||\

3575 (*(
CP
 = &(
R
->
chd
[0])) != 0)) {\

3576 
R
 = *(
RP
 = 
CP
);\

3578 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
RP
)))\

3579 *
RP
 = 0;\

3581 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3585 ià(
XP
 != 0) {\

3586 
tbš±r
* 
H
 = 
	`Œ“bš_©
(
M
, 
X
->
šdex
);\

3587 ià(
X
 =ğ*
H
) {\

3588 ià((*
H
 = 
R
) == 0) \

3589 
	`ş—r_Œ“m­
(
M
, 
X
->
šdex
);\

3591 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
XP
))) {\

3592 ià(
XP
->
chd
[0] =ğ
X
) \

3593 
XP
->
chd
[0] = 
R
;\

3595 
XP
->
chd
[1] = 
R
;\

3598 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3599 ià(
R
 != 0) {\

3600 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
R
))) {\

3601 
tchunk±r
 
C0
, 
C1
;\

3602 
R
->
·»Á
 = 
XP
;\

3603 ià((
C0
 = 
X
->
chd
[0]) != 0) {\

3604 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
C0
))) {\

3605 
R
->
chd
[0] = 
C0
;\

3606 
C0
->
·»Á
 = 
R
;\

3609 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3611 ià((
C1
 = 
X
->
chd
[1]) != 0) {\

3612 ià(
	`RTCHECK
(
	`ok_add»ss
(
M
, 
C1
))) {\

3613 
R
->
chd
[1] = 
C1
;\

3614 
C1
->
·»Á
 = 
R
;\

3617 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3621 
	`CORRUPTION_ERROR_ACTION
(
M
);\

3624 }

	)

3628 
	#š£¹_chunk
(
M
, 
P
, 
S
)\

3629 ià(
	`is_sm®l
(
S
)è
	`š£¹_sm®l_chunk
(
M
, 
P
, S)\

3630 { 
tchunk±r
 
TP
 = (tchunk±r)(
P
); 
	`š£¹_Ïrge_chunk
(
M
, TP, 
S
); }

	)

3632 
	#uÆšk_chunk
(
M
, 
P
, 
S
)\

3633 ià(
	`is_sm®l
(
S
)è
	`uÆšk_sm®l_chunk
(
M
, 
P
, S)\

3634 { 
tchunk±r
 
TP
 = (tchunk±r)(
P
); 
	`uÆšk_Ïrge_chunk
(
M
, TP); }

	)

3639 #ià
ONLY_MSPACES


3640 
	#š‹º®_m®loc
(
m
, 
b
è
	`m¥aû_m®loc
(m, b)

	)

3641 
	#š‹º®_ä“
(
m
, 
mem
è
	`m¥aû_ä“
(m,mem);

	)

3643 #ià
MSPACES


3644 
	#š‹º®_m®loc
(
m
, 
b
)\

3645 (
m
 =ğ
gm
)? 
	`dlm®loc
(
b
è: 
	`m¥aû_m®loc
(m, b)

	)

3646 
	#š‹º®_ä“
(
m
, 
mem
)\

3647 ià(
m
 =ğ
gm
è
	`dlä“
(
mem
); 
	`m¥aû_ä“
(m,mem);

	)

3649 
	#š‹º®_m®loc
(
m
, 
b
è
	`dlm®loc
(b)

	)

3650 
	#š‹º®_ä“
(
m
, 
mem
è
	`dlä“
(mem)

	)

3665 * 
mm­_®loc
(
m¡©e
 
m
, 
size_t
 
nb
) {

3666 
size_t
 
	gmmsize
 = 
mm­_®ign
(
nb
 + 
SIX_SIZE_T_SIZES
 + 
CHUNK_ALIGN_MASK
);

3667 ià(
	gmmsize
 > 
	gnb
) {

3668 * 
	gmm
 = (*)(
CALL_DIRECT_MMAP
(
mmsize
));

3669 ià(
	gmm
 !ğ
CMFAIL
) {

3670 
size_t
 
off£t
 = 
®ign_off£t
(
chunk2mem
(
mm
));

3671 
size_t
 
	gpsize
 = 
mmsize
 - 
off£t
 - 
MMAP_FOOT_PAD
;

3672 
mchunk±r
 
	gp
 = (mchunk±r)(
mm
 + 
off£t
);

3673 
	gp
->
	g´ev_foÙ
 = 
off£t
;

3674 
	gp
->
	gh—d
 = 
psize
;

3675 
m¬k_šu£_foÙ
(
m
, 
p
, 
psize
);

3676 
chunk_¶us_off£t
(
p
, 
psize
)->
	gh—d
 = 
FENCEPOST_HEAD
;

3677 
chunk_¶us_off£t
(
p
, 
psize
+
SIZE_T_SIZE
)->
	gh—d
 = 0;

3679 ià(
	gm
->
	gËa¡_addr
 =ğ0 || 
mm
 < 
m
->
Ëa¡_addr
)

3680 
m
->
Ëa¡_addr
 = 
mm
;

3681 ià((
	gm
->
	gfoÙ´št
 +ğ
mmsize
è> 
m
->
max_foÙ´št
)

3682 
m
->
max_foÙ´št
 = m->
foÙ´št
;

3683 
as£¹
(
is_®igÃd
(
chunk2mem
(
p
)));

3684 
check_mm­³d_chunk
(
m
, 
p
);

3685  
chunk2mem
(
p
);

3692 
mchunk±r
 
mm­_»size
(
m¡©e
 
m
, mchunk±¸
Şdp
, 
size_t
 
nb
) {

3693 
size_t
 
	gŞdsize
 = 
chunksize
(
Şdp
);

3694 ià(
is_sm®l
(
nb
))

3697 ià(
	gŞdsize
 >ğ
nb
 + 
SIZE_T_SIZE
 &&

3698 (
Şdsize
 - 
nb
è<ğ(
m·¿ms
.
g¿nuÏr™y
 << 1))

3699  
Şdp
;

3701 
size_t
 
	goff£t
 = 
Şdp
->
´ev_foÙ
;

3702 
size_t
 
	gŞdmmsize
 = 
Şdsize
 + 
off£t
 + 
MMAP_FOOT_PAD
;

3703 
size_t
 
	gÃwmmsize
 = 
mm­_®ign
(
nb
 + 
SIX_SIZE_T_SIZES
 + 
CHUNK_ALIGN_MASK
);

3704 * 
	gı
 = (*)
CALL_MREMAP
((*)
Şdp
 - 
off£t
,

3705 
Şdmmsize
, 
Ãwmmsize
, 1);

3706 ià(
	gı
 !ğ
CMFAIL
) {

3707 
mchunk±r
 
Ãwp
 = (mchunk±r)(
ı
 + 
off£t
);

3708 
size_t
 
	gpsize
 = 
Ãwmmsize
 - 
off£t
 - 
MMAP_FOOT_PAD
;

3709 
	gÃwp
->
	gh—d
 = 
psize
;

3710 
m¬k_šu£_foÙ
(
m
, 
Ãwp
, 
psize
);

3711 
chunk_¶us_off£t
(
Ãwp
, 
psize
)->
	gh—d
 = 
FENCEPOST_HEAD
;

3712 
chunk_¶us_off£t
(
Ãwp
, 
psize
+
SIZE_T_SIZE
)->
	gh—d
 = 0;

3714 ià(
	gı
 < 
	gm
->
	gËa¡_addr
)

3715 
	gm
->
	gËa¡_addr
 = 
ı
;

3716 ià((
	gm
->
	gfoÙ´št
 +ğ
Ãwmmsize
 - 
Şdmmsize
è> 
m
->
max_foÙ´št
)

3717 
m
->
max_foÙ´št
 = m->
foÙ´št
;

3718 
check_mm­³d_chunk
(
m
, 
Ãwp
);

3719  
	gÃwp
;

3728 
š™_tİ
(
m¡©e
 
m
, 
mchunk±r
 
p
, 
size_t
 
psize
) {

3730 
size_t
 
	goff£t
 = 
®ign_off£t
(
chunk2mem
(
p
));

3731 
	gp
 = (
mchunk±r
)((*)
p
 + 
off£t
);

3732 
	gpsize
 -ğ
off£t
;

3734 
	gm
->
	gtİ
 = 
p
;

3735 
	gm
->
	gtİsize
 = 
psize
;

3736 
	gp
->
	gh—d
 = 
psize
 | 
PINUSE_BIT
;

3738 
chunk_¶us_off£t
(
p
, 
psize
)->
	gh—d
 = 
TOP_FOOT_SIZE
;

3739 
	gm
->
	gŒim_check
 = 
m·¿ms
.
Œim_th»shŞd
;

3743 
š™_bšs
(
m¡©e
 
m
) {

3745 
bšdex_t
 
	gi
;

3746 
	gi
 = 0; i < 
	gNSMALLBINS
; ++i) {

3747 
sbš±r
 
	gbš
 = 
sm®lbš_©
(
m
,
i
);

3748 
	gbš
->
	gfd
 = 
bš
->
bk
 = bin;

3752 #ià
PROCEED_ON_ERROR


3755 
»£t_Ú_”rÜ
(
m¡©e
 
m
) {

3756 
	gi
;

3757 ++
	gm®loc_cÜru±iÚ_”rÜ_couÁ
;

3759 
	gm
->
	gsm®lbšs
 = 
m
->
Œ“bšs
 = 0;

3760 
	gm
->
	gdvsize
 = 
m
->
tİsize
 = 0;

3761 
	gm
->
	g£g
.
	gba£
 = 0;

3762 
	gm
->
	g£g
.
	gsize
 = 0;

3763 
	gm
->
	g£g
.
	gÃxt
 = 0;

3764 
	gm
->
	gtİ
 = 
m
->
dv
 = 0;

3765 
	gi
 = 0; i < 
	gNTREEBINS
; ++i)

3766 *
Œ“bš_©
(
m
, 
i
) = 0;

3767 
š™_bšs
(
m
);

3772 * 
´•’d_®loc
(
m¡©e
 
m
, * 
Ãwba£
, * 
Şdba£
,

3773 
size_t
 
nb
) {

3774 
mchunk±r
 
	gp
 = 
®ign_as_chunk
(
Ãwba£
);

3775 
mchunk±r
 
	gŞdfœ¡
 = 
®ign_as_chunk
(
Şdba£
);

3776 
size_t
 
	gpsize
 = (*)
Şdfœ¡
 - (*)
p
;

3777 
mchunk±r
 
	gq
 = 
chunk_¶us_off£t
(
p
, 
nb
);

3778 
size_t
 
	gqsize
 = 
psize
 - 
nb
;

3779 
£t_size_ªd_pšu£_of_šu£_chunk
(
m
, 
p
, 
nb
);

3781 
as£¹
((*)
Şdfœ¡
 > (*)
q
);

3782 
as£¹
(
pšu£
(
Şdfœ¡
));

3783 
as£¹
(
qsize
 >ğ
MIN_CHUNK_SIZE
);

3786 ià(
	gŞdfœ¡
 =ğ
m
->
tİ
) {

3787 
size_t
 
tsize
 = 
m
->
tİsize
 +ğ
qsize
;

3788 
	gm
->
	gtİ
 = 
q
;

3789 
	gq
->
	gh—d
 = 
tsize
 | 
PINUSE_BIT
;

3790 
check_tİ_chunk
(
m
, 
q
);

3792 ià(
	gŞdfœ¡
 =ğ
m
->
dv
) {

3793 
size_t
 
dsize
 = 
m
->
dvsize
 +ğ
qsize
;

3794 
	gm
->
	gdv
 = 
q
;

3795 
£t_size_ªd_pšu£_of_ä“_chunk
(
q
, 
dsize
);

3798 ià(!
is_šu£
(
Şdfœ¡
)) {

3799 
size_t
 
	gnsize
 = 
chunksize
(
Şdfœ¡
);

3800 
uÆšk_chunk
(
m
, 
Şdfœ¡
, 
nsize
);

3801 
	gŞdfœ¡
 = 
chunk_¶us_off£t
(
Şdfœ¡
, 
nsize
);

3802 
	gqsize
 +ğ
nsize
;

3804 
£t_ä“_w™h_pšu£
(
q
, 
qsize
, 
Şdfœ¡
);

3805 
š£¹_chunk
(
m
, 
q
, 
qsize
);

3806 
check_ä“_chunk
(
m
, 
q
);

3809 
check_m®loûd_chunk
(
m
, 
chunk2mem
(
p
), 
nb
);

3810  
chunk2mem
(
p
);

3814 
add_£gm’t
(
m¡©e
 
m
, * 
tba£
, 
size_t
 
tsize
, 
æag_t
 
mm­³d
) {

3816 * 
	gŞd_tİ
 = (*)
m
->
tİ
;

3817 
m£gm’Œ
 
	gŞd¥
 = 
£gm’t_hŞdšg
(
m
, 
Şd_tİ
);

3818 * 
	gŞd_’d
 = 
Şd¥
->
ba£
 + old¥->
size
;

3819 
size_t
 
	gssize
 = 
·d_»que¡
((
m®loc_£gm’t
));

3820 * 
	g¿w¥
 = 
Şd_’d
 - (
ssize
 + 
FOUR_SIZE_T_SIZES
 + 
CHUNK_ALIGN_MASK
);

3821 
size_t
 
	goff£t
 = 
®ign_off£t
(
chunk2mem
(
¿w¥
));

3822 * 
	ga¥
 = 
¿w¥
 + 
off£t
;

3823 * 
	gc¥
 = (
a¥
 < (
Şd_tİ
 + 
MIN_CHUNK_SIZE
))? old_top :‡sp;

3824 
mchunk±r
 
	g¥
 = (mchunk±r)
c¥
;

3825 
m£gm’Œ
 
	gss
 = (m£gm’Œ)(
chunk2mem
(
¥
));

3826 
mchunk±r
 
	gŠext
 = 
chunk_¶us_off£t
(
¥
, 
ssize
);

3827 
mchunk±r
 
	gp
 = 
Šext
;

3828 
	gnãnûs
 = 0;

3831 
š™_tİ
(
m
, (
mchunk±r
)
tba£
, 
tsize
 - 
TOP_FOOT_SIZE
);

3834 
as£¹
(
is_®igÃd
(
ss
));

3835 
£t_size_ªd_pšu£_of_šu£_chunk
(
m
, 
¥
, 
ssize
);

3836 *
	gss
 = 
m
->
£g
;

3837 
	gm
->
	g£g
.
	gba£
 = 
tba£
;

3838 
	gm
->
	g£g
.
	gsize
 = 
tsize
;

3839 
	gm
->
	g£g
.
	gsæags
 = 
mm­³d
;

3840 
	gm
->
	g£g
.
	gÃxt
 = 
ss
;

3844 
mchunk±r
 
	gÃx
 = 
chunk_¶us_off£t
(
p
, 
SIZE_T_SIZE
);

3845 
	gp
->
	gh—d
 = 
FENCEPOST_HEAD
;

3846 ++
	gnãnûs
;

3847 ià((*)(&(
	gÃx
->
	gh—d
)è< 
	gŞd_’d
)

3848 
	gp
 = 
Ãx
;

3852 
as£¹
(
nãnûs
 >= 2);

3855 ià(
	gc¥
 !ğ
Şd_tİ
) {

3856 
mchunk±r
 
q
 = (mchunk±r)
Şd_tİ
;

3857 
size_t
 
	gpsize
 = 
c¥
 - 
Şd_tİ
;

3858 
mchunk±r
 
	gŠ
 = 
chunk_¶us_off£t
(
q
, 
psize
);

3859 
£t_ä“_w™h_pšu£
(
q
, 
psize
, 
Š
);

3860 
š£¹_chunk
(
m
, 
q
, 
psize
);

3863 
check_tİ_chunk
(
m
, m->
tİ
);

3869 * 
sys_®loc
(
m¡©e
 
m
, 
size_t
 
nb
) {

3870 * 
	gtba£
 = 
CMFAIL
;

3871 
size_t
 
	gtsize
 = 0;

3872 
æag_t
 
	gmm­_æag
 = 0;

3874 
’su»_š™Ÿliz©iÚ
();

3877 ià(
u£_mm­
(
m
è&& 
	gnb
 >ğ
m·¿ms
.
mm­_th»shŞd
 && m->
tİsize
 != 0) {

3878 * 
mem
 = 
mm­_®loc
(
m
, 
nb
);

3879 ià(
	gmem
 != 0)

3880  
mem
;

3905 ià(
	gMORECORE_CONTIGUOUS
 && !
u£_nÚcÚtiguous
(
m
)) {

3906 * 
	gbr
 = 
CMFAIL
;

3907 
m£gm’Œ
 
	gss
 = (
m
->
tİ
 =ğ0)? 0 : 
£gm’t_hŞdšg
(m, (*)m->top);

3908 
size_t
 
	gasize
 = 0;

3909 
ACQUIRE_MALLOC_GLOBAL_LOCK
();

3911 ià(
	gss
 == 0) {

3912 * 
ba£
 = (*)
CALL_MORECORE
(0);

3913 ià(
	gba£
 !ğ
CMFAIL
) {

3914 
asize
 = 
g¿nuÏr™y_®ign
(
nb
 + 
SYS_ALLOC_PADDING
);

3916 ià(!
is_·ge_®igÃd
(
ba£
))

3917 
	gasize
 +ğ(
·ge_®ign
((
size_t
)
ba£
) - (size_t)base);

3919 ià(
	gasize
 < 
	gHALF_MAX_SIZE_T
 &&

3920 (
	gbr
 = (*)(
CALL_MORECORE
(
asize
))è=ğ
ba£
) {

3921 
tba£
 = 
ba£
;

3922 
	gtsize
 = 
asize
;

3928 
	gasize
 = 
g¿nuÏr™y_®ign
(
nb
 - 
m
->
tİsize
 + 
SYS_ALLOC_PADDING
);

3930 ià(
	gasize
 < 
	gHALF_MAX_SIZE_T
 &&

3931 (
	gbr
 = (*)(
CALL_MORECORE
(
asize
))è=ğ
ss
->
ba£
+ss->
size
) {

3932 
tba£
 = 
br
;

3933 
	gtsize
 = 
asize
;

3937 ià(
	gtba£
 =ğ
CMFAIL
) {

3938 ià(
br
 !ğ
CMFAIL
) {

3939 ià(
asize
 < 
HALF_MAX_SIZE_T
 &&

3940 
asize
 < 
nb
 + 
SYS_ALLOC_PADDING
) {

3941 
size_t
 
esize
 = 
g¿nuÏr™y_®ign
(
nb
 + 
SYS_ALLOC_PADDING
 - 
asize
);

3942 ià(
	gesize
 < 
	gHALF_MAX_SIZE_T
) {

3943 * 
	g’d
 = (*)
CALL_MORECORE
(
esize
);

3944 ià(
	g’d
 !ğ
CMFAIL
)

3945 
asize
 +ğ
esize
;

3947 (è
CALL_MORECORE
(-
asize
);

3948 
	gbr
 = 
CMFAIL
;

3953 ià(
	gbr
 !ğ
CMFAIL
) {

3954 
tba£
 = 
br
;

3955 
	gtsize
 = 
asize
;

3958 
di§bË_cÚtiguous
(
m
);

3961 
RELEASE_MALLOC_GLOBAL_LOCK
();

3964 ià(
	gHAVE_MMAP
 && 
	gtba£
 =ğ
CMFAIL
) {

3965 
size_t
 
rsize
 = 
g¿nuÏr™y_®ign
(
nb
 + 
SYS_ALLOC_PADDING
);

3966 ià(
	grsize
 > 
	gnb
) {

3967 * 
	gmp
 = (*)(
CALL_MMAP
(
rsize
));

3968 ià(
	gmp
 !ğ
CMFAIL
) {

3969 
tba£
 = 
mp
;

3970 
	gtsize
 = 
rsize
;

3971 
	gmm­_æag
 = 
USE_MMAP_BIT
;

3976 ià(
	gHAVE_MORECORE
 && 
	gtba£
 =ğ
CMFAIL
) {

3977 
size_t
 
asize
 = 
g¿nuÏr™y_®ign
(
nb
 + 
SYS_ALLOC_PADDING
);

3978 ià(
	gasize
 < 
	gHALF_MAX_SIZE_T
) {

3979 * 
	gbr
 = 
CMFAIL
;

3980 * 
	g’d
 = 
CMFAIL
;

3981 
ACQUIRE_MALLOC_GLOBAL_LOCK
();

3982 
	gbr
 = (*)(
CALL_MORECORE
(
asize
));

3983 
	g’d
 = (*)(
CALL_MORECORE
(0));

3984 
RELEASE_MALLOC_GLOBAL_LOCK
();

3985 ià(
	gbr
 !ğ
CMFAIL
 && 
’d
 !ğCMFAIL && 
br
 <ƒnd) {

3986 
size_t
 
ssize
 = 
’d
 - 
br
;

3987 ià(
	gssize
 > 
	gnb
 + 
	gTOP_FOOT_SIZE
) {

3988 
	gtba£
 = 
br
;

3989 
	gtsize
 = 
ssize
;

3995 ià(
	gtba£
 !ğ
CMFAIL
) {

3997 ià((
m
->
foÙ´št
 +ğ
tsize
è> m->
max_foÙ´št
)

3998 
m
->
max_foÙ´št
 = m->
foÙ´št
;

4000 ià(!
is_š™Ÿlized
(
m
)) {

4001 ià(
	gm
->
	gËa¡_addr
 =ğ0 || 
tba£
 < 
m
->
Ëa¡_addr
)

4002 
m
->
Ëa¡_addr
 = 
tba£
;

4003 
	gm
->
	g£g
.
	gba£
 = 
tba£
;

4004 
	gm
->
	g£g
.
	gsize
 = 
tsize
;

4005 
	gm
->
	g£g
.
	gsæags
 = 
mm­_æag
;

4006 
	gm
->
	gmagic
 = 
m·¿ms
.
magic
;

4007 
	gm
->
	g»Ëa£_checks
 = 
MAX_RELEASE_CHECK_RATE
;

4008 
š™_bšs
(
m
);

4009 #ià!
ONLY_MSPACES


4010 ià(
is_glob®
(
m
))

4011 
š™_tİ
(
m
, (
mchunk±r
)
tba£
, 
tsize
 - 
TOP_FOOT_SIZE
);

4016 
mchunk±r
 
	gmn
 = 
Ãxt_chunk
(
mem2chunk
(
m
));

4017 
š™_tİ
(
m
, 
mn
, (
size_t
)((
tba£
 + 
tsize
è- (*)mnè-
TOP_FOOT_SIZE
);

4023 
m£gm’Œ
 
	g¥
 = &
m
->
£g
;

4025 
	g¥
 !ğ0 && 
tba£
 !ğ
¥
->
ba£
 + sp->
size
)

4026 
¥
 = (
NO_SEGMENT_TRAVERSAL
è? 0 : sp->
Ãxt
;

4027 ià(
	g¥
 != 0 &&

4028 !
is_ex‹º_£gm’t
(
¥
) &&

4029 (
¥
->
sæags
 & 
USE_MMAP_BIT
è=ğ
mm­_æag
 &&

4030 
£gm’t_hŞds
(
¥
, 
m
->
tİ
)) {

4031 
	g¥
->
	gsize
 +ğ
tsize
;

4032 
š™_tİ
(
m
, m->
tİ
, m->
tİsize
 + 
tsize
);

4035 ià(
	gtba£
 < 
	gm
->
	gËa¡_addr
)

4036 
	gm
->
	gËa¡_addr
 = 
tba£
;

4037 
	g¥
 = &
m
->
£g
;

4038 
	g¥
 !ğ0 && 
¥
->
ba£
 !ğ
tba£
 + 
tsize
)

4039 
¥
 = (
NO_SEGMENT_TRAVERSAL
è? 0 : sp->
Ãxt
;

4040 ià(
	g¥
 != 0 &&

4041 !
is_ex‹º_£gm’t
(
¥
) &&

4042 (
¥
->
sæags
 & 
USE_MMAP_BIT
è=ğ
mm­_æag
) {

4043 * 
Şdba£
 = 
¥
->
ba£
;

4044 
	g¥
->
	gba£
 = 
tba£
;

4045 
	g¥
->
	gsize
 +ğ
tsize
;

4046  
´•’d_®loc
(
m
, 
tba£
, 
Şdba£
, 
nb
);

4049 
add_£gm’t
(
m
, 
tba£
, 
tsize
, 
mm­_æag
);

4053 ià(
	gnb
 < 
	gm
->
	gtİsize
) {

4054 
size_t
 
	grsize
 = 
m
->
tİsize
 -ğ
nb
;

4055 
mchunk±r
 
	gp
 = 
m
->
tİ
;

4056 
mchunk±r
 
	gr
 = 
m
->
tİ
 = 
chunk_¶us_off£t
(
p
, 
nb
);

4057 
	gr
->
	gh—d
 = 
rsize
 | 
PINUSE_BIT
;

4058 
£t_size_ªd_pšu£_of_šu£_chunk
(
m
, 
p
, 
nb
);

4059 
check_tİ_chunk
(
m
, m->
tİ
);

4060 
check_m®loûd_chunk
(
m
, 
chunk2mem
(
p
), 
nb
);

4061  
chunk2mem
(
p
);

4065 
	gMALLOC_FAILURE_ACTION
;

4072 
size_t
 
»Ëa£_unu£d_£gm’ts
(
m¡©e
 
m
) {

4073 
size_t
 
	g»Ëa£d
 = 0;

4074 
	gn£gs
 = 0;

4075 
m£gm’Œ
 
	g´ed
 = &
m
->
£g
;

4076 
m£gm’Œ
 
	g¥
 = 
´ed
->
Ãxt
;

4077 
	g¥
 != 0) {

4078 * 
ba£
 = 
¥
->base;

4079 
size_t
 
	gsize
 = 
¥
->
size
;

4080 
m£gm’Œ
 
	gÃxt
 = 
¥
->
Ãxt
;

4081 ++
	gn£gs
;

4082 ià(
is_mm­³d_£gm’t
(
¥
è&& !
is_ex‹º_£gm’t
(sp)) {

4083 
mchunk±r
 
	gp
 = 
®ign_as_chunk
(
ba£
);

4084 
size_t
 
	gpsize
 = 
chunksize
(
p
);

4086 ià(!
is_šu£
(
p
è&& (*)
	gp
 + 
	gpsize
 >ğ
ba£
 + 
size
 - 
TOP_FOOT_SIZE
) {

4087 
tchunk±r
 

 = (tchunk±r)
p
;

4088 
as£¹
(
£gm’t_hŞds
(
¥
, (*)sp));

4089 ià(
	gp
 =ğ
m
->
dv
) {

4090 
m
->
dv
 = 0;

4091 
	gm
->
	gdvsize
 = 0;

4094 
uÆšk_Ïrge_chunk
(
m
, 

);

4096 ià(
CALL_MUNMAP
(
ba£
, 
size
) == 0) {

4097 
»Ëa£d
 +ğ
size
;

4098 
	gm
->
	gfoÙ´št
 -ğ
size
;

4100 
	g¥
 = 
´ed
;

4101 
	g¥
->
	gÃxt
 = 
Ãxt
;

4104 
š£¹_Ïrge_chunk
(
m
, 

, 
psize
);

4108 ià(
	gNO_SEGMENT_TRAVERSAL
)

4110 
	g´ed
 = 
¥
;

4111 
	g¥
 = 
Ãxt
;

4114 
	gm
->
	g»Ëa£_checks
 = ((
n£gs
 > 
MAX_RELEASE_CHECK_RATE
)?

4115 
n£gs
 : 
MAX_RELEASE_CHECK_RATE
);

4116  
	g»Ëa£d
;

4119 
sys_Œim
(
m¡©e
 
m
, 
size_t
 
·d
) {

4120 
size_t
 
	g»Ëa£d
 = 0;

4121 
’su»_š™Ÿliz©iÚ
();

4122 ià(
	g·d
 < 
	gMAX_REQUEST
 && 
is_š™Ÿlized
(
m
)) {

4123 
	g·d
 +ğ
TOP_FOOT_SIZE
;

4125 ià(
	gm
->
	gtİsize
 > 
	g·d
) {

4127 
size_t
 
	gun™
 = 
m·¿ms
.
g¿nuÏr™y
;

4128 
size_t
 
	gexŒa
 = ((
m
->
tİsize
 - 
·d
 + (
un™
 - 
SIZE_T_ONE
)) / unit -

4129 
SIZE_T_ONE
è* 
un™
;

4130 
m£gm’Œ
 
	g¥
 = 
£gm’t_hŞdšg
(
m
, (*)m->
tİ
);

4132 ià(!
is_ex‹º_£gm’t
(
¥
)) {

4133 ià(
is_mm­³d_£gm’t
(
¥
)) {

4134 ià(
	gHAVE_MMAP
 &&

4135 
	g¥
->
	gsize
 >ğ
exŒa
 &&

4136 !
has_£gm’t_lšk
(
m
, 
¥
)) {

4137 
size_t
 
	gÃwsize
 = 
¥
->
size
 - 
exŒa
;

4139 ià((
CALL_MREMAP
(
¥
->
ba£
, sp->
size
, 
Ãwsize
, 0è!ğ
MFAIL
) ||

4140 (
CALL_MUNMAP
(
¥
->
ba£
 + 
Ãwsize
, 
exŒa
) == 0)) {

4141 
»Ëa£d
 = 
exŒa
;

4145 ià(
	gHAVE_MORECORE
) {

4146 ià(
	gexŒa
 >ğ
HALF_MAX_SIZE_T
)

4147 
exŒa
 = (
HALF_MAX_SIZE_T
è+ 
SIZE_T_ONE
 - 
un™
;

4148 
ACQUIRE_MALLOC_GLOBAL_LOCK
();

4151 * 
	gŞd_br
 = (*)(
CALL_MORECORE
(0));

4152 ià(
	gŞd_br
 =ğ
¥
->
ba£
 + sp->
size
) {

4153 * 
»l_br
 = (*)(
CALL_MORECORE
(-
exŒa
));

4154 * 
	gÃw_br
 = (*)(
CALL_MORECORE
(0));

4155 ià(
	g»l_br
 !ğ
CMFAIL
 && 
Ãw_br
 < 
Şd_br
)

4156 
»Ëa£d
 = 
Şd_br
 - 
Ãw_br
;

4159 
RELEASE_MALLOC_GLOBAL_LOCK
();

4163 ià(
	g»Ëa£d
 != 0) {

4164 
¥
->
size
 -ğ
»Ëa£d
;

4165 
	gm
->
	gfoÙ´št
 -ğ
»Ëa£d
;

4166 
š™_tİ
(
m
, m->
tİ
, m->
tİsize
 - 
»Ëa£d
);

4167 
check_tİ_chunk
(
m
, m->
tİ
);

4172 ià(
	gHAVE_MMAP
)

4173 
	g»Ëa£d
 +ğ
»Ëa£_unu£d_£gm’ts
(
m
);

4176 ià(
	g»Ëa£d
 =ğ0 && 
m
->
tİsize
 > m->
Œim_check
)

4177 
m
->
Œim_check
 = 
MAX_SIZE_T
;

4180  (
	g»Ëa£d
 != 0)? 1 : 0;

4187 * 
tm®loc_Ïrge
(
m¡©e
 
m
, 
size_t
 
nb
) {

4188 
tchunk±r
 
	gv
 = 0;

4189 
size_t
 
	grsize
 = -
nb
;

4190 
tchunk±r
 
	gt
;

4191 
bšdex_t
 
	gidx
;

4192 
compu‹_Œ“_šdex
(
nb
, 
idx
);

4193 ià((
	gt
 = *
Œ“bš_©
(
m
, 
idx
)) != 0) {

4195 
size_t
 
sizeb™s
 = 
nb
 << 
Ëáshiá_fÜ_Œ“_šdex
(
idx
);

4196 
tchunk±r
 
	gr¡
 = 0;

4198 
tchunk±r
 
	g¹
;

4199 
size_t
 
	gŒem
 = 
chunksize
(
t
è- 
nb
;

4200 ià(
	gŒem
 < 
	grsize
) {

4201 
	gv
 = 
t
;

4202 ià((
	grsize
 = 
Œem
) == 0)

4205 
	g¹
 = 
t
->
chd
[1];

4206 
	gt
 = 
t
->
chd
[(
sizeb™s
 >> (
SIZE_T_BITSIZE
-
SIZE_T_ONE
)) & 1];

4207 ià(
	g¹
 !ğ0 && 
¹
 !ğ
t
)

4208 
r¡
 = 
¹
;

4209 ià(
	gt
 == 0) {

4210 
t
 = 
r¡
;

4213 
	gsizeb™s
 <<= 1;

4216 ià(
	gt
 =ğ0 && 
v
 == 0) {

4217 
bšm­_t
 
Ëáb™s
 = 
Ëá_b™s
(
idx2b™
(
idx
)è& 
m
->
Œ“m­
;

4218 ià(
	gËáb™s
 != 0) {

4219 
bšdex_t
 
i
;

4220 
bšm­_t
 
	gËa¡b™
 = 
Ëa¡_b™
(
Ëáb™s
);

4221 
compu‹_b™2idx
(
Ëa¡b™
, 
i
);

4222 
	gt
 = *
Œ“bš_©
(
m
, 
i
);

4226 
	gt
 != 0) {

4227 
size_t
 
Œem
 = 
chunksize
(
t
è- 
nb
;

4228 ià(
	gŒem
 < 
	grsize
) {

4229 
	grsize
 = 
Œem
;

4230 
	gv
 = 
t
;

4232 
	gt
 = 
Ëámo¡_chd
(
t
);

4236 ià(
	gv
 !ğ0 && 
rsize
 < (
size_t
)(
m
->
dvsize
 - 
nb
)) {

4237 ià(
RTCHECK
(
ok_add»ss
(
m
, 
v
))) {

4238 
mchunk±r
 
r
 = 
chunk_¶us_off£t
(
v
, 
nb
);

4239 
as£¹
(
chunksize
(
v
è=ğ
rsize
 + 
nb
);

4240 ià(
RTCHECK
(
ok_Ãxt
(
v
, 
r
))) {

4241 
uÆšk_Ïrge_chunk
(
m
, 
v
);

4242 ià(
	grsize
 < 
	gMIN_CHUNK_SIZE
)

4243 
£t_šu£_ªd_pšu£
(
m
, 
v
, (
rsize
 + 
nb
));

4245 
£t_size_ªd_pšu£_of_šu£_chunk
(
m
, 
v
, 
nb
);

4246 
£t_size_ªd_pšu£_of_ä“_chunk
(
r
, 
rsize
);

4247 
š£¹_chunk
(
m
, 
r
, 
rsize
);

4249  
chunk2mem
(
v
);

4252 
CORRUPTION_ERROR_ACTION
(
m
);

4258 * 
tm®loc_sm®l
(
m¡©e
 
m
, 
size_t
 
nb
) {

4259 
tchunk±r
 
	gt
, 
	gv
;

4260 
size_t
 
	grsize
;

4261 
bšdex_t
 
	gi
;

4262 
bšm­_t
 
	gËa¡b™
 = 
Ëa¡_b™
(
m
->
Œ“m­
);

4263 
compu‹_b™2idx
(
Ëa¡b™
, 
i
);

4264 
	gv
 = 
t
 = *
Œ“bš_©
(
m
, 
i
);

4265 
	grsize
 = 
chunksize
(
t
è- 
nb
;

4267 (
	gt
 = 
Ëámo¡_chd
(
t
)) != 0) {

4268 
size_t
 
Œem
 = 
chunksize
(
t
è- 
nb
;

4269 ià(
	gŒem
 < 
	grsize
) {

4270 
	grsize
 = 
Œem
;

4271 
	gv
 = 
t
;

4275 ià(
RTCHECK
(
ok_add»ss
(
m
, 
v
))) {

4276 
mchunk±r
 
	gr
 = 
chunk_¶us_off£t
(
v
, 
nb
);

4277 
as£¹
(
chunksize
(
v
è=ğ
rsize
 + 
nb
);

4278 ià(
RTCHECK
(
ok_Ãxt
(
v
, 
r
))) {

4279 
uÆšk_Ïrge_chunk
(
m
, 
v
);

4280 ià(
	grsize
 < 
	gMIN_CHUNK_SIZE
)

4281 
£t_šu£_ªd_pšu£
(
m
, 
v
, (
rsize
 + 
nb
));

4283 
£t_size_ªd_pšu£_of_šu£_chunk
(
m
, 
v
, 
nb
);

4284 
£t_size_ªd_pšu£_of_ä“_chunk
(
r
, 
rsize
);

4285 
»¶aû_dv
(
m
, 
r
, 
rsize
);

4287  
chunk2mem
(
v
);

4291 
CORRUPTION_ERROR_ACTION
(
m
);

4297 * 
š‹º®_»®loc
(
m¡©e
 
m
, * 
Şdmem
, 
size_t
 
by‹s
) {

4298 ià(
	gby‹s
 >ğ
MAX_REQUEST
) {

4299 
MALLOC_FAILURE_ACTION
;

4302 ià(!
PREACTION
(
m
)) {

4303 
mchunk±r
 
	gŞdp
 = 
mem2chunk
(
Şdmem
);

4304 
size_t
 
	gŞdsize
 = 
chunksize
(
Şdp
);

4305 
mchunk±r
 
	gÃxt
 = 
chunk_¶us_off£t
(
Şdp
, 
Şdsize
);

4306 
mchunk±r
 
	gÃwp
 = 0;

4307 * 
	gexŒa
 = 0;

4311 ià(
RTCHECK
(
ok_add»ss
(
m
, 
Şdp
è&& 
ok_šu£
(oldp) &&

4312 
ok_Ãxt
(
Şdp
, 
Ãxt
è&& 
ok_pšu£
(next))) {

4313 
size_t
 
	gnb
 = 
»que¡2size
(
by‹s
);

4314 ià(
is_mm­³d
(
Şdp
))

4315 
	gÃwp
 = 
mm­_»size
(
m
, 
Şdp
, 
nb
);

4316 ià(
	gŞdsize
 >ğ
nb
) {

4317 
size_t
 
rsize
 = 
Şdsize
 - 
nb
;

4318 
	gÃwp
 = 
Şdp
;

4319 ià(
	grsize
 >ğ
MIN_CHUNK_SIZE
) {

4320 
mchunk±r
 
»mašd”
 = 
chunk_¶us_off£t
(
Ãwp
, 
nb
);

4321 
£t_šu£
(
m
, 
Ãwp
, 
nb
);

4322 
£t_šu£_ªd_pšu£
(
m
, 
»mašd”
, 
rsize
);

4323 
	gexŒa
 = 
chunk2mem
(
»mašd”
);

4326 ià(
	gÃxt
 =ğ
m
->
tİ
 && 
Şdsize
 + m->
tİsize
 > 
nb
) {

4328 
size_t
 
Ãwsize
 = 
Şdsize
 + 
m
->
tİsize
;

4329 
size_t
 
	gÃwtİsize
 = 
Ãwsize
 - 
nb
;

4330 
mchunk±r
 
	gÃwtİ
 = 
chunk_¶us_off£t
(
Şdp
, 
nb
);

4331 
£t_šu£
(
m
, 
Şdp
, 
nb
);

4332 
	gÃwtİ
->
	gh—d
 = 
Ãwtİsize
 |
PINUSE_BIT
;

4333 
	gm
->
	gtİ
 = 
Ãwtİ
;

4334 
	gm
->
	gtİsize
 = 
Ãwtİsize
;

4335 
	gÃwp
 = 
Şdp
;

4339 
USAGE_ERROR_ACTION
(
m
, 
Şdmem
);

4340 
POSTACTION
(
m
);

4343 #ià
DEBUG


4344 ià(
	gÃwp
 != 0) {

4345 
check_šu£_chunk
(
m
, 
Ãwp
);

4349 
POSTACTION
(
m
);

4351 ià(
	gÃwp
 != 0) {

4352 ià(
exŒa
 != 0) {

4353 
š‹º®_ä“
(
m
, 
exŒa
);

4355  
chunk2mem
(
Ãwp
);

4358 * 
	gÃwmem
 = 
š‹º®_m®loc
(
m
, 
by‹s
);

4359 ià(
	gÃwmem
 != 0) {

4360 
size_t
 
oc
 = 
Şdsize
 - 
ov”h—d_fÜ
(
Şdp
);

4361 
memıy
(
Ãwmem
, 
Şdmem
, (
oc
 < 
by‹s
)? oc : bytes);

4362 
š‹º®_ä“
(
m
, 
Şdmem
);

4364  
	gÃwmem
;

4372 * 
š‹º®_mem®ign
(
m¡©e
 
m
, 
size_t
 
®ignm’t
, size_ˆ
by‹s
) {

4373 ià(
	g®ignm’t
 <ğ
MALLOC_ALIGNMENT
)

4374  
š‹º®_m®loc
(
m
, 
by‹s
);

4375 ià(
	g®ignm’t
 < 
	gMIN_CHUNK_SIZE
)

4376 
	g®ignm’t
 = 
MIN_CHUNK_SIZE
;

4377 ià((
	g®ignm’t
 & (®ignm’t-
	gSIZE_T_ONE
)) != 0) {

4378 
size_t
 
a
 = 
MALLOC_ALIGNMENT
 << 1;

4379 
	ga
 < 
	g®ignm’t
)‡ <<= 1;

4380 
	g®ignm’t
 = 
a
;

4383 ià(
	gby‹s
 >ğ
MAX_REQUEST
 - 
®ignm’t
) {

4384 ià(
m
 != 0) {

4385 
MALLOC_FAILURE_ACTION
;

4389 
size_t
 
	gnb
 = 
»que¡2size
(
by‹s
);

4390 
size_t
 
	g»q
 = 
nb
 + 
®ignm’t
 + 
MIN_CHUNK_SIZE
 - 
CHUNK_OVERHEAD
;

4391 * 
	gmem
 = (*)
š‹º®_m®loc
(
m
, 
»q
);

4392 ià(
	gmem
 != 0) {

4393 * 
Ëad”
 = 0;

4394 * 
	gŒa”
 = 0;

4395 
mchunk±r
 
	gp
 = 
mem2chunk
(
mem
);

4397 ià(
PREACTION
(
m
))  0;

4398 ià((((
	gsize_t
)(
	gmem
)è% 
	g®ignm’t
) != 0) {

4407 * 
br
 = (*)
mem2chunk
((
size_t
)(((size_t)(
mem
 +

4408 
®ignm’t
 -

4409 
SIZE_T_ONE
)) &

4410 -
®ignm’t
));

4411 * 
	gpos
 = ((
size_t
)(
br
 - (*)(
p
)è>ğ
MIN_CHUNK_SIZE
)?

4412 
br
 : br+
®ignm’t
;

4413 
mchunk±r
 
	gÃwp
 = (mchunk±r)
pos
;

4414 
size_t
 
	gËadsize
 = 
pos
 - (*)(
p
);

4415 
size_t
 
	gÃwsize
 = 
chunksize
(
p
è- 
Ëadsize
;

4417 ià(
is_mm­³d
(
p
)) {

4418 
	gÃwp
->
	g´ev_foÙ
 = 
p
->
´ev_foÙ
 + 
Ëadsize
;

4419 
	gÃwp
->
	gh—d
 = 
Ãwsize
;

4422 
£t_šu£
(
m
, 
Ãwp
, 
Ãwsize
);

4423 
£t_šu£
(
m
, 
p
, 
Ëadsize
);

4424 
	gËad”
 = 
chunk2mem
(
p
);

4426 
	gp
 = 
Ãwp
;

4430 ià(!
is_mm­³d
(
p
)) {

4431 
size_t
 
	gsize
 = 
chunksize
(
p
);

4432 ià(
	gsize
 > 
	gnb
 + 
	gMIN_CHUNK_SIZE
) {

4433 
size_t
 
	g»mašd”_size
 = 
size
 - 
nb
;

4434 
mchunk±r
 
	g»mašd”
 = 
chunk_¶us_off£t
(
p
, 
nb
);

4435 
£t_šu£
(
m
, 
p
, 
nb
);

4436 
£t_šu£
(
m
, 
»mašd”
, 
»mašd”_size
);

4437 
	gŒa”
 = 
chunk2mem
(
»mašd”
);

4441 
as£¹
 (
chunksize
(
p
è>ğ
nb
);

4442 
as£¹
((((
size_t
)(
chunk2mem
(
p
))è% 
®ignm’t
) == 0);

4443 
check_šu£_chunk
(
m
, 
p
);

4444 
POSTACTION
(
m
);

4445 ià(
	gËad”
 != 0) {

4446 
š‹º®_ä“
(
m
, 
Ëad”
);

4448 ià(
	gŒa”
 != 0) {

4449 
š‹º®_ä“
(
m
, 
Œa”
);

4451  
chunk2mem
(
p
);

4459 ** 
ŸÎoc
(
m¡©e
 
m
,

4460 
size_t
 
n_–em’ts
,

4461 
size_t
* 
sizes
,

4462 
İts
,

4463 * 
chunks
[]) {

4473 
size_t
 
	g–em’t_size
;

4474 
size_t
 
	gcÚ‹Ás_size
;

4475 
size_t
 
	g¬¿y_size
;

4476 * 
	gmem
;

4477 
mchunk±r
 
	gp
;

4478 
size_t
 
	g»mašd”_size
;

4479 ** 
	gm¬¿y
;

4480 
mchunk±r
 
	g¬¿y_chunk
;

4481 
æag_t
 
	gwas_’abËd
;

4482 
size_t
 
	gsize
;

4483 
size_t
 
	gi
;

4485 
’su»_š™Ÿliz©iÚ
();

4487 ià(
	gchunks
 != 0) {

4488 ià(
n_–em’ts
 == 0)

4489  
chunks
;

4490 
	gm¬¿y
 = 
chunks
;

4491 
	g¬¿y_size
 = 0;

4495 ià(
	gn_–em’ts
 == 0)

4496  (**)
š‹º®_m®loc
(
m
, 0);

4497 
	gm¬¿y
 = 0;

4498 
	g¬¿y_size
 = 
»que¡2size
(
n_–em’ts
 * ((*)));

4502 ià(
	gİts
 & 0x1) {

4503 
	g–em’t_size
 = 
»que¡2size
(*
sizes
);

4504 
	gcÚ‹Ás_size
 = 
n_–em’ts
 * 
–em’t_size
;

4507 
	g–em’t_size
 = 0;

4508 
	gcÚ‹Ás_size
 = 0;

4509 
	gi
 = 0; i !ğ
n_–em’ts
; ++i)

4510 
	gcÚ‹Ás_size
 +ğ
»que¡2size
(
sizes
[
i
]);

4513 
	gsize
 = 
cÚ‹Ás_size
 + 
¬¿y_size
;

4520 
	gwas_’abËd
 = 
u£_mm­
(
m
);

4521 
di§bË_mm­
(
m
);

4522 
	gmem
 = 
š‹º®_m®loc
(
m
, 
size
 - 
CHUNK_OVERHEAD
);

4523 ià(
	gwas_’abËd
)

4524 
’abË_mm­
(
m
);

4525 ià(
	gmem
 == 0)

4528 ià(
PREACTION
(
m
))  0;

4529 
	gp
 = 
mem2chunk
(
mem
);

4530 
	g»mašd”_size
 = 
chunksize
(
p
);

4532 
as£¹
(!
is_mm­³d
(
p
));

4534 ià(
	gİts
 & 0x2) {

4535 
mem£t
((
size_t
*)
mem
, 0, 
»mašd”_size
 - 
SIZE_T_SIZE
 - 
¬¿y_size
);

4539 ià(
	gm¬¿y
 == 0) {

4540 
size_t
 
¬¿y_chunk_size
;

4541 
	g¬¿y_chunk
 = 
chunk_¶us_off£t
(
p
, 
cÚ‹Ás_size
);

4542 
	g¬¿y_chunk_size
 = 
»mašd”_size
 - 
cÚ‹Ás_size
;

4543 
	gm¬¿y
 = (**è(
chunk2mem
(
¬¿y_chunk
));

4544 
£t_size_ªd_pšu£_of_šu£_chunk
(
m
, 
¬¿y_chunk
, 
¬¿y_chunk_size
);

4545 
	g»mašd”_size
 = 
cÚ‹Ás_size
;

4549 
	gi
 = 0; ; ++i) {

4550 
	gm¬¿y
[
i
] = 
chunk2mem
(
p
);

4551 ià(
	gi
 !ğ
n_–em’ts
-1) {

4552 ià(
–em’t_size
 != 0)

4553 
size
 = 
–em’t_size
;

4555 
	gsize
 = 
»que¡2size
(
sizes
[
i
]);

4556 
	g»mašd”_size
 -ğ
size
;

4557 
£t_size_ªd_pšu£_of_šu£_chunk
(
m
, 
p
, 
size
);

4558 
	gp
 = 
chunk_¶us_off£t
(
p
, 
size
);

4561 
£t_size_ªd_pšu£_of_šu£_chunk
(
m
, 
p
, 
»mašd”_size
);

4566 #ià
DEBUG


4567 ià(
	gm¬¿y
 !ğ
chunks
) {

4569 ià(
–em’t_size
 != 0) {

4570 
as£¹
(
»mašd”_size
 =ğ
–em’t_size
);

4573 
as£¹
(
»mašd”_size
 =ğ
»que¡2size
(
sizes
[
i
]));

4575 
check_šu£_chunk
(
m
, 
mem2chunk
(
m¬¿y
));

4577 
	gi
 = 0; i !ğ
n_–em’ts
; ++i)

4578 
check_šu£_chunk
(
m
, 
mem2chunk
(
m¬¿y
[
i
]));

4582 
POSTACTION
(
m
);

4583  
	gm¬¿y
;

4589 #ià!
ONLY_MSPACES


4591 * 
dlm®loc
(
size_t
 
by‹s
) {

4615 #ià
USE_LOCKS


4616 
’su»_š™Ÿliz©iÚ
();

4619 ià(!
PREACTION
(
gm
)) {

4620 * 
	gmem
;

4621 
size_t
 
	gnb
;

4622 ià(
	gby‹s
 <ğ
MAX_SMALL_REQUEST
) {

4623 
bšdex_t
 
idx
;

4624 
bšm­_t
 
	gsm®lb™s
;

4625 
	gnb
 = (
by‹s
 < 
MIN_REQUEST
)? 
MIN_CHUNK_SIZE
 : 
·d_»que¡
(bytes);

4626 
	gidx
 = 
sm®l_šdex
(
nb
);

4627 
	gsm®lb™s
 = 
gm
->
sm®lm­
 >> 
idx
;

4629 ià((
	gsm®lb™s
 & 0x3U) != 0) {

4630 
mchunk±r
 
b
, 
p
;

4631 
	gidx
 +ğ~
sm®lb™s
 & 1;

4632 
	gb
 = 
sm®lbš_©
(
gm
, 
idx
);

4633 
	gp
 = 
b
->
fd
;

4634 
as£¹
(
chunksize
(
p
è=ğ
sm®l_šdex2size
(
idx
));

4635 
uÆšk_fœ¡_sm®l_chunk
(
gm
, 
b
, 
p
, 
idx
);

4636 
£t_šu£_ªd_pšu£
(
gm
, 
p
, 
sm®l_šdex2size
(
idx
));

4637 
	gmem
 = 
chunk2mem
(
p
);

4638 
check_m®loûd_chunk
(
gm
, 
mem
, 
nb
);

4639 
	gpo¡aùiÚ
;

4642 ià(
	gnb
 > 
	ggm
->
	gdvsize
) {

4643 ià(
	gsm®lb™s
 != 0) {

4644 
mchunk±r
 
b
, 
p
, 
r
;

4645 
size_t
 
	grsize
;

4646 
bšdex_t
 
	gi
;

4647 
bšm­_t
 
	gËáb™s
 = (
sm®lb™s
 << 
idx
è& 
Ëá_b™s
(
idx2b™
(idx));

4648 
bšm­_t
 
	gËa¡b™
 = 
Ëa¡_b™
(
Ëáb™s
);

4649 
compu‹_b™2idx
(
Ëa¡b™
, 
i
);

4650 
	gb
 = 
sm®lbš_©
(
gm
, 
i
);

4651 
	gp
 = 
b
->
fd
;

4652 
as£¹
(
chunksize
(
p
è=ğ
sm®l_šdex2size
(
i
));

4653 
uÆšk_fœ¡_sm®l_chunk
(
gm
, 
b
, 
p
, 
i
);

4654 
	grsize
 = 
sm®l_šdex2size
(
i
è- 
nb
;

4656 ià(
	gSIZE_T_SIZE
 !ğ4 && 
rsize
 < 
MIN_CHUNK_SIZE
)

4657 
£t_šu£_ªd_pšu£
(
gm
, 
p
, 
sm®l_šdex2size
(
i
));

4659 
£t_size_ªd_pšu£_of_šu£_chunk
(
gm
, 
p
, 
nb
);

4660 
	gr
 = 
chunk_¶us_off£t
(
p
, 
nb
);

4661 
£t_size_ªd_pšu£_of_ä“_chunk
(
r
, 
rsize
);

4662 
»¶aû_dv
(
gm
, 
r
, 
rsize
);

4664 
	gmem
 = 
chunk2mem
(
p
);

4665 
check_m®loûd_chunk
(
gm
, 
mem
, 
nb
);

4666 
	gpo¡aùiÚ
;

4669 ià(
	ggm
->
	gŒ“m­
 !ğ0 && (
mem
 = 
tm®loc_sm®l
(
gm
, 
nb
)) != 0) {

4670 
check_m®loûd_chunk
(
gm
, 
mem
, 
nb
);

4671 
	gpo¡aùiÚ
;

4675 ià(
	gby‹s
 >ğ
MAX_REQUEST
)

4676 
nb
 = 
MAX_SIZE_T
;

4678 
	gnb
 = 
·d_»que¡
(
by‹s
);

4679 ià(
	ggm
->
	gŒ“m­
 !ğ0 && (
mem
 = 
tm®loc_Ïrge
(
gm
, 
nb
)) != 0) {

4680 
check_m®loûd_chunk
(
gm
, 
mem
, 
nb
);

4681 
	gpo¡aùiÚ
;

4685 ià(
	gnb
 <ğ
gm
->
dvsize
) {

4686 
size_t
 
rsize
 = 
gm
->
dvsize
 - 
nb
;

4687 
mchunk±r
 
	gp
 = 
gm
->
dv
;

4688 ià(
	grsize
 >ğ
MIN_CHUNK_SIZE
) {

4689 
mchunk±r
 
r
 = 
gm
->
dv
 = 
chunk_¶us_off£t
(
p
, 
nb
);

4690 
	ggm
->
	gdvsize
 = 
rsize
;

4691 
£t_size_ªd_pšu£_of_ä“_chunk
(
r
, 
rsize
);

4692 
£t_size_ªd_pšu£_of_šu£_chunk
(
gm
, 
p
, 
nb
);

4695 
size_t
 
	gdvs
 = 
gm
->
dvsize
;

4696 
	ggm
->
	gdvsize
 = 0;

4697 
	ggm
->
	gdv
 = 0;

4698 
£t_šu£_ªd_pšu£
(
gm
, 
p
, 
dvs
);

4700 
	gmem
 = 
chunk2mem
(
p
);

4701 
check_m®loûd_chunk
(
gm
, 
mem
, 
nb
);

4702 
	gpo¡aùiÚ
;

4705 ià(
	gnb
 < 
	ggm
->
	gtİsize
) {

4706 
size_t
 
	grsize
 = 
gm
->
tİsize
 -ğ
nb
;

4707 
mchunk±r
 
	gp
 = 
gm
->
tİ
;

4708 
mchunk±r
 
	gr
 = 
gm
->
tİ
 = 
chunk_¶us_off£t
(
p
, 
nb
);

4709 
	gr
->
	gh—d
 = 
rsize
 | 
PINUSE_BIT
;

4710 
£t_size_ªd_pšu£_of_šu£_chunk
(
gm
, 
p
, 
nb
);

4711 
	gmem
 = 
chunk2mem
(
p
);

4712 
check_tİ_chunk
(
gm
, gm->
tİ
);

4713 
check_m®loûd_chunk
(
gm
, 
mem
, 
nb
);

4714 
	gpo¡aùiÚ
;

4717 
	gmem
 = 
sys_®loc
(
gm
, 
nb
);

4719 
	gpo¡aùiÚ
:

4720 
POSTACTION
(
gm
);

4721  
	gmem
;

4727 
dlä“
(* 
mem
) {

4734 ià(
	gmem
 != 0) {

4735 
mchunk±r
 
p
 = 
mem2chunk
(
mem
);

4736 #ià
FOOTERS


4737 
m¡©e
 
	gfm
 = 
g‘_m¡©e_fÜ
(
p
);

4738 ià(!
ok_magic
(
fm
)) {

4739 
USAGE_ERROR_ACTION
(
fm
, 
p
);

4743 
	#fm
 
gm


	)

4745 ià(!
PREACTION
(
fm
)) {

4746 
check_šu£_chunk
(
fm
, 
p
);

4747 ià(
RTCHECK
(
ok_add»ss
(
fm
, 
p
è&& 
ok_šu£
(p))) {

4748 
size_t
 
	gpsize
 = 
chunksize
(
p
);

4749 
mchunk±r
 
	gÃxt
 = 
chunk_¶us_off£t
(
p
, 
psize
);

4750 ià(!
pšu£
(
p
)) {

4751 
size_t
 
	g´evsize
 = 
p
->
´ev_foÙ
;

4752 ià(
is_mm­³d
(
p
)) {

4753 
	gpsize
 +ğ
´evsize
 + 
MMAP_FOOT_PAD
;

4754 ià(
CALL_MUNMAP
((*)
p
 - 
´evsize
, 
psize
) == 0)

4755 
fm
->
foÙ´št
 -ğ
psize
;

4756 
	gpo¡aùiÚ
;

4759 
mchunk±r
 
	g´ev
 = 
chunk_mšus_off£t
(
p
, 
´evsize
);

4760 
	gpsize
 +ğ
´evsize
;

4761 
	gp
 = 
´ev
;

4762 ià(
RTCHECK
(
ok_add»ss
(
fm
, 
´ev
))) {

4763 ià(
	gp
 !ğ
fm
->
dv
) {

4764 
uÆšk_chunk
(
fm
, 
p
, 
´evsize
);

4766 ià((
	gÃxt
->
	gh—d
 & 
	gINUSE_BITS
è=ğ
INUSE_BITS
) {

4767 
fm
->
dvsize
 = 
psize
;

4768 
£t_ä“_w™h_pšu£
(
p
, 
psize
, 
Ãxt
);

4769 
	gpo¡aùiÚ
;

4773 
	g”rÜaùiÚ
;

4777 ià(
RTCHECK
(
ok_Ãxt
(
p
, 
Ãxt
è&& 
ok_pšu£
(next))) {

4778 ià(!
cšu£
(
Ãxt
)) {

4779 ià(
	gÃxt
 =ğ
fm
->
tİ
) {

4780 
size_t
 
tsize
 = 
fm
->
tİsize
 +ğ
psize
;

4781 
	gfm
->
	gtİ
 = 
p
;

4782 
	gp
->
	gh—d
 = 
tsize
 | 
PINUSE_BIT
;

4783 ià(
	gp
 =ğ
fm
->
dv
) {

4784 
fm
->
dv
 = 0;

4785 
	gfm
->
	gdvsize
 = 0;

4787 ià(
should_Œim
(
fm
, 
tsize
))

4788 
sys_Œim
(
fm
, 0);

4789 
	gpo¡aùiÚ
;

4791 ià(
	gÃxt
 =ğ
fm
->
dv
) {

4792 
size_t
 
dsize
 = 
fm
->
dvsize
 +ğ
psize
;

4793 
	gfm
->
	gdv
 = 
p
;

4794 
£t_size_ªd_pšu£_of_ä“_chunk
(
p
, 
dsize
);

4795 
	gpo¡aùiÚ
;

4798 
size_t
 
	gnsize
 = 
chunksize
(
Ãxt
);

4799 
	gpsize
 +ğ
nsize
;

4800 
uÆšk_chunk
(
fm
, 
Ãxt
, 
nsize
);

4801 
£t_size_ªd_pšu£_of_ä“_chunk
(
p
, 
psize
);

4802 ià(
	gp
 =ğ
fm
->
dv
) {

4803 
fm
->
dvsize
 = 
psize
;

4804 
	gpo¡aùiÚ
;

4809 
£t_ä“_w™h_pšu£
(
p
, 
psize
, 
Ãxt
);

4811 ià(
is_sm®l
(
psize
)) {

4812 
š£¹_sm®l_chunk
(
fm
, 
p
, 
psize
);

4813 
check_ä“_chunk
(
fm
, 
p
);

4816 
tchunk±r
 
	g
 = (tchunk±r)
p
;

4817 
š£¹_Ïrge_chunk
(
fm
, 

, 
psize
);

4818 
check_ä“_chunk
(
fm
, 
p
);

4819 ià(--
	gfm
->
	g»Ëa£_checks
 == 0)

4820 
»Ëa£_unu£d_£gm’ts
(
fm
);

4822 
	gpo¡aùiÚ
;

4825 
	g”rÜaùiÚ
:

4826 
USAGE_ERROR_ACTION
(
fm
, 
p
);

4827 
	gpo¡aùiÚ
:

4828 
POSTACTION
(
fm
);

4831 #ià!
FOOTERS


4832 #undeà
fm


4836 * 
dlÿÎoc
(
size_t
 
n_–em’ts
, size_ˆ
–em_size
) {

4837 * 
	gmem
;

4838 
size_t
 
	g»q
 = 0;

4839 ià(
	gn_–em’ts
 != 0) {

4840 
»q
 = 
n_–em’ts
 * 
–em_size
;

4841 ià(((
	gn_–em’ts
 | 
	g–em_size
è& ~(
	gsize_t
)0xffff) &&

4842 (
	g»q
 / 
	gn_–em’ts
 !ğ
–em_size
))

4843 
»q
 = 
MAX_SIZE_T
;

4845 
	gmem
 = 
dlm®loc
(
»q
);

4846 ià(
	gmem
 !ğ0 && 
ÿÎoc_mu¡_ş—r
(
mem2chunk
(
mem
)))

4847 
mem£t
(
mem
, 0, 
»q
);

4848  
	gmem
;

4851 * 
dÌ—Îoc
(* 
Şdmem
, 
size_t
 
by‹s
) {

4852 ià(
	gŞdmem
 == 0)

4853  
dlm®loc
(
by‹s
);

4854 #ifdeà
REALLOC_ZERO_BYTES_FREES


4855 ià(
	gby‹s
 == 0) {

4856 
dlä“
(
Şdmem
);

4861 #ià! 
FOOTERS


4862 
m¡©e
 
	gm
 = 
gm
;

4864 
m¡©e
 
	gm
 = 
g‘_m¡©e_fÜ
(
mem2chunk
(
Şdmem
));

4865 ià(!
ok_magic
(
m
)) {

4866 
USAGE_ERROR_ACTION
(
m
, 
Şdmem
);

4870  
š‹º®_»®loc
(
m
, 
Şdmem
, 
by‹s
);

4874 * 
dlmem®ign
(
size_t
 
®ignm’t
, size_ˆ
by‹s
) {

4875  
š‹º®_mem®ign
(
gm
, 
®ignm’t
, 
by‹s
);

4878 ** 
dlšd•’d’t_ÿÎoc
(
size_t
 
n_–em’ts
, size_ˆ
–em_size
,

4879 * 
chunks
[]) {

4880 
size_t
 
	gsz
 = 
–em_size
;

4881  
ŸÎoc
(
gm
, 
n_–em’ts
, &
sz
, 3, 
chunks
);

4884 ** 
dlšd•’d’t_com®loc
(
size_t
 
n_–em’ts
, size_ˆ
sizes
[],

4885 * 
chunks
[]) {

4886  
ŸÎoc
(
gm
, 
n_–em’ts
, 
sizes
, 0, 
chunks
);

4889 * 
dlv®loc
(
size_t
 
by‹s
) {

4890 
size_t
 
	g·gesz
;

4891 
’su»_š™Ÿliz©iÚ
();

4892 
	g·gesz
 = 
m·¿ms
.
·ge_size
;

4893  
dlmem®ign
(
·gesz
, 
by‹s
);

4896 * 
dÍv®loc
(
size_t
 
by‹s
) {

4897 
size_t
 
	g·gesz
;

4898 
’su»_š™Ÿliz©iÚ
();

4899 
	g·gesz
 = 
m·¿ms
.
·ge_size
;

4900  
dlmem®ign
(
·gesz
, (
by‹s
 +…agesz - 
SIZE_T_ONE
) & ~(pagesz - SIZE_T_ONE));

4903 
dlm®loc_Œim
(
size_t
 
·d
) {

4904 
	g»suÉ
 = 0;

4905 
’su»_š™Ÿliz©iÚ
();

4906 ià(!
PREACTION
(
gm
)) {

4907 
	g»suÉ
 = 
sys_Œim
(
gm
, 
·d
);

4908 
POSTACTION
(
gm
);

4910  
	g»suÉ
;

4913 
size_t
 
dlm®loc_foÙ´št
() {

4914  
	ggm
->
	gfoÙ´št
;

4917 
size_t
 
dlm®loc_max_foÙ´št
() {

4918  
	ggm
->
	gmax_foÙ´št
;

4921 #ià!
NO_MALLINFO


4922 
m®lšfo
 
dlm®lšfo
() {

4923  
š‹º®_m®lšfo
(
gm
);

4927 
dlm®loc_¡©s
() {

4928 
š‹º®_m®loc_¡©s
(
gm
);

4931 
dlm®lİt
(
·¿m_numb”
, 
v®ue
) {

4932  
chªge_m·¿m
(
·¿m_numb”
, 
v®ue
);

4937 
size_t
 
dlm®loc_u§bË_size
(* 
mem
) {

4938 ià(
	gmem
 != 0) {

4939 
mchunk±r
 
p
 = 
mem2chunk
(
mem
);

4940 ià(
is_šu£
(
p
))

4941  
chunksize
(
p
è- 
ov”h—d_fÜ
(p);

4948 #ià
MSPACES


4950 
m¡©e
 
š™_u£r_m¡©e
(* 
tba£
, 
size_t
 
tsize
) {

4951 
size_t
 
	gmsize
 = 
·d_»que¡
((
m®loc_¡©e
));

4952 
mchunk±r
 
	gmn
;

4953 
mchunk±r
 
	gm¥
 = 
®ign_as_chunk
(
tba£
);

4954 
m¡©e
 
	gm
 = (m¡©e)(
chunk2mem
(
m¥
));

4955 
mem£t
(
m
, 0, 
msize
);

4956 
INITIAL_LOCK
(&
m
->
mu‹x
);

4957 
	gm¥
->
	gh—d
 = (
msize
|
INUSE_BITS
);

4958 
	gm
->
	g£g
.
	gba£
 = 
m
->
Ëa¡_addr
 = 
tba£
;

4959 
	gm
->
	g£g
.
	gsize
 = 
m
->
foÙ´št
 = m->
max_foÙ´št
 = 
tsize
;

4960 
	gm
->
	gmagic
 = 
m·¿ms
.
magic
;

4961 
	gm
->
	g»Ëa£_checks
 = 
MAX_RELEASE_CHECK_RATE
;

4962 
	gm
->
	gmæags
 = 
m·¿ms
.
deçuÉ_mæags
;

4963 
	gm
->
	gex
 = 0;

4964 
	gm
->
	gexts
 = 0;

4965 
di§bË_cÚtiguous
(
m
);

4966 
š™_bšs
(
m
);

4967 
	gmn
 = 
Ãxt_chunk
(
mem2chunk
(
m
));

4968 
š™_tİ
(
m
, 
mn
, (
size_t
)((
tba£
 + 
tsize
è- (*)mnè- 
TOP_FOOT_SIZE
);

4969 
check_tİ_chunk
(
m
, m->
tİ
);

4970  
	gm
;

4973 
m¥aû
 
ü—‹_m¥aû
(
size_t
 
ÿ·c™y
, 
locked
) {

4974 
m¡©e
 
	gm
 = 0;

4975 
size_t
 
	gmsize
;

4976 
’su»_š™Ÿliz©iÚ
();

4977 
	gmsize
 = 
·d_»que¡
((
m®loc_¡©e
));

4978 ià(
	gÿ·c™y
 < (
	gsize_t
è-(
	gmsize
 + 
	gTOP_FOOT_SIZE
 + 
	gm·¿ms
.
	g·ge_size
)) {

4979 
size_t
 
	grs
 = ((
ÿ·c™y
 =ğ0)? 
m·¿ms
.
g¿nuÏr™y
 :

4980 (
ÿ·c™y
 + 
TOP_FOOT_SIZE
 + 
msize
));

4981 
size_t
 
	gtsize
 = 
g¿nuÏr™y_®ign
(
rs
);

4982 * 
	gtba£
 = (*)(
CALL_MMAP
(
tsize
));

4983 ià(
	gtba£
 !ğ
CMFAIL
) {

4984 
m
 = 
š™_u£r_m¡©e
(
tba£
, 
tsize
);

4985 
	gm
->
	g£g
.
	gsæags
 = 
USE_MMAP_BIT
;

4986 
£t_lock
(
m
, 
locked
);

4989  (
	gm¥aû
)
	gm
;

4992 
m¥aû
 
ü—‹_m¥aû_w™h_ba£
(* 
ba£
, 
size_t
 
ÿ·c™y
, 
locked
) {

4993 
m¡©e
 
	gm
 = 0;

4994 
size_t
 
	gmsize
;

4995 
’su»_š™Ÿliz©iÚ
();

4996 
	gmsize
 = 
·d_»que¡
((
m®loc_¡©e
));

4997 ià(
	gÿ·c™y
 > 
	gmsize
 + 
	gTOP_FOOT_SIZE
 &&

4998 
	gÿ·c™y
 < (
	gsize_t
è-(
	gmsize
 + 
	gTOP_FOOT_SIZE
 + 
	gm·¿ms
.
	g·ge_size
)) {

4999 
	gm
 = 
š™_u£r_m¡©e
((*)
ba£
, 
ÿ·c™y
);

5000 
	gm
->
	g£g
.
	gsæags
 = 
EXTERN_BIT
;

5001 
£t_lock
(
m
, 
locked
);

5003  (
	gm¥aû
)
	gm
;

5006 
m¥aû_Œack_Ïrge_chunks
(
m¥aû
 
m¥
, 
’abË
) {

5007 
	g»t
 = 0;

5008 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5009 ià(!
PREACTION
(
ms
)) {

5010 ià(!
u£_mm­
(
ms
))

5011 
	g»t
 = 1;

5012 ià(!
	g’abË
)

5013 
’abË_mm­
(
ms
);

5015 
di§bË_mm­
(
ms
);

5016 
POSTACTION
(
ms
);

5018  
	g»t
;

5021 
size_t
 
de¡roy_m¥aû
(
m¥aû
 
m¥
) {

5022 
size_t
 
	gä“d
 = 0;

5023 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5024 ià(
ok_magic
(
ms
)) {

5025 
m£gm’Œ
 
	g¥
 = &
ms
->
£g
;

5026 
	g¥
 != 0) {

5027 * 
ba£
 = 
¥
->base;

5028 
size_t
 
	gsize
 = 
¥
->
size
;

5029 
æag_t
 
	gæag
 = 
¥
->
sæags
;

5030 
	g¥
 = 
¥
->
Ãxt
;

5031 ià((
	gæag
 & 
	gUSE_MMAP_BIT
è&& !(æag & 
	gEXTERN_BIT
) &&

5032 
CALL_MUNMAP
(
ba£
, 
size
) == 0)

5033 
ä“d
 +ğ
size
;

5037 
USAGE_ERROR_ACTION
(
ms
,ms);

5039  
	gä“d
;

5048 * 
m¥aû_m®loc
(
m¥aû
 
m¥
, 
size_t
 
by‹s
) {

5049 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5050 ià(!
ok_magic
(
ms
)) {

5051 
USAGE_ERROR_ACTION
(
ms
,ms);

5054 ià(!
PREACTION
(
ms
)) {

5055 * 
	gmem
;

5056 
size_t
 
	gnb
;

5057 ià(
	gby‹s
 <ğ
MAX_SMALL_REQUEST
) {

5058 
bšdex_t
 
idx
;

5059 
bšm­_t
 
	gsm®lb™s
;

5060 
	gnb
 = (
by‹s
 < 
MIN_REQUEST
)? 
MIN_CHUNK_SIZE
 : 
·d_»que¡
(bytes);

5061 
	gidx
 = 
sm®l_šdex
(
nb
);

5062 
	gsm®lb™s
 = 
ms
->
sm®lm­
 >> 
idx
;

5064 ià((
	gsm®lb™s
 & 0x3U) != 0) {

5065 
mchunk±r
 
b
, 
p
;

5066 
	gidx
 +ğ~
sm®lb™s
 & 1;

5067 
	gb
 = 
sm®lbš_©
(
ms
, 
idx
);

5068 
	gp
 = 
b
->
fd
;

5069 
as£¹
(
chunksize
(
p
è=ğ
sm®l_šdex2size
(
idx
));

5070 
uÆšk_fœ¡_sm®l_chunk
(
ms
, 
b
, 
p
, 
idx
);

5071 
£t_šu£_ªd_pšu£
(
ms
, 
p
, 
sm®l_šdex2size
(
idx
));

5072 
	gmem
 = 
chunk2mem
(
p
);

5073 
check_m®loûd_chunk
(
ms
, 
mem
, 
nb
);

5074 
	gpo¡aùiÚ
;

5077 ià(
	gnb
 > 
	gms
->
	gdvsize
) {

5078 ià(
	gsm®lb™s
 != 0) {

5079 
mchunk±r
 
b
, 
p
, 
r
;

5080 
size_t
 
	grsize
;

5081 
bšdex_t
 
	gi
;

5082 
bšm­_t
 
	gËáb™s
 = (
sm®lb™s
 << 
idx
è& 
Ëá_b™s
(
idx2b™
(idx));

5083 
bšm­_t
 
	gËa¡b™
 = 
Ëa¡_b™
(
Ëáb™s
);

5084 
compu‹_b™2idx
(
Ëa¡b™
, 
i
);

5085 
	gb
 = 
sm®lbš_©
(
ms
, 
i
);

5086 
	gp
 = 
b
->
fd
;

5087 
as£¹
(
chunksize
(
p
è=ğ
sm®l_šdex2size
(
i
));

5088 
uÆšk_fœ¡_sm®l_chunk
(
ms
, 
b
, 
p
, 
i
);

5089 
	grsize
 = 
sm®l_šdex2size
(
i
è- 
nb
;

5091 ià(
	gSIZE_T_SIZE
 !ğ4 && 
rsize
 < 
MIN_CHUNK_SIZE
)

5092 
£t_šu£_ªd_pšu£
(
ms
, 
p
, 
sm®l_šdex2size
(
i
));

5094 
£t_size_ªd_pšu£_of_šu£_chunk
(
ms
, 
p
, 
nb
);

5095 
	gr
 = 
chunk_¶us_off£t
(
p
, 
nb
);

5096 
£t_size_ªd_pšu£_of_ä“_chunk
(
r
, 
rsize
);

5097 
»¶aû_dv
(
ms
, 
r
, 
rsize
);

5099 
	gmem
 = 
chunk2mem
(
p
);

5100 
check_m®loûd_chunk
(
ms
, 
mem
, 
nb
);

5101 
	gpo¡aùiÚ
;

5104 ià(
	gms
->
	gŒ“m­
 !ğ0 && (
mem
 = 
tm®loc_sm®l
(
ms
, 
nb
)) != 0) {

5105 
check_m®loûd_chunk
(
ms
, 
mem
, 
nb
);

5106 
	gpo¡aùiÚ
;

5110 ià(
	gby‹s
 >ğ
MAX_REQUEST
)

5111 
nb
 = 
MAX_SIZE_T
;

5113 
	gnb
 = 
·d_»que¡
(
by‹s
);

5114 ià(
	gms
->
	gŒ“m­
 !ğ0 && (
mem
 = 
tm®loc_Ïrge
(
ms
, 
nb
)) != 0) {

5115 
check_m®loûd_chunk
(
ms
, 
mem
, 
nb
);

5116 
	gpo¡aùiÚ
;

5120 ià(
	gnb
 <ğ
ms
->
dvsize
) {

5121 
size_t
 
rsize
 = 
ms
->
dvsize
 - 
nb
;

5122 
mchunk±r
 
	gp
 = 
ms
->
dv
;

5123 ià(
	grsize
 >ğ
MIN_CHUNK_SIZE
) {

5124 
mchunk±r
 
r
 = 
ms
->
dv
 = 
chunk_¶us_off£t
(
p
, 
nb
);

5125 
	gms
->
	gdvsize
 = 
rsize
;

5126 
£t_size_ªd_pšu£_of_ä“_chunk
(
r
, 
rsize
);

5127 
£t_size_ªd_pšu£_of_šu£_chunk
(
ms
, 
p
, 
nb
);

5130 
size_t
 
	gdvs
 = 
ms
->
dvsize
;

5131 
	gms
->
	gdvsize
 = 0;

5132 
	gms
->
	gdv
 = 0;

5133 
£t_šu£_ªd_pšu£
(
ms
, 
p
, 
dvs
);

5135 
	gmem
 = 
chunk2mem
(
p
);

5136 
check_m®loûd_chunk
(
ms
, 
mem
, 
nb
);

5137 
	gpo¡aùiÚ
;

5140 ià(
	gnb
 < 
	gms
->
	gtİsize
) {

5141 
size_t
 
	grsize
 = 
ms
->
tİsize
 -ğ
nb
;

5142 
mchunk±r
 
	gp
 = 
ms
->
tİ
;

5143 
mchunk±r
 
	gr
 = 
ms
->
tİ
 = 
chunk_¶us_off£t
(
p
, 
nb
);

5144 
	gr
->
	gh—d
 = 
rsize
 | 
PINUSE_BIT
;

5145 
£t_size_ªd_pšu£_of_šu£_chunk
(
ms
, 
p
, 
nb
);

5146 
	gmem
 = 
chunk2mem
(
p
);

5147 
check_tİ_chunk
(
ms
, ms->
tİ
);

5148 
check_m®loûd_chunk
(
ms
, 
mem
, 
nb
);

5149 
	gpo¡aùiÚ
;

5152 
	gmem
 = 
sys_®loc
(
ms
, 
nb
);

5154 
	gpo¡aùiÚ
:

5155 
POSTACTION
(
ms
);

5156  
	gmem
;

5162 
m¥aû_ä“
(
m¥aû
 
m¥
, * 
mem
) {

5163 ià(
	gmem
 != 0) {

5164 
mchunk±r
 
p
 = 
mem2chunk
(
mem
);

5165 #ià
FOOTERS


5166 
m¡©e
 
	gfm
 = 
g‘_m¡©e_fÜ
(
p
);

5167 
	gm¥
 = 
m¥
;

5169 
m¡©e
 
	gfm
 = (m¡©e)
m¥
;

5171 ià(!
ok_magic
(
fm
)) {

5172 
USAGE_ERROR_ACTION
(
fm
, 
p
);

5175 ià(!
PREACTION
(
fm
)) {

5176 
check_šu£_chunk
(
fm
, 
p
);

5177 ià(
RTCHECK
(
ok_add»ss
(
fm
, 
p
è&& 
ok_šu£
(p))) {

5178 
size_t
 
	gpsize
 = 
chunksize
(
p
);

5179 
mchunk±r
 
	gÃxt
 = 
chunk_¶us_off£t
(
p
, 
psize
);

5180 ià(!
pšu£
(
p
)) {

5181 
size_t
 
	g´evsize
 = 
p
->
´ev_foÙ
;

5182 ià(
is_mm­³d
(
p
)) {

5183 
	gpsize
 +ğ
´evsize
 + 
MMAP_FOOT_PAD
;

5184 ià(
CALL_MUNMAP
((*)
p
 - 
´evsize
, 
psize
) == 0)

5185 
fm
->
foÙ´št
 -ğ
psize
;

5186 
	gpo¡aùiÚ
;

5189 
mchunk±r
 
	g´ev
 = 
chunk_mšus_off£t
(
p
, 
´evsize
);

5190 
	gpsize
 +ğ
´evsize
;

5191 
	gp
 = 
´ev
;

5192 ià(
RTCHECK
(
ok_add»ss
(
fm
, 
´ev
))) {

5193 ià(
	gp
 !ğ
fm
->
dv
) {

5194 
uÆšk_chunk
(
fm
, 
p
, 
´evsize
);

5196 ià((
	gÃxt
->
	gh—d
 & 
	gINUSE_BITS
è=ğ
INUSE_BITS
) {

5197 
fm
->
dvsize
 = 
psize
;

5198 
£t_ä“_w™h_pšu£
(
p
, 
psize
, 
Ãxt
);

5199 
	gpo¡aùiÚ
;

5203 
	g”rÜaùiÚ
;

5207 ià(
RTCHECK
(
ok_Ãxt
(
p
, 
Ãxt
è&& 
ok_pšu£
(next))) {

5208 ià(!
cšu£
(
Ãxt
)) {

5209 ià(
	gÃxt
 =ğ
fm
->
tİ
) {

5210 
size_t
 
tsize
 = 
fm
->
tİsize
 +ğ
psize
;

5211 
	gfm
->
	gtİ
 = 
p
;

5212 
	gp
->
	gh—d
 = 
tsize
 | 
PINUSE_BIT
;

5213 ià(
	gp
 =ğ
fm
->
dv
) {

5214 
fm
->
dv
 = 0;

5215 
	gfm
->
	gdvsize
 = 0;

5217 ià(
should_Œim
(
fm
, 
tsize
))

5218 
sys_Œim
(
fm
, 0);

5219 
	gpo¡aùiÚ
;

5221 ià(
	gÃxt
 =ğ
fm
->
dv
) {

5222 
size_t
 
dsize
 = 
fm
->
dvsize
 +ğ
psize
;

5223 
	gfm
->
	gdv
 = 
p
;

5224 
£t_size_ªd_pšu£_of_ä“_chunk
(
p
, 
dsize
);

5225 
	gpo¡aùiÚ
;

5228 
size_t
 
	gnsize
 = 
chunksize
(
Ãxt
);

5229 
	gpsize
 +ğ
nsize
;

5230 
uÆšk_chunk
(
fm
, 
Ãxt
, 
nsize
);

5231 
£t_size_ªd_pšu£_of_ä“_chunk
(
p
, 
psize
);

5232 ià(
	gp
 =ğ
fm
->
dv
) {

5233 
fm
->
dvsize
 = 
psize
;

5234 
	gpo¡aùiÚ
;

5239 
£t_ä“_w™h_pšu£
(
p
, 
psize
, 
Ãxt
);

5241 ià(
is_sm®l
(
psize
)) {

5242 
š£¹_sm®l_chunk
(
fm
, 
p
, 
psize
);

5243 
check_ä“_chunk
(
fm
, 
p
);

5246 
tchunk±r
 
	g
 = (tchunk±r)
p
;

5247 
š£¹_Ïrge_chunk
(
fm
, 

, 
psize
);

5248 
check_ä“_chunk
(
fm
, 
p
);

5249 ià(--
	gfm
->
	g»Ëa£_checks
 == 0)

5250 
»Ëa£_unu£d_£gm’ts
(
fm
);

5252 
	gpo¡aùiÚ
;

5255 
	g”rÜaùiÚ
:

5256 
USAGE_ERROR_ACTION
(
fm
, 
p
);

5257 
	gpo¡aùiÚ
:

5258 
POSTACTION
(
fm
);

5263 * 
m¥aû_ÿÎoc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
, size_ˆ
–em_size
) {

5264 * 
	gmem
;

5265 
size_t
 
	g»q
 = 0;

5266 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5267 ià(!
ok_magic
(
ms
)) {

5268 
USAGE_ERROR_ACTION
(
ms
,ms);

5271 ià(
	gn_–em’ts
 != 0) {

5272 
»q
 = 
n_–em’ts
 * 
–em_size
;

5273 ià(((
	gn_–em’ts
 | 
	g–em_size
è& ~(
	gsize_t
)0xffff) &&

5274 (
	g»q
 / 
	gn_–em’ts
 !ğ
–em_size
))

5275 
»q
 = 
MAX_SIZE_T
;

5277 
	gmem
 = 
š‹º®_m®loc
(
ms
, 
»q
);

5278 ià(
	gmem
 !ğ0 && 
ÿÎoc_mu¡_ş—r
(
mem2chunk
(
mem
)))

5279 
mem£t
(
mem
, 0, 
»q
);

5280  
	gmem
;

5283 * 
m¥aû_»®loc
(
m¥aû
 
m¥
, * 
Şdmem
, 
size_t
 
by‹s
) {

5284 ià(
	gŞdmem
 == 0)

5285  
m¥aû_m®loc
(
m¥
, 
by‹s
);

5286 #ifdeà
REALLOC_ZERO_BYTES_FREES


5287 ià(
	gby‹s
 == 0) {

5288 
m¥aû_ä“
(
m¥
, 
Şdmem
);

5293 #ià
FOOTERS


5294 
mchunk±r
 
	gp
 = 
mem2chunk
(
Şdmem
);

5295 
m¡©e
 
	gms
 = 
g‘_m¡©e_fÜ
(
p
);

5297 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5299 ià(!
ok_magic
(
ms
)) {

5300 
USAGE_ERROR_ACTION
(
ms
,ms);

5303  
š‹º®_»®loc
(
ms
, 
Şdmem
, 
by‹s
);

5307 * 
m¥aû_mem®ign
(
m¥aû
 
m¥
, 
size_t
 
®ignm’t
, size_ˆ
by‹s
) {

5308 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5309 ià(!
ok_magic
(
ms
)) {

5310 
USAGE_ERROR_ACTION
(
ms
,ms);

5313  
š‹º®_mem®ign
(
ms
, 
®ignm’t
, 
by‹s
);

5316 ** 
m¥aû_šd•’d’t_ÿÎoc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
,

5317 
size_t
 
–em_size
, * 
chunks
[]) {

5318 
size_t
 
	gsz
 = 
–em_size
;

5319 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5320 ià(!
ok_magic
(
ms
)) {

5321 
USAGE_ERROR_ACTION
(
ms
,ms);

5324  
ŸÎoc
(
ms
, 
n_–em’ts
, &
sz
, 3, 
chunks
);

5327 ** 
m¥aû_šd•’d’t_com®loc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
,

5328 
size_t
 
sizes
[], * 
chunks
[]) {

5329 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5330 ià(!
ok_magic
(
ms
)) {

5331 
USAGE_ERROR_ACTION
(
ms
,ms);

5334  
ŸÎoc
(
ms
, 
n_–em’ts
, 
sizes
, 0, 
chunks
);

5337 
m¥aû_Œim
(
m¥aû
 
m¥
, 
size_t
 
·d
) {

5338 
	g»suÉ
 = 0;

5339 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5340 ià(
ok_magic
(
ms
)) {

5341 ià(!
PREACTION
(
ms
)) {

5342 
	g»suÉ
 = 
sys_Œim
(
ms
, 
·d
);

5343 
POSTACTION
(
ms
);

5347 
USAGE_ERROR_ACTION
(
ms
,ms);

5349  
	g»suÉ
;

5352 
m¥aû_m®loc_¡©s
(
m¥aû
 
m¥
) {

5353 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5354 ià(
ok_magic
(
ms
)) {

5355 
š‹º®_m®loc_¡©s
(
ms
);

5358 
USAGE_ERROR_ACTION
(
ms
,ms);

5362 
size_t
 
m¥aû_foÙ´št
(
m¥aû
 
m¥
) {

5363 
size_t
 
	g»suÉ
 = 0;

5364 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5365 ià(
ok_magic
(
ms
)) {

5366 
	g»suÉ
 = 
ms
->
foÙ´št
;

5369 
USAGE_ERROR_ACTION
(
ms
,ms);

5371  
	g»suÉ
;

5375 
size_t
 
m¥aû_max_foÙ´št
(
m¥aû
 
m¥
) {

5376 
size_t
 
	g»suÉ
 = 0;

5377 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5378 ià(
ok_magic
(
ms
)) {

5379 
	g»suÉ
 = 
ms
->
max_foÙ´št
;

5382 
USAGE_ERROR_ACTION
(
ms
,ms);

5384  
	g»suÉ
;

5388 #ià!
NO_MALLINFO


5389 
m®lšfo
 
m¥aû_m®lšfo
(
m¥aû
 
m¥
) {

5390 
m¡©e
 
	gms
 = (m¡©e)
m¥
;

5391 ià(!
ok_magic
(
ms
)) {

5392 
USAGE_ERROR_ACTION
(
ms
,ms);

5394  
š‹º®_m®lšfo
(
ms
);

5398 
size_t
 
m¥aû_u§bË_size
(* 
mem
) {

5399 ià(
	gmem
 != 0) {

5400 
mchunk±r
 
p
 = 
mem2chunk
(
mem
);

5401 ià(
is_šu£
(
p
))

5402  
chunksize
(
p
è- 
ov”h—d_fÜ
(p);

5407 
m¥aû_m®lİt
(
·¿m_numb”
, 
v®ue
) {

5408  
chªge_m·¿m
(
·¿m_numb”
, 
v®ue
);

	@core\memory\dlmalloc-2.8.4.h

25 #iâdeà
MALLOC_280_H


26 
	#MALLOC_280_H


	)

29 
	#USE_DL_PREFIX


	)

32 #ifdeà
__ılu¥lus


36 
	~<¡ddef.h
>

38 #iâdeà
ONLY_MSPACES


39 
	#ONLY_MSPACES
 0

	)

41 #iâdeà
NO_MALLINFO


42 
	#NO_MALLINFO
 0

	)

46 #ià!
ONLY_MSPACES


48 #iâdeà
USE_DL_PREFIX


49 
	#dlÿÎoc
 
ÿÎoc


	)

50 
	#dlä“
 
ä“


	)

51 
	#dlm®loc
 
m®loc


	)

52 
	#dlmem®ign
 
mem®ign


	)

53 
	#dÌ—Îoc
 
»®loc


	)

54 
	#dlv®loc
 
v®loc


	)

55 
	#dÍv®loc
 
pv®loc


	)

56 
	#dlm®lšfo
 
m®lšfo


	)

57 
	#dlm®lİt
 
m®lİt


	)

58 
	#dlm®loc_Œim
 
m®loc_Œim


	)

59 
	#dlm®loc_¡©s
 
m®loc_¡©s


	)

60 
	#dlm®loc_u§bË_size
 
m®loc_u§bË_size


	)

61 
	#dlm®loc_foÙ´št
 
m®loc_foÙ´št


	)

62 
	#dlšd•’d’t_ÿÎoc
 
šd•’d’t_ÿÎoc


	)

63 
	#dlšd•’d’t_com®loc
 
šd•’d’t_com®loc


	)

65 #ià!
NO_MALLINFO


66 #iâdeà
HAVE_USR_INCLUDE_MALLOC_H


67 #iâdeà
_MALLOC_H


68 #iâdeà
MALLINFO_FIELD_TYPE


69 
	#MALLINFO_FIELD_TYPE
 
size_t


	)

71 #iâdeà
STRUCT_MALLINFO_DECLARED


72 
	#STRUCT_MALLINFO_DECLARED
 1

	)

73 
	sm®lšfo
 {

74 
MALLINFO_FIELD_TYPE
 
¬’a
;

75 
MALLINFO_FIELD_TYPE
 
Üdblks
;

76 
MALLINFO_FIELD_TYPE
 
smblks
;

77 
MALLINFO_FIELD_TYPE
 
hblks
;

78 
MALLINFO_FIELD_TYPE
 
hblkhd
;

79 
MALLINFO_FIELD_TYPE
 
usmblks
;

80 
MALLINFO_FIELD_TYPE
 
fsmblks
;

81 
MALLINFO_FIELD_TYPE
 
uÜdblks
;

82 
MALLINFO_FIELD_TYPE
 
fÜdblks
;

83 
MALLINFO_FIELD_TYPE
 
k“pco¡
;

104 * 
dlm®loc
(
size_t
);

113 
dlä“
(*);

120 * 
dlÿÎoc
(
size_t
, size_t);

145 * 
dÌ—Îoc
(*, 
size_t
);

159 * 
dlmem®ign
(
size_t
, size_t);

166 * 
dlv®loc
(
size_t
);

184 
dlm®lİt
(, );

186 
	#M_TRIM_THRESHOLD
 (-1)

	)

187 
	#M_GRANULARITY
 (-2)

	)

188 
	#M_MMAP_THRESHOLD
 (-3)

	)

200 
size_t
 
dlm®loc_foÙ´št
();

202 #ià!
NO_MALLINFO


226 
m®lšfo
 
dlm®lšfo
();

281 ** 
dlšd•’d’t_ÿÎoc
(
size_t
, size_t, **);

342 ** 
dlšd•’d’t_com®loc
(
size_t
, size_t*, **);

350 * 
dÍv®loc
(
size_t
);

373 
dlm®loc_Œim
(
size_t
);

394 
dlm®loc_¡©s
();

412 
size_t
 
dlm®loc_u§bË_size
(*);

415 #ià
MSPACES


421 * 
	tm¥aû
;

434 
m¥aû
 
ü—‹_m¥aû
(
size_t
 
ÿ·c™y
, 
locked
);

442 
size_t
 
de¡roy_m¥aû
(
m¥aû
 
m¥
);

453 
m¥aû
 
ü—‹_m¥aû_w™h_ba£
(* 
ba£
, 
size_t
 
ÿ·c™y
, 
locked
);

466 
m¥aû_Œack_Ïrge_chunks
(
m¥aû
 
m¥
, 
’abË
);

472 * 
m¥aû_m®loc
(
m¥aû
 
m¥
, 
size_t
 
by‹s
);

482 
m¥aû_ä“
(
m¥aû
 
m¥
, * 
mem
);

493 * 
m¥aû_»®loc
(
m¥aû
 
m¥
, * 
mem
, 
size_t
 
Ãwsize
);

499 * 
m¥aû_ÿÎoc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
, size_ˆ
–em_size
);

505 * 
m¥aû_mem®ign
(
m¥aû
 
m¥
, 
size_t
 
®ignm’t
, size_ˆ
by‹s
);

511 ** 
m¥aû_šd•’d’t_ÿÎoc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
,

512 
size_t
 
–em_size
, * 
chunks
[]);

518 ** 
m¥aû_šd•’d’t_com®loc
(
m¥aû
 
m¥
, 
size_t
 
n_–em’ts
,

519 
size_t
 
sizes
[], * 
chunks
[]);

525 
size_t
 
m¥aû_foÙ´št
(
m¥aû
 
m¥
);

528 #ià!
NO_MALLINFO


533 
m®lšfo
 
m¥aû_m®lšfo
(
m¥aû
 
m¥
);

539 
size_t
 
m¥aû_u§bË_size
(* 
mem
);

545 
m¥aû_m®loc_¡©s
(
m¥aû
 
m¥
);

551 
m¥aû_Œim
(
m¥aû
 
m¥
, 
size_t
 
·d
);

556 
m¥aû_m®lİt
(, );

560 #ifdeà
__ılu¥lus


	@core\memory\memmng.c

12 
	~"exsdk.h
"

13 
	~"../../cÚš”/hashm­.h
"

14 
	~"../../cÚš”/li¡.h
"

20 
	#MAX_HASH
 4096

	)

21 
	#MAX_NEW_ALLOCINFO
 256

	)

22 
	#MEM_LOG
 "./mem_dump.”r"

	)

24 
	#VERIFY_PREFIX
 1

	)

25 
	#VERIFY_SUFFIX
 1

	)

26 
	#VERIFY_FREE
 1

	)

27 
	#VERIFY_REALLOC
 1

	)

32 
	#PREFIX_COUNT
 4

	)

33 
	#PREFIX_PATTERN
 0xABBCCDDA

	)

35 
	#SUFFIX_COUNT
 4

	)

36 
	#SUFFIX_PATTERN
 0xFEEDDCCF

	)

46 
	s®loc_un™_


48 
size_t
 
	mÜg_size
;

49 
size_t
 
	mdbg_size
;

50 * 
	mÜg_addr
;

51 * 
	mdbg_addr
;

52 cÚ¡ * 
	mg_Çme
;

53 cÚ¡ * 
	mfe_Çme
;

54 cÚ¡ * 
	mfunc_Çme
;

55 
size_t
 
	mlše_Ä
;

56 
boŞ
 
	mb»ak_Úä“
;

57 
boŞ
 
	mb»ak_Ú»®loc
;

58 
size_t
 
	m®loc_Ä
;

59 
ušt32
 
	mth»ad_id
;

60 
®loc_un™_
* 
	mÃxt
;

61 
®loc_un™_
* 
	m´ev
;

62 } 
	t®loc_un™_t
;

68 cÚ¡ 
size_t
 
	g´efix_size
 = (
ušt32
è* 
PREFIX_COUNT
;

69 cÚ¡ 
size_t
 
	gsuffix_size
 = (
ušt32
è* 
SUFFIX_COUNT
;

70 cÚ¡ 
size_t
 
	g·‰”n_size
 = (
ušt32
è* 
PREFIX_COUNT
 + (ušt32è* 
SUFFIX_COUNT
;

72 
®loc_un™_t
* 
	g»£rved_au_li¡
 = 
NULL
;

73 
hashm­_t
* 
	gau_m­
 = 
NULL
;

74 
li¡_t
* 
	gau_buck‘
 = 
NULL
;

75 
mu‹x_t
* 
	gacûss_mu‹x
 = 
NULL
;

77 
size_t
 
	gau_couÁ
 = 0;

78 
size_t
 
	gtÙ®_Üg_memÜy
 = 0;

79 
size_t
 
	gtÙ®_dbg_memÜy
 = 0;

80 
size_t
 
	gaccumuÏ‹_Üg_memÜy
 = 0;

81 
size_t
 
	gaccumuÏ‹_dbg_memÜy
 = 0;

91 
šlše
 
size_t
 
	$_ÿlc_dbg_size
 ( 
size_t
 
_size
 )

93  
_size
 + 
·‰”n_size
;

94 
	}
}

100 
®loc_un™_t
* 
	$_»que¡_au
 ()

102 
®loc_un™_t
* 
tmp_au
;

104 iàĞ!
»£rved_au_li¡
 ) {

105 
ušt
 
i
 = 0;

108 
»£rved_au_li¡
 = (
®loc_un™_t
*)
	`ex_m®loc_nomng
Ğ
MAX_NEW_ALLOCINFO
 * (alloc_unit_t) );

111 
	`ex_as£¹_»tuº
Ğ
»£rved_au_li¡
 !ğ
NULL
, NULL, "out of memory!" );

115 
	`memz”o
Ğ
»£rved_au_li¡
, 
MAX_NEW_ALLOCINFO
 * (
®loc_un™_t
) );

116  
i
 = 0; i < 
MAX_NEW_ALLOCINFO
-1; ++i )

118 
»£rved_au_li¡
[
i
].
Ãxt
 =„eserved_au_list + (i+1);

119 
»£rved_au_li¡
[
i
+1].
´ev
 =„eserved_au_list + i;

123 
	`li¡_push_back_nomng
 ( 
au_buck‘
, 
»£rved_au_li¡
 );

127 
tmp_au
 = 
»£rved_au_li¡
;

128 
»£rved_au_li¡
 =„e£rved_au_li¡->
Ãxt
;

131 
tmp_au
->
Ãxt
 = 
NULL
;

132 
tmp_au
->
´ev
 = 
NULL
;

135  
tmp_au
;

136 
	}
}

142 
	$_v”ify_·‰”n
 ( 
®loc_un™_t
* 
_au
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_func_Çme
, 
size_t
 
_lše_Ä
 )

145 #ià
VERIFY_PREFIX


147 
ušt32
* 
´e
 = (ušt32*)
_au
->
dbg_addr
;

148 
ušt
 
i_´e
;

151  
i_´e
 = 0; i_´< 
PREFIX_COUNT
; ++i_´e, ++
´e
 ) {

152 ifĞ*
´e
 !ğ
PREFIX_PATTERN
 ) {

153 
	`ex_w¬nšg
( "Memory Prefix Conflict\n"

159 
_fe_Çme
, 
_lše_Ä
, 
_func_Çme
, 
_au
->
th»ad_id
, 
	`cu¼’t_th»adID
() );

167 #ià
VERIFY_SUFFIX


169 
ušt32
* 
po¡
 = (ušt32*)Ğ(
št8
*)
_au
->
dbg_addr
 + 
´efix_size
 + _au->
Üg_size
 );

170 
ušt
 
i_po¡
;

173  
i_po¡
 = 0; i_po¡ < 
SUFFIX_COUNT
; ++i_po¡, ++
po¡
 ) {

174 ifĞ*
po¡
 !ğ
SUFFIX_PATTERN
 ) {

175 
	`ex_w¬nšg
( "Memory Postfix Conflict\n"

181 
_fe_Çme
, 
_lše_Ä
, 
_func_Çme
, 
_au
->
th»ad_id
, 
	`cu¼’t_th»adID
() );

187 
	}
}

193 
	$_»şaim_au
 ( 
®loc_un™_t
* 
_au
 ) {

194 iàĞ
	`hashm­_”a£
 ( 
au_m­
, &
_au
->
Üg_addr
 ) =ğ
NULL
 )

195 
	`ex_”rÜ
 ( "failedo„eclaim‡lloc unit" );

198 
_au
->
Ãxt
 = 
»£rved_au_li¡
;

199 
_au
->
´ev
 = 
NULL
;

202 iàĞ
»£rved_au_li¡
 )

203 
»£rved_au_li¡
->
´ev
 = 
_au
;

205 
»£rved_au_li¡
 = 
_au
;

206 
	}
}

213 
šlše
 
	$_push_au
 ( 
®loc_un™_t
* 
_au
 ) {

214 
size_t
 
idx
 = -1;

215 
	`hashm­_š£¹_nomng
 ( 
au_m­
, &
_au
->
Üg_addr
, &_au, &
idx
 );

216  
idx
;

217 
	}
}

220 
šlše
 
®loc_un™_t
* 
	$_g‘_au
 ( * 
_±r
 ) {

221  *((
®loc_un™_t
**)
	`hashm­_g‘
 ( 
au_m­
, &
_±r
 ));

222 
	}
}

225 
šlše
 
	$_»¬¿nge_au
 ( * 
_±r
, 
®loc_un™_t
* 
au
 ) {

226 iàĞ
	`hashm­_”a£
 ( 
au_m­
, &
_±r
 ) =ğ
NULL
 )

228  
	`_push_au
 ( 
au
 );

229 
	}
}

235 
	$_log
 ( cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_fÜm©
, ... )

237 
bufãr
[2048];

238 
FILE
* 
å
;

241 
	`EX_GET_VA_STRING
Ğ
bufãr
, 2048, 
_fÜm©
 );

244 
å
 = 
	`fİ’
Ğ
_fe_Çme
, "ab" );

247 
	`ex_as£¹
Ğ
å
, "Cª'ˆnÙ o³Àthlog fe:%s", 
_fe_Çme
 );

250 
	`årštf
Ğ
å
, "%s", 
bufãr
 );

253 
	`fşo£
(
å
);

254 
	}
}

260 
	$_dump
 () {

262 
	`ex_as£¹
 ( 
	`hashm­_Ën
(
au_m­
) == 0, "There‡re %d…lace(s)ƒxsits memory†eak.", hashmap_len(au_map) );

265 iàĞ
	`hashm­_Ën
(
au_m­
) ) {

266 
	`hashm­_—ch
 ( 
®loc_un™_t
*, 
au
, 
au_m­
 ) {

267 
‹xt
[2048];

268 
	`memz”o
 ( 
‹xt
, 2048 );

269 
	`¢´štf
 ( 
‹xt
, 2048,

280 ,
au
->
fe_Çme
 ,au->
lše_Ä


281 ,
au
->
func_Çme


282 ,
au
->
g_Çme


283 ,
au
->
Üg_addr


284 ,
au
->
dbg_addr


285 ,
au
->
Üg_size
,‡u->org_size

286 ,
au
->
dbg_size
,‡u->dbg_size

287 ,
au
->
®loc_Ä
,‡u->alloc_nr

288 ,
au
->
th»ad_id
,‡u->thread_id

292 
	`_log
 ( 
MEM_LOG
, "%s", 
‹xt
 );

293 } 
hashm­_—ch_’d
;

295 
	}
}

305 
	$mem_š™
 ()

307 
acûss_mu‹x
 = 
	`mu‹x_ü—‹
();

309 
au_m­
 = 
	`hashm­_®loc_nomng
 ( (*), (
®loc_un™_t
*), 256, 
hashkey_±r
, 
keycmp_±r
 );

310 
au_buck‘
 = 
	`li¡_®loc_nomng
 ( (
®loc_un™_t
*) );

313 
	`uÆšk
 ( 
MEM_LOG
 );

314 
	}
}

320 
	$mem_deš™
 ()

322 iàĞ
acûss_mu‹x
 )

323 
	`mu‹x_de¡roy
(
acûss_mu‹x
);

325 
	`_dump
 ();

328 
	`hashm­_ä“_nomng
 ( 
au_m­
 );

331 
	`li¡_ä“_nomng
 ( 
au_buck‘
 );

332 
	}
}

338 * 
	$_mng_m®loc
Ğ
size_t
 
_size
, cÚ¡ * 
_g
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_func_Çme
, size_ˆ
_lše_Ä
 )

340 
size_t
 
dbg_size
;

341 *
dbg_±r
, *
Üg_±r
;

342 
ušt32
 *
´e
, *
po¡
;

343 
ušt
 
i_´e
, 
i_po¡
;

344 
®loc_un™_t
* 
au
;

346 
	`mu‹x_lock
(
acûss_mu‹x
);

349 iàĞ
_size
 == 0) _size = 1;

352 
dbg_size
 = 
	`_ÿlc_dbg_size
(
_size
);

353 
dbg_±r
 = 
	`dlmem®ign
Ğ
EX_MEM_ALIGN
, 
dbg_size
 );

354 
Üg_±r
 = (*)Ğ(
št8
*)
dbg_±r
 + 
´efix_size
 );

357 
au
 = 
	`_»que¡_au
();

358 iàĞ
au
 =ğ
NULL
 ) {

359 
	`ex_”rÜ
( "AllocInfo‚ot found, check ifhe _ptr have been free or invalid" );

360 
	`mu‹x_uÆock
(
acûss_mu‹x
);

361  
NULL
;

364 
au
->
Üg_size
 = 
_size
;

365 
au
->
dbg_size
 = dbg_size;

366 
au
->
dbg_addr
 = 
dbg_±r
;

367 
au
->
Üg_addr
 = 
Üg_±r
;

368 
au
->
g_Çme
 = 
_g
;

369 
au
->
fe_Çme
 = 
_fe_Çme
;

370 
au
->
func_Çme
 = 
_func_Çme
;

371 
au
->
lše_Ä
 = 
_lše_Ä
;

372 
au
->
b»ak_Úä“
 = 
çl£
;

373 
au
->
b»ak_Ú»®loc
 = 
çl£
;

374 
au
->
®loc_Ä
 = 
au_couÁ
;

375 
au
->
th»ad_id
 = 
	`cu¼’t_th»adID
 () ;

383 
´e
 = (
ušt32
*)
dbg_±r
;

384 
po¡
 = (
ušt32
*)Ğ(
št8
*)
Üg_±r
 + 
_size
 );

387  
i_´e
 = 0; i_´< 
PREFIX_COUNT
; ++i_´e, ++
´e
 )

388 *
´e
 = 
PREFIX_PATTERN
;

389  
i_po¡
 = 0; i_po¡ < 
SUFFIX_COUNT
; ++i_po¡, ++
po¡
 )

390 *
po¡
 = 
SUFFIX_PATTERN
;

393 
au_couÁ
 += 1;

394 
tÙ®_Üg_memÜy
 +ğ
au
->
Üg_size
;

395 
tÙ®_dbg_memÜy
 +ğ
au
->
dbg_size
;

396 
accumuÏ‹_Üg_memÜy
 +ğ
au
->
Üg_size
;

397 
accumuÏ‹_dbg_memÜy
 +ğ
au
->
dbg_size
;

400 iàĞ
	`_push_au
 (
au
) == -1 ) {

401 
	`ex_”rÜ
 ( "failedo insert‡lloc unit" );

402 
	`mu‹x_uÆock
(
acûss_mu‹x
);

403  
NULL
;

406 
	`mu‹x_uÆock
(
acûss_mu‹x
);

407  
Üg_±r
;

408 
	}
}

414 * 
	$_mng_»®loc
Ğ* 
_±r
, 
size_t
 
_size
, cÚ¡ * 
_g
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_func_Çme
, size_ˆ
_lše_Ä
 )

416 
®loc_un™_t
* 
au
;

417 
size_t
 
dbg_size
;

418 *
dbg_±r
, *
Üg_±r
;

419 
ušt32
 *
´e
, *
po¡
;

420 
ušt
 
i_´e
, 
i_po¡
;

422 
	`mu‹x_lock
(
acûss_mu‹x
);

425 iàĞ
_±r
 =ğ
NULL
 ) {

426 
	`mu‹x_uÆock
(
acûss_mu‹x
);

427  
	`_mng_m®loc
Ğ
_size
, 
_g
, 
_fe_Çme
, 
_func_Çme
, 
_lše_Ä
 );

431 iàĞ
_size
 == 0 ) {

432 
	`_mng_ä“
Ğ
_±r
, 
_fe_Çme
, 
_func_Çme
, 
_lše_Ä
 );

433 
	`mu‹x_uÆock
(
acûss_mu‹x
);

434  
NULL
;

438 
au
 = 
	`_g‘_au
(
_±r
);

439 iàĞ
au
 =ğ
NULL
 ) {

440 
	`ex_”rÜ
 ( "AllocInfo‚ot found, check ifhe _ptr have been free or invalid" );

441 
	`mu‹x_uÆock
(
acûss_mu‹x
);

442  
NULL
;

446 #ià
VERIFY_REALLOC


447 
	`_v”ify_·‰”n
 ( 
au
, 
_fe_Çme
, 
_func_Çme
, 
_lše_Ä
 );

451 
tÙ®_Üg_memÜy
 -ğ
au
->
Üg_size
;

452 
tÙ®_dbg_memÜy
 -ğ
au
->
dbg_size
;

455 
dbg_size
 = 
	`_ÿlc_dbg_size
(
_size
);

456 
dbg_±r
 = 
	`dÌ—Îoc
 ( 
au
->
dbg_addr
, 
dbg_size
 );

457 
Üg_±r
 = (*)Ğ(
št8
*)
dbg_±r
 + 
´efix_size
 );

460 
au
->
Üg_size
 = 
_size
;

461 
au
->
dbg_size
 = dbg_size;

462 
au
->
dbg_addr
 = 
dbg_±r
;

463 
au
->
Üg_addr
 = 
Üg_±r
;

464 
au
->
g_Çme
 = 
_g
;

465 
au
->
fe_Çme
 = 
_fe_Çme
;

466 
au
->
func_Çme
 = 
_func_Çme
;

467 
au
->
lše_Ä
 = 
_lše_Ä
;

468 
au
->
b»ak_Úä“
 = 
çl£
;

469 
au
->
b»ak_Ú»®loc
 = 
çl£
;

470 
au
->
®loc_Ä
 =‡u->alloc_nr;

471 
au
->
th»ad_id
 = 
	`cu¼’t_th»adID
() ;

479 
´e
 = (
ušt32
*)
dbg_±r
;

480 
po¡
 = (
ušt32
*)Ğ(
št8
*)
Üg_±r
 + 
_size
 );

483  
i_´e
 = 0; i_´< 
PREFIX_COUNT
; ++i_´e, ++
´e
 )

484 *
´e
 = 
PREFIX_PATTERN
;

485  
i_po¡
 = 0; i_po¡ < 
SUFFIX_COUNT
; ++i_po¡, ++
po¡
 )

486 *
po¡
 = 
SUFFIX_PATTERN
;

489 
tÙ®_Üg_memÜy
 +ğ
au
->
Üg_size
;

490 
tÙ®_dbg_memÜy
 +ğ
au
->
dbg_size
;

491 
accumuÏ‹_Üg_memÜy
 +ğ
au
->
Üg_size
;

492 
accumuÏ‹_dbg_memÜy
 +ğ
au
->
dbg_size
;

495 iàĞ
	`_»¬¿nge_au
 ( 
_±r
, 
au
 ) == -1 ) {

496 
	`ex_”rÜ
 ( "failedo„e-arrange‡lloc unit" );

497 
	`mu‹x_uÆock
(
acûss_mu‹x
);

498  
NULL
;

501 
	`mu‹x_uÆock
(
acûss_mu‹x
);

502  
Üg_±r
;

503 
	}
}

509 
	$_mng_ä“
Ğ* 
_±r
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_func_Çme
, 
size_t
 
_lše_Ä
 )

511 
®loc_un™_t
* 
au
;

513 
	`mu‹x_lock
 ( 
acûss_mu‹x
 );

516 iàĞ
_±r
 =ğ
NULL
 ) {

517 
	`mu‹x_uÆock
(
acûss_mu‹x
);

522 
au
 = 
	`_g‘_au
 (
_±r
);

525 #ià
VERIFY_FREE


526 
	`_v”ify_·‰”n
Ğ
au
, 
_fe_Çme
, 
_func_Çme
, 
_lše_Ä
 );

530 
	`dlä“
Ğ
au
->
dbg_addr
 );

533 
au_couÁ
 -= 1;

534 
tÙ®_Üg_memÜy
 -ğ
au
->
Üg_size
;

535 
tÙ®_dbg_memÜy
 -ğ
au
->
dbg_size
;

536 
accumuÏ‹_Üg_memÜy
 -ğ
au
->
Üg_size
;

537 
accumuÏ‹_dbg_memÜy
 -ğ
au
->
dbg_size
;

540 
	`_»şaim_au
 ( 
au
 );

542 
	`mu‹x_uÆock
(
acûss_mu‹x
);

543 
	}
}

	@core\memory\memory.h

9 #iâdeà
MEMORY_H_1277529938


10 
	#MEMORY_H_1277529938


	)

17 
	#EX_MEM_ALIGN
 16

	)

23 * 
_mng_m®loc
Ğ
size_t
 
_size
, cÚ¡ * 
_g
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_func_Çme
, size_ˆ
_lše_Ä
 );

24 * 
_mng_»®loc
Ğ* 
_±r
, 
size_t
 
_size
, cÚ¡ * 
_g
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_func_Çme
, size_ˆ
_lše_Ä
 );

25 
_mng_ä“
Ğ* 
_±r
, cÚ¡ * 
_fe_Çme
, cÚ¡ * 
_func_Çme
, 
size_t
 
_lše_Ä
 );

31 
mem_š™
 ();

32 
mem_deš™
 ();

39 #ià
EX_USE_SYSTEM_MEMORY


43 
	#ex_m®loc_nomng
Ğ
size
 ) 
	`m®loc
(size)

	)

44 
	#ex_m®loc
Ğ
size
 ) 
	`m®loc
(size)

	)

45 
	#ex_m®loc_g
Ğ
size
, 
g
 ) 
	`m®loc
(size)

	)

48 
	#ex_»®loc_nomng
Ğ
±r
, 
size
 ) 
	`»®loc
ÕŒ,size)

	)

49 
	#ex_»®loc
Ğ
±r
, 
size
 ) 
	`»®loc
ÕŒ,size)

	)

50 
	#ex_»®loc_g
Ğ
±r
, 
size
, 
g
 ) 
	`»®loc
ÕŒ,size)

	)

53 
	#ex_ä“_nomng
Ğ
±r
 ) 
	`ä“
ÕŒ)

	)

54 
	#ex_ä“
Ğ
±r
 ) 
	`ä“
ÕŒ)

	)

64 
	#ex_m®loc_nomng
Ğ
size
 ) 
	`dlmem®ign
Ğ
EX_MEM_ALIGN
, size)

	)

66 #ià
EX_USE_MEMORY_MANAGER


67 
	#ex_m®loc
Ğ
size
 ) 
	`_mng_m®loc
Ğsize, "deçuÉ", 
__FILE__
, 
__FUNCTION__
, 
__LINE__
 )

	)

68 
	#ex_m®loc_g
Ğ
size
, 
g
 ) 
	`_mng_m®loc
Ğsize,ag, 
__FILE__
, 
__FUNCTION__
, 
__LINE__
 )

	)

70 
	#ex_m®loc
Ğ
size
 ) 
	`ex_m®loc_nomng
Ğsiz)

	)

71 
	#ex_m®loc_g
Ğ
size
, 
g
 ) 
	`ex_m®loc_nomng
Ğsiz)

	)

78 
	#ex_»®loc_nomng
Ğ
±r
, 
size
 ) 
	`dÌ—Îoc
ÕŒ,size)

	)

80 #ià
EX_USE_MEMORY_MANAGER


81 
	#ex_»®loc
Ğ
±r
, 
size
 ) 
	`_mng_»®loc
Ğ±r, size, "deçuÉ", 
__FILE__
, 
__FUNCTION__
, 
__LINE__
 )

	)

82 
	#ex_»®loc_g
Ğ
±r
, 
size
, 
g
 ) 
	`_mng_»®loc
Ğ±r, size,ag, 
__FILE__
, 
__FUNCTION__
, 
__LINE__
 )

	)

84 
	#ex_»®loc
Ğ
±r
, 
size
 ) 
	`ex_»®loc_nomng
Ğ±r, siz)

	)

85 
	#ex_»®loc_g
Ğ
±r
, 
size
, 
g
 ) 
	`ex_»®loc_nomng
Ğ±r, siz)

	)

96 
	#ex_ä“_nomng
Ğ
±r
 ) 
	`dlä“
Ğ±¸)

	)

98 #ià
EX_USE_MEMORY_MANAGER


99 
	#ex_ä“
Ğ
±r
 ) 
	`_mng_ä“
Ğ±r, 
__FILE__
, 
__FUNCTION__
, 
__LINE__
 )

	)

101 
	#ex_ä“
Ğ
±r
 ) 
	`ex_ä“_nomng
Ğ±¸)

	)

109 
	#ex_§ã_ä“_nomng
(
±r
) \

110 iàĞ
±r
 ) { \

111 
	`ex_ä“_nomng
(
±r
); \

112 
±r
 = 
NULL
; \

113 }

	)

116 
	#ex_§ã_ä“
Ğ
±r
 ) \

117 iàĞ
±r
 ) { \

118 
	`ex_ä“
(
±r
); \

119 
±r
 = 
NULL
; \

120 }

	)

130 
šlše
 * 
	$memz”o
 ( * 
_±r
, 
size_t
 
_size
 ) {

131  
	`mem£t
 ( 
_±r
, 0x00, 
_size
 );

132 
	}
}

	@core\memory\memory_inc.h

9 #iâdeà
MEMORY_INC_H_1277550399


10 
	#MEMORY_INC_H_1277550399


	)

17 
	~"dlm®loc-2.8.4.h
"

18 
	~"memÜy.h
"

	@core\misc\core.c

12 
	~"exsdk.h
"

13 
	~"cÜe.h
"

23 
	$cÜe_š™
 ()

25 
	`mem_š™
();

26 
	`sid_š™
(65536);

27 
	}
}

33 
	$cÜe_deš™
 ()

35 
	`sid_deš™
();

36 
	`mem_deš™
();

37 
	}
}

	@core\misc\core.h

9 #iâdeà
CORE_H_1277941719


10 
	#CORE_H_1277941719


	)

18 
cÜe_š™
 ();

19 
cÜe_deš™
 ();

	@core\misc\flags.h

9 #iâdeà
FLAGS_H_1277884313


10 
	#FLAGS_H_1277884313


	)

18 
šlše
 
ušt32
 
	$æags_add
 ( 
ušt32
 
_¤c
, ušt32 
_æags
 ) {

19  
_¤c
 | 
_æags
;

20 
	}
}

23 
šlše
 
ušt32
 
	$æags_»move
 ( 
ušt32
 
_¤c
, ušt32 
_æags
 ) {

24  
_¤c
 & ~
_æags
;

25 
	}
}

28 
šlše
 
boŞ
 
	$æags_has_®l
 ( 
ušt32
 
_¤c
, ušt32 
_æags
 ) {

29  (
_æags
 =ğ0è? (
_¤c
 == _flags) : (_src&_flags) == _flags;

30 
	}
}

33 
šlše
 
boŞ
 
	$æags_has
 ( 
ušt32
 
_¤c
, ušt32 
_æags
 ) {

34  ( 
_¤c
 & 
_æags
 ) != 0;

35 
	}
}

	@core\misc\misc_inc.h

9 #iâdeà
MISC_INC_H_1277863963


10 
	#MISC_INC_H_1277863963


	)

13 
	~"cÜe.h
"

14 
	~"±r.h
"

15 
	~"æags.h
"

	@core\misc\ptr.h

9 #iâdeà
PTR_H_1277863712


10 
	#PTR_H_1277863712


	)

17 
šlše
 * 
	$±r_add
 ( * 
_±r
, 
size_t
 
_off£t
 ) {  (*)((size_t)_±¸+ _off£t); 
	}
}

18 
šlše
 * 
	$±r_sub
 ( * 
_±r
, 
size_t
 
_off£t
 ) {  (*)((size_t)_±¸- _off£t); 
	}
}

19 
šlše
 
size_t
 
	$±r_diff
 ( * 
_lhs
, * 
_rhs
 ) {  (
size_t
)_lh - (size_t)_rhs; 
	}
}

20 
šlše
 
size_t
 
	$±r_to_addr
 ( * 
_±r
 ) {  (
size_t
)_±r; 
	}
}

21 
šlše
 * 
	$addr_to_±r
 ( 
size_t
 
_addr
 ) {  (*)_addr; 
	}
}

	@core\string\stringID.c

12 
	~"exsdk.h
"

13 
	~"../../cÚš”/hashm­.h
"

14 
	~"¡ršgID.h
"

20 
hashm­_t
* 
	g_¡ršg_£t
 = 
NULL
;

30 
	$sid_š™
 ( 
size_t
 
_size
 )

32 
_¡ršg_£t
 = 
	`hashm­_®loc
 ( (
wch¬_t
**), (wch¬_t**), 
_size
, 
hashkey_w¡ršg
, 
keycmp_w¡ršg
 );

33 
	}
}

39 
	$sid_deš™
 ()

41 
	`hashm­_ä“
(
_¡ršg_£t
);

42 
	}
}

48 
size_t
 
	$¡rID
 ( 
wch¬_t
* 
_¡ršg
 )

50 
size_t
 
idx
 = -1;

51 
	`hashm­_š£¹
 ( 
_¡ršg_£t
, &
_¡ršg
, &_¡ršg, &
idx
 );

52  
idx
;

53 
	}
}

59 
wch¬_t
* 
	$sid_toSŒšg
 ( 
size_t
 
_id
 )

61 * 
addr
 = (*)
_¡ršg_£t
->
_keys
 + 
_id
 * _¡ršg_£t->
_key_by‹s
;

62  *((
wch¬_t
**)
addr
);

63 
	}
}

	@core\string\stringID.h

9 #iâdeà
STRINGID_H_1278485326


10 
	#STRINGID_H_1278485326


	)

21 
sid_š™
 ( 
size_t
 
_size
 );

22 
sid_deš™
 ();

29 
size_t
 
¡rID
 ( 
wch¬_t
* 
_¡ršg
 );

35 
wch¬_t
* 
sid_toSŒšg
 ( 
size_t
 
_id
 );

	@core\string\string_inc.h

9 #iâdeà
STRING_INC_H_1278485298


10 
	#STRING_INC_H_1278485298


	)

13 
	~"¡ršgID.h
"

14 
	~"¡ršg_İ.h
"

	@core\string\string_op.c

12 
	~"exsdk.h
"

22 
wch¬_t
* 
	$to_wcs
 ( cÚ¡ * 
_¤c
, 
wch¬_t
* 
_de¡
 )

24 
size_t
 
Ën
 = 
	`¡¾’
(
_¤c
) + 1;

25 
ušt
 
i
;

27  
i
 = 0; i < 
Ën
; ++i )

28 
_de¡
[
i
] = 
_¤c
[i];

30  
_de¡
;

31 
	}
}

	@core\string\string_op.h

9 #iâdeà
STRING_OP_H_1278554398


10 
	#STRING_OP_H_1278554398


	)

21 
wch¬_t
* 
to_wcs
 ( cÚ¡ * 
_¤c
, wch¬_t* 
_de¡
 );

	@core\thread\mutex.h

9 #iâdeà
MUTEX_H_1278695351


10 
	#MUTEX_H_1278695351


	)

21 
mu‹x_t
 
	tmu‹x_t
;

27 
mu‹x_t
* 
mu‹x_ü—‹
 ();

33 
mu‹x_de¡roy
 ( 
mu‹x_t
* );

39 
mu‹x_lock
 ( 
mu‹x_t
* );

45 
mu‹x_uÆock
 ( 
mu‹x_t
* );

	@core\thread\mutex_win32.c

12 
	~"exsdk.h
"

22 
	smu‹x_t
 {

23 
HANDLE
 
	mid
;

30 
mu‹x_t
* 
	$mu‹x_ü—‹
 ()

32 
mu‹x_t
* 
mu‹x
;

35 
mu‹x
 = (
mu‹x_t
*)
	`ex_m®loc_nomng
((mutex_t*));

36 iàĞ
mu‹x
 ) {

38 
mu‹x
->
id
 = 
	`C»©eMu‹x
(
NULL
, 
FALSE
, NULL);

39 iàĞ!
mu‹x
->
id
 ) {

40 
	`ex_”rÜ
("Couldn't create mutex");

41 
	`ex_ä“_nomng
(
mu‹x
);

42 
mu‹x
 = 
NULL
;

45  
mu‹x
;

46 
	}
}

52 
	$mu‹x_de¡roy
 ( 
mu‹x_t
* 
_mu‹x
 )

54 iàĞ
_mu‹x
 ) {

55 iàĞ
_mu‹x
->
id
 ) {

56 
	`Clo£HªdË
(
_mu‹x
->
id
);

57 
_mu‹x
->
id
 = 0;

59 
	`ex_ä“_nomng
(
_mu‹x
);

61 
	}
}

67 
	$mu‹x_lock
 ( 
mu‹x_t
* 
_mu‹x
 )

69 iàĞ
_mu‹x
 =ğ
NULL
 ) {

70 
	`ex_”rÜ
("Passed‡ NULL mutex");

73 iàĞ
	`Wa™FÜSšgËObjeù
(
_mu‹x
->
id
, 
INFINITE
è=ğ
WAIT_FAILED
 ) {

74 
	`ex_”rÜ
("Couldn't wait on mutex");

78 
	}
}

84 
	$mu‹x_uÆock
 ( 
mu‹x_t
* 
_mu‹x
 )

86 iàĞ
_mu‹x
 =ğ
NULL
 ) {

87 
	`ex_”rÜ
("Passed‡ NULL mutex");

90 iàĞ
	`R–—£Mu‹x
(
_mu‹x
->
id
è=ğ
FALSE
 ) {

91 
	`ex_”rÜ
("Couldn't„elease mutex");

95 
	}
}

	@core\thread\thread.h

9 #iâdeà
THREAD_H_1277879636


10 
	#THREAD_H_1277879636


	)

17 
šlše
 
ušt32
 
	$cu¼’t_th»adID
 () {

18 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 )

19  (
ušt32
)
	`G‘Cu¼’tTh»adId
();

21 
	`ex_as£¹
 ( 
çl£
, "pls implement current_threadID in other…latform." );

24 
	}
}

	@core\thread\thread_inc.h

9 #iâdeà
THREAD_INC_H_1277879626


10 
	#THREAD_INC_H_1277879626


	)

13 
	~"th»ad.h
"

14 
	~"mu‹x.h
"

	@exsdk.c

12 
	~"exsdk.h
"

22 #ià(
EX_COMPILER
 =ğ
EX_MSVC
)

23 
	#EX_SHOW_COMPILE_MESSAGE
 1

	)

24 #–ià(
EX_COMPILER
 =ğ
EX_GCC
)

25 
	#EX_SHOW_COMPILE_MESSAGE
 0

	)

32 #ià
EX_SHOW_COMPILE_MESSAGE


34 #´agm¨
mes§ge
(" ")

35 #´agm¨
mes§ge
("==========================================")

36 #´agm¨
mes§ge
("exLibs…redefine†og")

37 #´agm¨
mes§ge
("==========================================")

38 #´agm¨
mes§ge
(" ")

39 #´agm¨
mes§ge
("<<<<<<")

42 #ià(
EX_COMPILER
 =ğ
EX_MSVC
)

43 #´agm¨
mes§ge
("Comp” ms-vc: "
EX_STRING_EXPAND
(
EX_COMPILER_VER
))

44 #–ià(
EX_COMPILER
 =ğ
EX_GCC
)

45 #´agm¨
mes§ge
("Comp” gcc: "
EX_STRING_EXPAND
(
EX_COMPILER_VER
))

47 #´agm¨
mes§ge
("Compiler UNKNOWN: ")

51 #ià
defšed
 (
EX_DEBUG
)

52 #´agm¨
mes§ge
("Configuration: Debug")

53 #–ià
defšed
 (
EX_RELEASE
)

54 #´agm¨
mes§ge
("Configuration: Release")

58 #iàĞ
EX_PLATFORM
 =ğ
EX_WIN32
 )

59 #´agm¨
mes§ge
("Platform: Win32")

60 #–iàĞ
EX_PLATFORM
 =ğ
EX_LINUX
 )

61 #´agm¨
mes§ge
("Platform: Linux")

62 #–iàĞ
EX_PLATFORM
 =ğ
EX_XENON
 )

63 #´agm¨
mes§ge
("Platform: Xenon")

64 #–iàĞ
EX_PLATFORM
 =ğ
EX_PS3
 )

65 #´agm¨
mes§ge
("Platform: PS3")

67 #´agm¨
mes§ge
("Unicode-PÏtfÜm: "
EX_STRING_EXPAND
(
EX_UNICODE_PLATFORM
))

68 #´agm¨
mes§ge
("U£ Unicod: "
EX_STRING_EXPAND
(
EX_USE_UNICODE
))

71 #iàĞ
EX_ENDIAN
 =ğ
EX_BIG_ENDIAN
 )

72 #´agm¨
mes§ge
("Endian: Big")

74 #´agm¨
mes§ge
("Endian: Little")

78 #ià(
EX_USE_DLL
 == 1)

79 #´agm¨
mes§ge
("TargeType: dll")

81 #´agm¨
mes§ge
("TargeType:†ib")

85 #ià
EX_USE_MEMORY_MANAGER


86 #´agm¨
mes§ge
("Enable Memory Manager")

88 #´agm¨
mes§ge
("Disable Memory Manager")

91 #´agm¨
mes§ge
(">>>>>>")

92 #´agm¨
mes§ge
(" ")

94 #undeà
EX_SHOW_COMPILE_MESSAGE


	@exsdk.h

9 #iâdeà
EXSDK_H_1277557232


10 
	#EXSDK_H_1277557232


	)

13 
	~"cÜe/cÜe_šc.h
"

	@graphics\device.c

12 
	~"exsdk.h
"

15 
	~"../ext/SDL/šşude/SDL.h
"

16 
	~"../ext/SDL/šşude/SDL_İ’gl.h
"

26 
	$_š™_wšdow
 ()

30 #ià(
EX_PLATFORM
 =ğ
EX_WIN32
)

31 cÚ¡ * 
ex‹nsiÚs
 = (cÚ¡ *)
	`glG‘SŒšg
Ğ
GL_EXTENSIONS
 );

32 
	`BOOL
 (
	tAPIENTRY
 *
	tPFNWGLSWAPINTERVALFARPROC
)( );

33 
PFNWGLSWAPINTERVALFARPROC
 
wglSw­IÁ”v®EXT
 = 0;

35 ifĞ
	`¡r¡r
Ğ
ex‹nsiÚs
, "WGL_EXT_swap_control" ) != 0 )

37 
wglSw­IÁ”v®EXT
 = (
PFNWGLSWAPINTERVALFARPROC
)
	`wglG‘ProcAdd»ss
( "wglSwapIntervalEXT" );

38 iàĞ
wglSw­IÁ”v®EXT
 )

41 
boŞ
 
u£VSync
 = 
Œue
;

42 iàĞ
u£VSync
 )

43 
	`wglSw­IÁ”v®EXT
(1);

45 
	`wglSw­IÁ”v®EXT
(0);

50 
	`glCË¬CŞÜ
(0.0f,0.0f,0.0f,1.0f);

53 
	`glDi§bË
Ğ
GL_LIGHTING
 );

56 
	`glEÇbË
(
GL_DEPTH_TEST
);

57 
	`glCË¬D•th
(1.0f);

58 
	`glD•thFunc
(
GL_LEQUAL
);

65 
	`glEÇbË
(
GL_CULL_FACE
);

66 
	`glFrÚtFaû
(
GL_CCW
);

67 
	`glCuÎFaû
(
GL_BACK
);

68 
	`glPŞygÚMode
(
GL_FRONT
, 
GL_FILL
);

71 
	`glEÇbË
(
GL_TEXTURE_2D
);

72 
	`glEÇbË
(
GL_BLEND
);

73 
	`glBËndFunc
(
GL_SRC_ALPHA
, 
GL_ONE_MINUS_SRC_ALPHA
);

74 
	`glBšdTextu»
Ğ
GL_TEXTURE_2D
, 0 );

77 
	`glHšt
(
GL_PERSPECTIVE_CORRECTION_HINT
, 
GL_NICEST
);

78 
	`glShadeMod–
(
GL_SMOOTH
);

79 
	}
}

85 
	$š™_sdl_gl
 ()

87 
ušt32
 
væags
, 
bbCŞÜ
, 
muÉiSam¶e
;

88 
ušt32
 
width
, 
height
;

89 
SDL_Surçû
* 
pSü“n
;

92 
	`ex_log
 ("Init SDL Video");

93 iàĞ
	`SDL_In™SubSy¡em
 ( 
SDL_INIT_VIDEO
 ) )

99 
væags
 = 
SDL_HWSURFACE
|
SDL_OPENGLBLIT
;

103 
væags
 |ğ
SDL_FULLSCREEN
;

111 
bbCŞÜ
 = 32;

114 iàĞ
bbCŞÜ
 == 16 )

116 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_RED_SIZE
, 5 );

117 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_GREEN_SIZE
, 5 );

118 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_BLUE_SIZE
, 5 );

120 iàĞ
bbCŞÜ
 == 32 )

122 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_RED_SIZE
, 8 );

123 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_GREEN_SIZE
, 8 );

124 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_BLUE_SIZE
, 8 );

128 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_RED_SIZE
, 8 );

129 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_GREEN_SIZE
, 8 );

130 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_BLUE_SIZE
, 8 );

134 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_DOUBLEBUFFER
, 1 );

139 
muÉiSam¶e
 = 0;

141 
	`SDL_GL_S‘A‰ribu‹
Ğ
SDL_GL_MULTISAMPLESAMPLES
, 
muÉiSam¶e
 ) ;

146 
width
 = 640;

147 
height
 = 480;

150 
pSü“n
 = 
	`SDL_S‘VideoMode
 ( 
width
, 
height
, 
bbCŞÜ
, 
væags
 );

153 iàĞ
pSü“n
 =ğ
NULL
 )

160 
	`SDL_FlReù
(
pSü“n
, 
NULL
, 
	`SDL_M­RGBA
ÕSü“n->
fÜm©
,0,0,0,0));

163 
	`_š™_wšdow
 ();

164 
	}
}

170 
	$begš_äame
 ()

172 
mask
 = 0;

174 
mask
 |ğ
GL_COLOR_BUFFER_BIT
;

175 
	`glCË¬CŞÜ
( 0.5f, 0.5f, 0.5f, 1.0f );

177 
mask
 |ğ
GL_DEPTH_BUFFER_BIT
;

178 
	`glCË¬D•th
(1.0f);

180 
	`glCË¬
 (
mask
);

181 
	}
}

187 
	$’d_äame
 ()

189 
	`SDL_GL_Sw­Bufãrs
();

190 
	}
}

	@graphics\device.h

9 #iâdeà
DEVICE_H_1277521710


10 
	#DEVICE_H_1277521710


	)

14 
š™_sdl_gl
 ();

15 
begš_äame
 ();

16 
’d_äame
 ();

	@graphics\graphics_inc.h

9 #iâdeà
GRAPHICS_INC_H_1277521739


10 
	#GRAPHICS_INC_H_1277521739


	)

13 
	~"deviû.h
"

	@math\math_inc.h

9 #iâdeà
MATH_INC_H_1277686586


10 
	#MATH_INC_H_1277686586


	)

13 
	~"m©hİ.h
"

	@math\mathop.h

9 #iâdeà
MATHOP_H_1277686663


10 
	#MATHOP_H_1277686663


	)

20 
šlše
 
	$roundf
 ( 
_v®ue
 ) {  _v®u> 0.0à? (_v®u+ 0.5fè: (_v®u- 0.5f); 
	}
}

23 
šlše
 
	$round
 ( 
_v®ue
 ) {  _v®u> 0.0 ? (_v®u+ 0.5è: (_v®u- 0.5); 
	}
}

32 
šlše
 
	$Œuncf
 ( 
_v®ue
 ) {  _v®u> 0.0à? 
	`æoÜf
(_v®ueè: 
	`ûf
(_v®ue); 
	}
}

35 
šlše
 
	$Œunc
 ( 
_v®ue
 ) {  _v®u> 0.0 ? 
	`æoÜ
(_v®ueè: 
	`û
(_v®ue); 
	}
}

44 
šlše
 
	$roundawayf
 ( 
_v®ue
 ) {  _v®u> 0.0à? 
	`ûf
(_v®ueè: 
	`æoÜf
(_v®ue); 
	}
}

47 
šlše
 
	$roundaway
 ( 
_v®ue
 ) {  _v®u> 0.0 ? 
	`û
(_v®ueè: 
	`æoÜ
(_v®ue); 
	}
}

54 
šlše
 
	$log2f
 ( 
_v®ue
 ) {  
	`logf
(_v®ue)/logf(2.0f); 
	}
}

57 
šlše
 
	$log2
 ( 
_v®ue
 ) {  
	`log
(_v®ue)/log(2.0); 
	}
}

64 
šlše
 
ušt32
 
	$ûpow2u
 ( 
ušt32
 
_v®ue
 ) {

65 
ušt32
 
»suÉ
 = 1;

66  
»suÉ
 < 
_v®ue
 ) {

67 
»suÉ
 <<= 1;

69  
»suÉ
;

70 
	}
}

73 
šlše
 
ušt32
 
	$ûpow2f
 ( 
_v®ue
 ) {

74  
	`ûpow2u
 ( (
ušt32
)
	`ûf
(
_v®ue
) );

75 
	}
}

78 
šlše
 
ušt32
 
	$ûpow2
 ( 
_v®ue
 ) {

79  
	`ûpow2u
 ( (
ušt32
)
	`û
(
_v®ue
) );

80 
	}
}

87 
šlše
 
ušt32
 
	$æoÜpow2u
 ( 
ušt32
 
_v®ue
 ) {

88 
ušt32
 
»suÉ
 = 1;

89  
»suÉ
 < 
_v®ue
 )

91 
»suÉ
 <<= 1;

93 
»suÉ
 >>= 1;

94  
»suÉ
;

95 
	}
}

98 
šlše
 
ušt32
 
	$æoÜpow2f
 ( 
_v®ue
 ) {

99  
	`æoÜpow2u
 ( (
ušt32
)
	`æoÜf
(
_v®ue
) );

100 
	}
}

103 
šlše
 
ušt32
 
	$æoÜpow2
 ( 
_v®ue
 ) {

104  
	`æoÜpow2u
 ( (
ušt32
)
	`æoÜ
(
_v®ue
) );

105 
	}
}

	@tests\test.base\main.c

12 
	~"../../cÜe/cÜe_šc.h
"

18 
‹¡_b™¬ry
();

19 
‹¡_poŞ
();

20 
‹¡_¬¿y
();

21 
‹¡_hashm­
();

22 
‹¡_li¡
();

23 
‹¡_memmng
();

24 
‹¡_¿pid
();

25 
‹¡_¡ršgID
();

31 
	$maš
Ğ
¬gc
, * 
¬gv
[] )

33 
	`´štf
 ("================\n");

34 
	`´štf
 ("startesting...\n");

35 
	`´štf
 ("================\n");

38 
	`cÜe_š™
();

43 
	`‹¡_hashm­
 ();

50 
	`cÜe_deš™
();

53 
	}
}

	@tests\test.base\test_array.c

12 
	~"../../cÜe/cÜe_šc.h
"

13 
	~"../../cÚš”/¬¿y.h
"

23 
	$nÜm®
 ()

25 
¬¿y_t
* 
¬¿y
 = 
	`¬¿y_®loc
 ( (
ušt32
), 20 );

27 
size_t
 
i
 = 0;

28  
i
 != 100 ) {

29 
	`¬¿y_push_back_ušt32
Ğ
¬¿y
, 
i
 );

30 ++
i
;

33 
	`¬¿y_ä“
 ( 
¬¿y
 );

34 
	}
}

40 
	$šv®id
()

42 
¬¿y_t
* 
¬¿y
 = 
	`¬¿y_®loc
 ( (
ušt32
), 20 );

44 * 
pv®
 = 
	`¬¿y_g‘
Ğ
¬¿y
, 40 );

46 
	`¬¿y_ä“
 ( 
¬¿y
 );

47 
	}
}

53 
	$‹¡_¬¿y
 ()

55 
	`nÜm®
();

56 
	`šv®id
();

57 
	}
}

	@tests\test.base\test_bitarry.c

12 
	~"../../cÜe/cÜe_šc.h
"

13 
	~"../../cÚš”/b™¬¿y.h
"

23 
	$nÜm®
 ()

25 
»suÉ
 = -1;

27 
b™¬¿y_t
* 
b™A¼ay
 = 
	`b™¬¿y_®loc
 ( 20 );

29 
	`b™¬¿y_£t
 ( 
b™A¼ay
, 0, 1 );

30 
	`b™¬¿y_£t
 ( 
b™A¼ay
, 10, 1 );

32 
»suÉ
 = 
	`b™¬¿y_g‘
Ğ
b™A¼ay
, 0 );

33 
	`ex_check
 ( 
»suÉ
 == 1 );

35 
»suÉ
 = 
	`b™¬¿y_g‘
Ğ
b™A¼ay
, 1 );

36 
	`ex_check
 ( 
»suÉ
 == 0 );

38 
»suÉ
 = 
	`b™¬¿y_g‘
Ğ
b™A¼ay
, 10 );

39 
	`ex_check
 ( 
»suÉ
 == 1 );

41 
	`b™¬¿y_£t
 ( 
b™A¼ay
, 10, 0 );

42 
»suÉ
 = 
	`b™¬¿y_g‘
Ğ
b™A¼ay
, 10 );

43 
	`ex_check
 ( 
»suÉ
 == 0 );

45 
	`b™¬¿y_ä“
 ( 
b™A¼ay
 );

46 
	}
}

52 
	$šv®id
 ()

54 
b™¬¿y_t
* 
b™A¼ay
 = 
	`b™¬¿y_®loc
 ( 20 );

57 
	`b™¬¿y_£t
 ( 
b™A¼ay
, 30, 1 );

60 
	`b™¬¿y_£t
 ( 
b™A¼ay
, 50, 1 );

63 
	`b™¬¿y_£t
 ( 
b™A¼ay
, 0, 3 );

65 
	`b™¬¿y_ä“
 ( 
b™A¼ay
 );

66 
	}
}

72 
	$‹¡_b™¬ry
 ()

74 
	`nÜm®
 ();

75 
	`šv®id
();

76 
	}
}

	@tests\test.base\test_hashmap.c

12 
	~"../../cÜe/cÜe_šc.h
"

13 
	~"../../cÚš”/hashm­.h
"

23 
	$nÜm®
 ()

26 
ušt32
 
key
;

27 
v®
;

28 
i
;

30 
hashm­_t
* 
hashm­
 = 
	`hashm­_®loc
 ( (
ušt32
), (), 256, 
hashkey_ušt32
, 
keycmp_ušt32
 );

32  
i
 = 0; i < 512; ++i ) {

33 
key
 = 10 + 
i
 * 10;

34 
v®
 = 1.0à+ 
i
;

35 
	`hashm­_š£¹
 ( 
hashm­
, &
key
, &
v®
, 
NULL
 );

38 
i
 = 0;

39 
	`hashm­_—ch
 ( , 
–
, 
hashm­
 ) {

40 
	`´štf
 ( "[%d] v®ui %f\n", 
i
, 
–
 );

41 ++
i
;

42 } 
hashm­_—ch_’d
;

45  
i
 = 0; i < 512; ++i ) {

46 
key
 = 10 + 
i
 * 10;

47 
v®
 = 1.0à+ 
i
;

48 
	`ex_check
 ( *((*)
	`hashm­_g‘
 ( 
hashm­
, &
key
 )è=ğ
v®
 );

50 
	`ex_check
 ( 
	`hashm­_Ën
(
hashm­
) == 512 );

53  
i
 = 0; i < 512; ++i ) {

54 
key
 = 10 + 
i
 * 10;

55 
	`ex_check
 ( 
	`hashm­_”a£
(
hashm­
, &
key
è!ğ
NULL
 );

57 
	`ex_check
 ( 
	`hashm­_Ën
(
hashm­
) == 0 );

59 
	`hashm­_ä“
 ( 
hashm­
 );

63 * 
key
;

64 
v®
;

66 
hashm­_t
* 
hashm­
 = 
	`hashm­_®loc
 ( (**), (), 256, 
hashkey_¡ršg
, 
keycmp_¡ršg
 );

68 
key
 = "foo"; 
v®
 = 1.0f; 
	`hashm­_š£¹
 ( 
hashm­
, &key, &v®, 
NULL
 );

69 
key
 = "b¬"; 
v®
 = 2.0f; 
	`hashm­_š£¹
 ( 
hashm­
, &key, &v®, 
NULL
 );

70 
key
 = "h–lo"; 
v®
 = 3.0f; 
	`hashm­_š£¹
 ( 
hashm­
, &key, &v®, 
NULL
 );

71 
key
 = "wÜld"; 
v®
 = 4.0f; 
	`hashm­_š£¹
 ( 
hashm­
, &key, &v®, 
NULL
 );

73 
key
 = "foo"; 
	`ex_check
 ( *((*)
	`hashm­_g‘
 ( 
hashm­
, &key )) == 1.0f );

74 
key
 = "b¬"; 
	`ex_check
 ( *((*)
	`hashm­_g‘
 ( 
hashm­
, &key )) == 2.0f );

75 
key
 = "h–lo"; 
	`ex_check
 ( *((*)
	`hashm­_g‘
 ( 
hashm­
, &key )) == 3.0f );

76 
key
 = "wÜld"; 
	`ex_check
 ( *((*)
	`hashm­_g‘
 ( 
hashm­
, &key )) == 4.0f );

78 
	`ex_check
 ( 
	`hashm­_Ën
(
hashm­
) == 4 );

80 
	`hashm­_ä“
 ( 
hashm­
 );

82 
	}
}

88 
	$šv®id
 ()

90 
hashm­_t
* 
hashm­
 = 
	`hashm­_®loc
 ( (
ušt32
), (), 10, 
hashkey_ušt32
, 
keycmp_ušt32
 );

91 
	`hashm­_ä“
 ( 
hashm­
 );

92 
	}
}

98 
	$‹¡_hashm­
 ()

100 
	`nÜm®
();

101 
	`šv®id
();

102 
	}
}

	@tests\test.base\test_list.c

12 
	~"../../cÜe/cÜe_šc.h
"

13 
	~"../../cÚš”/li¡.h
"

23 
	$nÜm®
 () {

24 
li¡_t
* 
li¡
 = 
	`li¡_®loc
 ( (
ušt32
) );

26 
i
;

27 
li¡_node_t
* 
node
 = 
NULL
;

30  
i
 = 0; i < 512; ++i ) {

31 
	`li¡_push_back
 ( 
li¡
, &
i
 );

33 
	`ex_check
Ğ
	`li¡_Ën
(
li¡
) == 512 );

36 
node
 = 
	`li¡_h—d
(
li¡
);

37 
i
 = 0;

38  
node
 ) {

39 
	`ex_check
Ğ*((
ušt32
*)
node
->
v®ue
è=ğ
i
 );

40 
node
 =‚ode->
Ãxt
;

41 ++
i
;

45 
node
 = 
	`li¡_h—d
(
li¡
);

46  
node
 ) {

47 
node
 = 
	`li¡_”a£
 ( 
li¡
,‚ode );

49 
	`ex_check
Ğ
	`li¡_Ën
(
li¡
) == 0 );

51 
	`li¡_ä“
 (
li¡
);

52 
	}
}

58 
	$šv®id
 () {

59 
	}
}

65 
	$‹¡_li¡
 () {

66 
	`nÜm®
 ();

67 
	`šv®id
 ();

68 
	}
}

	@tests\test.base\test_memmng.c

12 
	~"../../cÜe/cÜe_šc.h
"

22 
	$nÜm®
 ()

24 cÚ¡ 
BUFFER_SIZE
 = 5;

25 cÚ¡ 
MAX_COUNT
 = 256;

26 
i
;

27 * 
±r
;

29 
±r
 = 
	`ex_m®loc
 ( 2048 * (*) );

30  
i
 = 0; i < 
MAX_COUNT
; ++i )

32 * 
‹¡Buf
 = (*)
	`ex_m®loc
Ğ()*
BUFFER_SIZE
 );

33 ((**)
±r
)[
i
] = 
‹¡Buf
;

34 
	`ex_ä“
(
‹¡Buf
);

36 
	`ex_ä“
(
±r
);

37 
	}
}

43 
	$memËak
 ()

45 
	}
}

51 
	$‹¡_memmng
 ()

53 
	`nÜm®
 ();

54 
	`memËak
 ();

55 
	}
}

	@tests\test.base\test_pool.c

12 
	~"../../cÜe/cÜe_šc.h
"

13 
	~"../../cÚš”/poŞ.h
"

23 
	$nÜm®
 ()

26 
poŞ_t
* 
poŞ
 = 
	`poŞ_®loc
 ( (
št32
), 10 );

29 
	`poŞ_š£¹_št32
 ( 
poŞ
, 10 );

30 
	`poŞ_š£¹_št32
 ( 
poŞ
, 20 );

31 
	`poŞ_š£¹_št32
 ( 
poŞ
, 30 );

32 
	`poŞ_š£¹_št32
 ( 
poŞ
, 40 );

34 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,0) == 10 );

35 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,1) == 20 );

36 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,2) == 30 );

37 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,3) == 40 );

40 
i
 = 0;

41 
	`poŞ_—ch
 ( 
št32
, 
–
, 
poŞ
 ) {

42 
	`´štf
 ("[%d] v®ui %d\n", 
i
, 
–
 );

43 ++
i
;

44 } 
poŞ_—ch_’d


48 
	`poŞ_š£¹_št32
 ( 
poŞ
, 50 );

49 
	`poŞ_š£¹_št32
 ( 
poŞ
, 60 );

50 
	`poŞ_š£¹_št32
 ( 
poŞ
, 70 );

51 
	`poŞ_š£¹_št32
 ( 
poŞ
, 80 );

52 
	`poŞ_š£¹_št32
 ( 
poŞ
, 90 );

53 
	`poŞ_š£¹_št32
 ( 
poŞ
, 100 );

54 
	`poŞ_š£¹_št32
 ( 
poŞ
, 110 );

55 
	`poŞ_š£¹_št32
 ( 
poŞ
, 120 );

57 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,0 ) == 10 );

58 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,1 ) == 20 );

59 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,2 ) == 30 );

60 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,3 ) == 40 );

61 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,4 ) == 50 );

62 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,5 ) == 60 );

63 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,6 ) == 70 );

64 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,7 ) == 80 );

65 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,8 ) == 90 );

66 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,9 ) == 100 );

67 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,10) == 110 );

68 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,11) == 120 );

71 
i
 = 0;

72 
	`poŞ_—ch
 ( 
št32
, 
–
, 
poŞ
 ) {

73 
	`´štf
 ("[%d] v®ui %d\n", 
i
, 
–
 );

74 ++
i
;

75 } 
poŞ_—ch_’d


79 
	`poŞ_”a£
Ğ
poŞ
, 4 );

80 
	`poŞ_”a£
Ğ
poŞ
, 10 );

81 
	`poŞ_š£¹_št32
Ğ
poŞ
, 200 );

82 
	`poŞ_š£¹_št32
Ğ
poŞ
, 210 );

83 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,10) == 200 );

84 
	`ex_check
Ğ
	`poŞ_g‘_št32
(
poŞ
,4) == 210 );

86 
	`poŞ_ä“
 ( 
poŞ
 );

89 
poŞ
 = 
	`poŞ_®loc
 ( (*), 10 );

92 
	`poŞ_š£¹_¡ršg
 ( 
poŞ
, "hello world!" );

93 
	`ex_check
 ( 
	`¡rcmp
 ( 
	`poŞ_g‘_¡ršg
(
poŞ
,0), "hello world!" ) == 0 );

95 
	`poŞ_ä“
 ( 
poŞ
 );

96 
	}
}

102 
	$šv®id
()

105 
poŞ_t
* 
poŞ
 = 
	`poŞ_®loc
 ( (
št32
), 10 );

107 
v®
 = 0;

110 
	`poŞ_š£¹_št32
 ( 
poŞ
, 10 );

111 
	`poŞ_š£¹_št32
 ( 
poŞ
, 20 );

112 
	`poŞ_š£¹_št32
 ( 
poŞ
, 30 );

113 
	`poŞ_š£¹_št32
 ( 
poŞ
, 40 );

114 
	`poŞ_š£¹_št32
 ( 
poŞ
, 50 );

115 
	`poŞ_š£¹_št32
 ( 
poŞ
, 60 );

116 
	`poŞ_š£¹_št32
 ( 
poŞ
, 70 );

117 
	`poŞ_š£¹_št32
 ( 
poŞ
, 80 );

118 
	`poŞ_š£¹_št32
 ( 
poŞ
, 90 );

119 
	`poŞ_š£¹_št32
 ( 
poŞ
, 100 );

122 
v®
 = 
	`poŞ_g‘_št32
 ( 
poŞ
, 40 );

125 
	`poŞ_”a£
Ğ
poŞ
, 40 );

126 
	`poŞ_”a£
Ğ
poŞ
, 0 );

127 
	`poŞ_”a£
Ğ
poŞ
, 1 );

128 
	`poŞ_”a£
Ğ
poŞ
, 2 );

129 
	`poŞ_”a£
Ğ
poŞ
, 3 );

130 
	`poŞ_”a£
Ğ
poŞ
, 4 );

131 
	`poŞ_”a£
Ğ
poŞ
, 4 );

132 
	`poŞ_”a£
Ğ
poŞ
, 5 );

133 
	`poŞ_”a£
Ğ
poŞ
, 6 );

134 
	`poŞ_”a£
Ğ
poŞ
, 7 );

135 
	`poŞ_”a£
Ğ
poŞ
, 8 );

136 
	`poŞ_”a£
Ğ
poŞ
, 9 );

137 
	`poŞ_”a£
Ğ
poŞ
, 10 );

138 
	`poŞ_”a£
Ğ
poŞ
, 11 );

139 
	`poŞ_”a£
Ğ
poŞ
, 12 );

140 
	`poŞ_”a£
Ğ
poŞ
, 13 );

142 
	`poŞ_ä“
 ( 
poŞ
 );

143 
	}
}

150 
	$‹¡_poŞ
 ()

152 
	`nÜm®
();

153 
	`šv®id
();

154 
	}
}

	@tests\test.base\test_rapid.c

12 
	~"../../cÜe/cÜe_šc.h
"

13 
	~"../../cÚš”/hashm­.h
"

19 
	$‹¡_¿pid
 ()

23 
hashm­_t
* 
hashm­
 = 
	`hashm­_®loc
 ( (
ušt32
), (), 256, 
hashkey_ušt32
, 
keycmp_ušt32
 );

24 
	`hashm­_ä“
 ( 
hashm­
 );

29 * 
±r
 = 
	`ex_m®loc
((
ušt32
));

30 
	`ex_ä“
(
±r
);

32 
	}
}

	@tests\test.base\test_stringID.c

12 
	~"../../cÜe/cÜe_šc.h
"

13 
	~"../../cÜe/¡ršg/¡ršgID.h
"

14 
	~"../../cÚš”/¬¿y.h
"

20 cÚ¡ * 
	gmedŸ_fe
 = "e:/project/dev/exsdk/res/";

27 
	$nÜm®
 ()

29 
·th
[
MAX_PATH
];

30 
FILE
* 
å
;

31 
size_t
 
fsize
;

32 * 
d©a
;

33 
¬¿y_t
 *
wÜds
, *
wÜd_IDs
;

35 
	`¡ºıy
 ( 
·th
, 
medŸ_fe
, 
MAX_PATH
 );

36 
å
 = 
	`fİ’
 ( 
	`¡rÿt
Ğ
·th
, "sid.test.txt" ), "r" );

37 
	`ex_as£¹_»tuº
 ( 
å
, , "f% nÙ found!", 
·th
 );

39 
	`f£ek
 ( 
å
, 0L, 
SEEK_END
 );

40 
fsize
 = 
	`á–l
(
å
);

41 
	`f£ek
 ( 
å
, 0L, 
SEEK_SET
 );

43 
d©a
 = (*)
	`ex_m®loc
Ğ
fsize
 * () );

44 
	`ä—d
 ( 
d©a
, (), 
fsize
, 
å
 );

47 
ušt
 
cur
 = 0,
´ev
 = 0;

48 
size_t
 
sid
;

50 
wÜds
 = 
	`¬¿y_®loc
 ( (
wch¬_t
*), 256 );

51 
wÜd_IDs
 = 
	`¬¿y_®loc
 ( (
size_t
), 256 );

54  
cur
 < 
fsize
 ) {

55 iàĞ
d©a
[
cur
] == ' ' ) {

56 
wÜd
[128];

57 
wch¬_t
* 
w_wÜd
;

58 
ušt
 
wÜd_Ën
 = 
cur
 - 
´ev
;

60 
	`ex_as£¹
 ( 
wÜd_Ën
 < 128, "the wordƒxceedhe†ength ofhe string (e.g 128) " );

61 
	`¡ºıy
 ( 
wÜd
, 
d©a
 + 
´ev
, 
wÜd_Ën
 );

62 
wÜd
[
wÜd_Ën
] = '\0';

64 
w_wÜd
 = 
	`ex_m®loc
 (128 * (
wch¬_t
));

65 
sid
 = 
	`¡rID
Ğ
	`to_wcs
Ğ
wÜd
, 
w_wÜd
 ) );

66 
	`ex_as£¹
(
sid
 !ğ-1, "ÿn'ˆg‘ sŒšg ID oà%ls", 
w_wÜd
);

68 
	`¬¿y_push_back
 ( 
wÜds
, &
w_wÜd
 );

69 
	`¬¿y_push_back
 ( 
wÜd_IDs
, &
sid
 );

70 
´ev
 = 
cur
;

72 ++
cur
;

76 
cur
 = 0;

77  
cur
 < 
	`¬¿y_Ën
(
wÜds
) ) {

78 
wch¬_t
* 
wÜd
 = *((wch¬_t**)
	`¬¿y_g‘
Ğ
wÜds
, 
cur
 ));

79 
size_t
 
sid
 = *((size_t*)
	`¬¿y_g‘
Ğ
wÜd_IDs
, 
cur
 ));

81 
	`ex_as£¹
 ( 
	`wcscmp
(
	`sid_toSŒšg
(
sid
), 
wÜd
) == 0, "%s(%d) is‚otƒqualo %s", sid_toString(sid), sid, word );

82 ++
cur
;

86 
cur
 = 0;

87  
cur
 < 
	`¬¿y_Ën
(
wÜds
) ) {

88 * 
±r
 = *((
wch¬_t
**)
	`¬¿y_g‘
Ğ
wÜds
, 
cur
 ));

89 
	`ex_ä“
(
±r
);

90 ++
cur
;

92 
	`¬¿y_ä“
 ( 
wÜds
 );

93 
	`¬¿y_ä“
 ( 
wÜd_IDs
 );

96 
	`ex_ä“
 (
d©a
);

97 
	}
}

103 
	$šv®id
()

105 
	}
}

111 
	$‹¡_¡ršgID
 ()

113 
	`nÜm®
();

114 
	`šv®id
();

115 
	}
}

	@tests\test.graphics\main.c

8 
	~<¡dio.h
>

9 
	~"../../ext/SDL/šşude/SDL.h
"

10 #undeà
maš


12 
	~"../../cÜe/cÜe_šc.h
"

13 
	~"../../g¿phics/g¿phics_šc.h
"

19 
	$´oûss_ev’ts
 () {

21 
qu™
 = 0;

24 
SDL_Ev’t
 
ev’t
;

25  
	`SDL_PŞlEv’t
(&
ev’t
) )

27 iàĞ
ev’t
.
ty³
 =ğ
SDL_QUIT
 )

29 
qu™
 = 1;

31 iàĞ
ev’t
.
ty³
 =ğ
SDL_KEYDOWN
 )

33  
ev’t
.
key
.
keysym
.
sym
 )

35 
SDLK_ESCAPE
:

37 
qu™
 = 1;

43  
qu™
;

44 
	}
}

50 
	$»nd”_sûÃ
 ()

53 
	}
}

59 
	$maš_loİ
 ()

61 
qu™
 = 0;

63  !
qu™
 ) {

65 
qu™
 = 
	`´oûss_ev’ts
();

68 
	`begš_äame
();

69 
	`»nd”_sûÃ
();

70 
	`’d_äame
();

72 
	}
}

78 
	$maš
 ( 
¬gc
, * 
¬gv
[] )

80 
	`´štf
 ( "startest...\n" );

82 
	`š™_sdl_gl
();

83 
	`maš_loİ
();

86 
	}
}

	@tests\test.lua\main.c

12 
	~"../../cÜe/cÜe_šc.h
"

18 
‹¡_nÜm®
();

24 
	$maš
Ğ
¬gc
, * 
¬gv
[] )

26 
	`´štf
 ("================\n");

27 
	`´štf
 ("startesting...\n");

28 
	`´štf
 ("================\n");

31 
	`cÜe_š™
();

34 
	`‹¡_nÜm®
 ();

37 
	`cÜe_deš™
();

40 
	}
}

	@tests\test.lua\test_normal.c

12 
	~"../../cÜe/cÜe_šc.h
"

14 
	~"../../ext/lua-5.1.4/¤c/lua.h
"

15 
	~"../../ext/lua-5.1.4/¤c/Ïuxlib.h
"

16 
	~"../../ext/lua-5.1.4/¤c/lu®ib.h
"

22 cÚ¡ * 
	gmedŸ_fe
 = "e:/project/dev/exsdk/res/lua/";

28 cÚ¡ 
luaL_»g
 
	glu®ibs
[] =

30 { "ba£", 
luaİ’_ba£
 },

31 { 
NULL
, NULL }

35 
	$İ’lu®ibs
(
lua_S‹
 *
l
)

37 cÚ¡ 
luaL_»g
 *
lib
;

39 
lib
 = 
lu®ibs
;†ib->
func
 !ğ
NULL
;†ib++)

41 
lib
->
	`func
(
l
);

42 
	`lua_£‰İ
(
l
, 0);

44 
	}
}

46 
	$‹¡_nÜm®
 ()

48 
lua_S‹
 *
l
;

49 
·th
[
MAX_PATH
];

52 
l
 = 
	`lua_İ’
();

53 
	`İ’lu®ibs
(
l
);

60 
	`´štf
("This†ine in directly from C\n\n");

62 
	`¡ºıy
 ( 
·th
, 
medŸ_fe
, 
MAX_PATH
 );

63 
	`¡rÿt
 ( 
·th
, "script.lua" );

64 iàĞ
	`luaL_dofe
Ğ
l
, 
·th
 ) != 0 )

65 
	`årštf
 ( 
¡d”r
,"%s\n", 
	`lua_to¡ršg
(
l
,-1) );

67 
	`´štf
("\nBacko C‡gain\n\n");

70 
	`lua_şo£
(
l
);

71 
	}
}

	@core/core_inc.h

9 #iâdeà
CORE_INC_H_1277524348


10 
	#CORE_INC_H_1277524348


	)

13 
	~"glob®/glob®_šc.h
"

14 
	~"memÜy/memÜy_šc.h
"

15 
	~"debug/debug_šc.h
"

16 
	~"th»ad/th»ad_šc.h
"

17 
	~"¡ršg/¡ršg_šc.h
"

18 
	~"misc/misc_šc.h
"

	@
1
.
0
69
1441
algo\CRC.c
algo\CRC.h
algo\algo_inc.h
algo\bit.h
algo\hash.c
algo\hash.h
container\array.c
container\array.h
container\bitarray.c
container\bitarray.h
container\hashmap.c
container\hashmap.h
container\list.c
container\list.h
container\pool.c
container\pool.h
core\core_inc.h
core\debug\debug.c
core\debug\debug.h
core\debug\debug_inc.h
core\debug\msgbox.c
core\debug\msgbox.h
core\global\compiler.h
core\global\config.h
core\global\constants.h
core\global\external.h
core\global\global_inc.h
core\global\macro.h
core\global\platform.h
core\global\types.h
core\memory\dlmalloc-2.8.4.c
core\memory\dlmalloc-2.8.4.h
core\memory\memmng.c
core\memory\memory.h
core\memory\memory_inc.h
core\misc\core.c
core\misc\core.h
core\misc\flags.h
core\misc\misc_inc.h
core\misc\ptr.h
core\string\stringID.c
core\string\stringID.h
core\string\string_inc.h
core\string\string_op.c
core\string\string_op.h
core\thread\mutex.h
core\thread\mutex_win32.c
core\thread\thread.h
core\thread\thread_inc.h
exsdk.c
exsdk.h
graphics\device.c
graphics\device.h
graphics\graphics_inc.h
math\math_inc.h
math\mathop.h
tests\test.base\main.c
tests\test.base\test_array.c
tests\test.base\test_bitarry.c
tests\test.base\test_hashmap.c
tests\test.base\test_list.c
tests\test.base\test_memmng.c
tests\test.base\test_pool.c
tests\test.base\test_rapid.c
tests\test.base\test_stringID.c
tests\test.graphics\main.c
tests\test.lua\main.c
tests\test.lua\test_normal.c
core/core_inc.h
