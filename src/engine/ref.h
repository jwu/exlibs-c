// ======================================================================================
// File         : ref.h
// Author       : Wu Jie 
// Last Change  : 01/29/2011 | 09:32:47 AM | Saturday,January
// Description  : 
// ======================================================================================

// #################################################################################
#ifndef REF_H_1296264775
#define REF_H_1296264775
// #################################################################################

// ######################### 
#ifdef __cplusplus
extern "C" { 
#endif
// ######################### 

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

typedef struct ex_ref_t {
    ex_uid_t uid;
    void *ptr;
    int *refcount;
    bool *isvalid;
} ex_ref_t; 

///////////////////////////////////////////////////////////////////////////////
// function define
///////////////////////////////////////////////////////////////////////////////

extern ex_ref_t ex_invalidref ();
extern ex_ref_t ex_newref ( void *_obj );
extern void ex_delref ( ex_ref_t _ref );

extern int ex_incref ( ex_ref_t _ref );
extern int ex_decref ( ex_ref_t _ref );

extern bool ex_ref_isvalid ( ex_ref_t _ref );

// ######################### 
#ifdef __cplusplus
} // end extern C 
#endif
// ######################### 

// #################################################################################
#endif // END REF_H_1296264775
// #################################################################################
