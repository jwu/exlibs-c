// ======================================================================================
// File         : mutex.h
// Author       : Wu Jie 
// Last Change  : 07/10/2010 | 01:09:09 AM | Saturday,July
// Description  : 
// ======================================================================================

// #################################################################################
#ifndef MUTEX_H_1278695351
#define MUTEX_H_1278695351
// #################################################################################

// ######################### 
#ifdef __cplusplus
extern "C" { 
#endif
// ######################### 

#define EX_MUTEX_TIMEOUT 1
#define EX_MUTEX_MAXWAIT (~(uint32)0)

///////////////////////////////////////////////////////////////////////////////
// decls
///////////////////////////////////////////////////////////////////////////////

#if ( EX_PLATFORM == EX_WIN32 )
    typedef HANDLE mutex_id_t;
#else
    typedef pthread_mutex_t mutex_id_t;
#endif

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

typedef struct ex_mutex_t { 
    mutex_id_t id;
} ex_mutex_t;

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

extern ex_mutex_t* ex_create_mutex ();

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

extern void ex_destroy_mutex ( ex_mutex_t* );

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

extern int ex_mutex_lock ( ex_mutex_t* );

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

extern int ex_mutex_unlock ( ex_mutex_t* );

// ######################### 
#ifdef __cplusplus
} // end extern C 
#endif
// ######################### 


// #################################################################################
#endif // END MUTEX_H_1278695351
// #################################################################################


