// ======================================================================================
// File         : serialize_macro.h
// Author       : Wu Jie 
// Last Change  : 01/16/2011 | 22:47:15 PM | Sunday,January
// Description  : 
// ======================================================================================

// #################################################################################
#ifndef SERIALIZE_MACRO_H_1295189236
#define SERIALIZE_MACRO_H_1295189236
// #################################################################################

// ######################### 
#ifdef __cplusplus
extern "C" { 
#endif
// ######################### 

///////////////////////////////////////////////////////////////////////////////
// defines
///////////////////////////////////////////////////////////////////////////////

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

#define EX_SERIALIZE_BEGIN(_class) \
    void __ex_serialize_##_class( ex_stream_t* _stream, strid_t _name, _class* _val ) { \
        if ( _stream->next_child ) { \
            int ret = _stream->next_child( _stream, _name, EX_CLASSID(_class) ); \
            if ( ret != 0 ) { \
                ex_warning ( "failed to find %s", ex_strid_to_cstr(_name) ); \
                return; \
            } \
        }

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

#define EX_SERIALIZE(_class,_type,_val) \
        __ex_serialize_##_type(_stream,#_val,_val);

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

#define EX_SERIALIZE_END }

// ######################### 
#ifdef __cplusplus
} // end extern C 
#endif
// ######################### 


// #################################################################################
#endif // END SERIALIZE_MACRO_H_1295189236
// #################################################################################


