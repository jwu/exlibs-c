// ======================================================================================
// File         : path_op.c
// Author       : Wu Jie 
// Last Change  : 07/14/2011 | 15:24:35 PM | Thursday,July
// Description  : 
// ======================================================================================

///////////////////////////////////////////////////////////////////////////////
// includes
///////////////////////////////////////////////////////////////////////////////

#include "exsdk.h"
#include "path_op.h"

///////////////////////////////////////////////////////////////////////////////
// defines
///////////////////////////////////////////////////////////////////////////////

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void ex_path_get_dir( char _out[MAX_PATH], const char *_path ) {
    size_t len;
    const char *p;

    p = _path + strlen (_path);
    len = 0;
    while ( p != _path ) {
        if ( *p == '/' ) {
            len = p - _path;
            break;
        }
        --p;
    }

    strncpy ( _out, _path, len );
    _out[len] = '\0';
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void ex_path_get_filename( char _out[MAX_PATH], const char *_path ) {
    size_t len;
    const char *p;

    p = _path + strlen (_path);
    len = 0;
    while ( p != _path ) {
        if ( *p == '/' ) {
            p = p + 1;
            break;
        }
        ++len;
        --p;
    }

    strncpy ( _out, p, len );
    _out[len] = '\0';
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void ex_path_get_ext ( char _out[MAX_PATH], const char *_path ) {
    size_t len;
    const char *p;

    p = _path + strlen (_path);
    len = 0;
    while ( p != _path ) {
        if ( *p == '.' && (p != _path || *(p-1) != '/') ) {
            p = p + 1;
            break;
        }
        ++len;
        --p;
    }

    strncpy ( _out, p, len );
    _out[len] = '\0';
}
