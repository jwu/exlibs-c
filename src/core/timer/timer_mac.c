// ======================================================================================
// File         : timer_mac.c
// Author       : Wu Jie 
// Last Change  : 12/29/2010 | 10:11:37 AM | Wednesday,December
// Description  : 
// ======================================================================================

///////////////////////////////////////////////////////////////////////////////
// includes
///////////////////////////////////////////////////////////////////////////////

#include "exsdk.h"

///////////////////////////////////////////////////////////////////////////////
// defines
///////////////////////////////////////////////////////////////////////////////

static struct timeval __start_ticks;

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

int ex_sys_timer_init () {
    // init start ticks
    gettimeofday(&__start_ticks, NULL);
    return 0;
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void ex_sys_timer_deinit () {
}

// ------------------------------------------------------------------ 
// Desc: return ms 
// ------------------------------------------------------------------ 

uint32 ex_timer_get_ticks () {
    uint32 ticks;
    struct timeval now;
    gettimeofday(&now, NULL);
    ticks = (now.tv_sec - __start_ticks.tv_sec) * 1000 
        + (now.tv_usec - __start_ticks.tv_usec) / 1000;
    return (ticks);
}
