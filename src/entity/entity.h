// ======================================================================================
// File         : entity.h
// Author       : Wu Jie 
// Last Change  : 11/25/2010 | 17:16:24 PM | Thursday,November
// Description  : 
// ======================================================================================

// #################################################################################
#ifndef ENTITY_H_1290676586
#define ENTITY_H_1290676586
// #################################################################################

// ######################### 
#ifdef __cplusplus
extern "C" { 
#endif
// ######################### 

#include "component.h"

///////////////////////////////////////////////////////////////////////////////
// struct
///////////////////////////////////////////////////////////////////////////////

// ------------------------------------------------------------------ 
/*! 
 @struct ex_entity_t
 @details
*/// ------------------------------------------------------------------ 

EX_DECL_CLASS_BEGIN(ex_entity_t)
    ex_uid_t uid;
    strid_t name;
    // NOTE: we don't use "ex_hashmap_t* _type_to_comp" because we may get base_type of the component 
    ex_array_t *comps;
    struct ex_world_t *world; // the world it belongs
    // cached components 
    struct ex_trans2d_t *trans2d;
    struct ex_camera_t *camera;
EX_DECL_CLASS_END(ex_entity_t)

///////////////////////////////////////////////////////////////////////////////
// functions
///////////////////////////////////////////////////////////////////////////////

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

extern void ex_entity_init ( ex_entity_t *_ent );
extern void ex_entity_deinit ( ex_entity_t *_ent );

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

extern ex_component_t *ex_entity_get_comp ( const ex_entity_t *_ent, strid_t _typeID );

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

extern ex_component_t *ex_entity_add_comp ( ex_entity_t *_ent, strid_t _typeID );

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

extern void ex_entity_level_start ( ex_entity_t *_ent );
extern void ex_entity_update ( ex_entity_t *_ent );
extern void ex_entity_post_update ( ex_entity_t *_ent );

// ######################### 
#ifdef __cplusplus
} // end extern C 
#endif
// ######################### 


// #################################################################################
#endif // END ENTITY_H_1290676586
// #################################################################################


