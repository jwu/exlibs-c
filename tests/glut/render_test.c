// ======================================================================================
// File         : render_test.c
// Author       : Wu Jie 
// Last Change  : 04/15/2011 | 13:28:07 PM | Friday,April
// Description  : 
// ======================================================================================

///////////////////////////////////////////////////////////////////////////////
// externs
///////////////////////////////////////////////////////////////////////////////

#include "exsdk.h"

#include "graphics/graphics_inc.h"
#include "engine/engine_inc.h"

///////////////////////////////////////////////////////////////////////////////
// world
extern ex_ref_t *g_world;
///////////////////////////////////////////////////////////////////////////////

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void init () {
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void deinit () {
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void update () {
}

// ------------------------------------------------------------------ 
// Desc: 
extern int __win_width;
extern int __win_height;
// ------------------------------------------------------------------ 

void render () {
    struct lua_State *l = ex_lua_main_state();

    // 3d render test
    ex_camera_apply ( ex_world_main_camera(g_world) );
    if ( ex_fsys_file_exists( "render/render_3D.lua" ) )
        ex_lua_dofile( l, "render/render_3D.lua", NULL );

    // 2d render test
    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, __win_width, __win_height, 0, -1.0, 1.0);
    if ( ex_fsys_file_exists( "render/render_2D.lua" ) )
        ex_lua_dofile( l, "render/render_2D.lua", NULL );
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void on_keyboard ( uint8 _key ) {
}

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

void on_mouse ( int _x, int _y ) {
}
